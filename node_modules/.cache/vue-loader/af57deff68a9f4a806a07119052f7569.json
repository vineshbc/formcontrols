{"remainingRequest":"/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/organisms/FDTable/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/organisms/FDTable/index.vue","mtime":1610544258558},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSwgRW1pdCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCB7IFN0YXRlLCBBY3Rpb24gfSBmcm9tICd2dWV4LWNsYXNzJwppbXBvcnQgRkRUYWJsZUl0ZW1zIGZyb20gJy4uLy4uL21vbGVjdWxlcy9GRFRhYmxlSXRlbXMvaW5kZXgudnVlJwppbXBvcnQgeyBJc2VsZWN0Q29udHJvbCwgSXNldENoaWxkQ29udHJvbHMsIEl1cGRhdGVDb250cm9sLCBJdXBkYXRlQ29udHJvbEV4dHJhRGF0YSwgSXVwZGF0ZWRTZWxlY3RlZENvbnRyb2wgfSBmcm9tICdAL3N0b3JlTW9kdWxlcy9mZC9hY3Rpb25zJwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL2V2ZW50LWJ1cycKaW1wb3J0IHsgY2hlY2tQcm9wZXJ0eVZhbHVlIH0gZnJvbSAnQC9zdG9yZU1vZHVsZXMvZmQvY2hlY2tWYWxpZGF0aW9uJwoKaW50ZXJmYWNlIElQcm9wQ29udHJvbCB7CiAgcHJvcGVydHlOYW1lOiBrZXlvZiBjb250cm9sUHJvcGVydGllcwogIHZhbHVlIDogYW55Cn0KCkBDb21wb25lbnQoewogIG5hbWU6ICdGRFRhYmxlJywKICBjb21wb25lbnRzOiB7CiAgICBGRFRhYmxlSXRlbXMKICB9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZEVGFibGUgZXh0ZW5kcyBWdWUgewogIEBQcm9wKHsgdHlwZTogT2JqZWN0LCByZXF1aXJlZDogdHJ1ZSB9KSB0YWJsZURhdGEhOiB0YWJsZURhdGFzOwogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnVzZXJmb3JtRGF0YSkgdXNlcmZvcm1EYXRhITogdXNlcmZvcm1EYXRhOwogIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6IFN0cmluZyB9KSBwdWJsaWMgcmVhZG9ubHkgdXNlckZvcm1JZCEgOiBzdHJpbmcKICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlIH0pIHB1YmxpYyByZWFkb25seSBnZXRTZWxlY3RlZENvbnRyb2xzRGF0YXM6IGFueQogIEBBY3Rpb24oJ2ZkL3VwZGF0ZUNvbnRyb2wnKSB1cGRhdGVDb250cm9sITogKHBheWxvYWQ6IEl1cGRhdGVDb250cm9sKSA9PiB2b2lkOwogIEBBY3Rpb24oJ2ZkL3VwZGF0ZUNvbnRyb2xFeHRyYURhdGEnKSB1cGRhdGVDb250cm9sRXh0cmFEYXRhITogKAogICAgcGF5bG9hZDogSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGEKICApID0+IHZvaWQ7CiAgQEFjdGlvbignZmQvc2V0Q2hpbGRDb250cm9scycpIHNldENoaWxkQ29udHJvbHMhOiAoCiAgICBwYXlsb2FkOiBJc2V0Q2hpbGRDb250cm9scwogICkgPT4gdm9pZDsKICBAU3RhdGUoKHN0YXRlKSA9PiBzdGF0ZS5mZC5zZWxlY3RlZENvbnRyb2xzKSBzZWxlY3RlZENvbnRyb2xzITogZmRTdGF0ZVsnc2VsZWN0ZWRDb250cm9scyddOwoKICBlbWl0VXBkYXRlUHJvcGVydHkgKAogICAgcHJvcGVydHlOYW1lOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywKICAgIHZhbHVlOiBhbnkKICApIHsKICAgIHRoaXMudXBkYXRlUHJvcGVydHkoeyBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSwgdmFsdWU6IHZhbHVlIH0pCiAgfQoKICBlbWl0VXBkYXRlRXh0cmFQcm9wZXJ0eSAoCiAgICBwcm9wZXJ0eU5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzLAogICAgdmFsdWU6IGFueQogICkgewogICAgdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogdmFsdWUgfSkKICB9CiAgdXBkYXRlUGFnZUluZGV4IChwcm9wVmFsdWU6IG51bWJlcikgewogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdCiAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtzZWxlY3RlZF0ucHJvcGVydGllcy5JbmRleCEKICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQoKICAgIGlmIChwcm9wVmFsdWUgPCB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCkgewogICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVt2YWxdLnByb3BlcnRpZXMuSW5kZXggPT09IHByb3BWYWx1ZSkKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUodXNlckRhdGFbY29udGFpbmVyXS5jb250cm9sc1tpbmRleF0sICdJbmRleCcsIHN3YXBUYWJJbmRleCkKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoc2VsZWN0ZWQsICdJbmRleCcsIHByb3BWYWx1ZSkKICAgICAgY29uc3QgY29udHJvbHMgPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzCiAgICAgIGNvbnRyb2xzLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNlckRhdGFbYV0ucHJvcGVydGllcy5JbmRleCEgLSB1c2VyRGF0YVtiXS5wcm9wZXJ0aWVzLkluZGV4IQogICAgICB9KQogICAgICB0aGlzLnNldENoaWxkQ29udHJvbHMoewogICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgICBjb250YWluZXJJZDogY29udGFpbmVyLAogICAgICAgIHRhcmdldENvbnRyb2xzOiBjb250cm9scwogICAgICB9KQogICAgICByZXR1cm4gdHJ1ZQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgfQogIGdldExvd2VzdEluZGV4ICh0ZW1wQ29udHJvbHM6IHN0cmluZ1tdLCBjb250cm9sTGVuZ3RoOiBudW1iZXIsIHByb3BlcnR5VHlwZTogYm9vbGVhbikgewogICAgbGV0IGxhc3RDb250cm9sSWQgPSBjb250cm9sTGVuZ3RoCiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcENvbnRyb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IHByb3BldHlOYW1lID0gcHJvcGVydHlUeXBlID8gdXNlckRhdGFbdGVtcENvbnRyb2xzW2ldXS5leHRyYURhdGFzIS56SW5kZXghIDogdXNlckRhdGFbdGVtcENvbnRyb2xzW2ldXS5leHRyYURhdGFzIS5UYWJJbmRleCEKICAgICAgaWYgKHByb3BldHlOYW1lICE9PSAtMSkgewogICAgICAgIGNvbnN0IElkTnVtID0gcHJvcGV0eU5hbWUKICAgICAgICBpZiAoIWlzTmFOKElkTnVtKSAmJiBsYXN0Q29udHJvbElkID4gSWROdW0pIHsKICAgICAgICAgIGxhc3RDb250cm9sSWQgPSBJZE51bQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIGxhc3RDb250cm9sSWQKICB9CiAgc3dhcFRhYkluZGV4ICh0ZW1wWkluZGV4OiBudW1iZXIpIHsKICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdCiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdCiAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtzZWxlY3RlZF0ucHJvcGVydGllcyEuVGFiSW5kZXghCiAgICBpZiAodGVtcFpJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCAtIDEgJiYgdGVtcFpJbmRleCA+IC0xKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoCiAgICAgICAgKHZhbCkgPT4gdXNlckRhdGFbdmFsXS5wcm9wZXJ0aWVzIS5UYWJJbmRleCA9PT0gdGVtcFpJbmRleAogICAgICApCiAgICAgIHRoaXMudXBkYXRlUHJvcFZhbHVlKHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNbaW5kZXhdLCAnVGFiSW5kZXgnLCBzd2FwVGFiSW5kZXgpCiAgICAgIHRoaXMudXBkYXRlUHJvcFZhbHVlKHNlbGVjdGVkLCAnVGFiSW5kZXgnLCB0ZW1wWkluZGV4KQogICAgfQogIH0KICB1cGRhdGVUYWJJbmRleFZhbHVlICh2YWw6IG51bWJlcikgewogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0KICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWRbMF0KICAgIGNvbnN0IGNvbnRhaW5lckNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJdLmNvbnRyb2xzCiAgICBjb25zdCBjb250cm9sVHlwZSA9IHVzZXJEYXRhW3NlbGVjdGVkXS50eXBlCiAgICBpZiAoY29udHJvbFR5cGUgIT09ICdGREltYWdlJykgewogICAgICBjb25zdCB0ZW1wQ29udHJvbHMgPSBbXQogICAgICBmb3IgKGNvbnN0IGluZGV4IGluIGNvbnRhaW5lckNvbnRyb2xzKSB7CiAgICAgICAgY29uc3QgY250cmxEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJDb250cm9sc1tpbmRleF1dCiAgICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnRkRJbWFnZScpIHsKICAgICAgICAgIHRlbXBDb250cm9scy5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3QgbGFzdENvbnRyb2xJZCA9IHRlbXBDb250cm9scy5sZW5ndGggPiAwID8gdGhpcy5nZXRMb3dlc3RJbmRleCh0ZW1wQ29udHJvbHMsIHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoIC0gMSwgZmFsc2UpCiAgICAgICAgOiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoIC0gMQogICAgICBpZiAodmFsIDw9IGxhc3RDb250cm9sSWQpIHsKICAgICAgICB0aGlzLnN3YXBUYWJJbmRleCh2YWwpCiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogIH0KCiAgdXBkYXRlRXh0cmFQcm9wZXJ0eSAoYXJnOiBJdXBkYXRlQ29udHJvbEV4dHJhRGF0YSkgewogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyEKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy51cGRhdGVDb250cm9sRXh0cmFEYXRhKHsKICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgY29udHJvbElkOiBzZWxlY3RlZFtpXSwKICAgICAgICBwcm9wZXJ0eU5hbWU6IGFyZy5wcm9wZXJ0eU5hbWUsCiAgICAgICAgdmFsdWU6IGFyZy52YWx1ZQogICAgICB9KQogICAgfQogIH0KICB1cGRhdGVQcm9wZXJ0eSAoYXJnOiBJUHJvcENvbnRyb2wpIHsKICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChhcmcucHJvcGVydHlOYW1lID09PSAnVGFiSW5kZXgnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVGFiSW5kZXhWYWx1ZShwYXJzZUludChhcmcudmFsdWUpKQogICAgICB9IGVsc2UgaWYgKGFyZy5wcm9wZXJ0eU5hbWUgPT09ICdJbmRleCcpIHsKICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVQYWdlSW5kZXgocGFyc2VJbnQoYXJnLnZhbHVlKSkKICAgICAgfSBlbHNlIGlmIChhcmcucHJvcGVydHlOYW1lID09PSAnTmFtZScpIHsKICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVOYW1lKHNlbGVjdGVkW2ldLCBhcmcudmFsdWUpCiAgICAgIH0gZWxzZSBpZiAoYXJnLnByb3BlcnR5TmFtZSA9PT0gJ1ZhbHVlJyAmJiAodGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxlY3RlZFtpXV0udHlwZSA9PT0gJ1NwaW5CdXR0b24nIHx8IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bc2VsZWN0ZWRbaV1dLnR5cGUgPT09ICdTY3JvbGxCYXInKSkgewogICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVNwaW5CdXR0b25TY3JvbGxCYXJWYWx1ZVByb3Aoc2VsZWN0ZWRbaV0sIGFyZy52YWx1ZSkKICAgICAgfSBlbHNlIGlmIChhcmcucHJvcGVydHlOYW1lID09PSAnTWluJyB8fCBhcmcucHJvcGVydHlOYW1lID09PSAnTWF4JykgewogICAgICAgIHRoaXMudXBkYXRlUHJvcFZhbHVlKHNlbGVjdGVkW2ldLCBhcmcucHJvcGVydHlOYW1lLCBhcmcudmFsdWUpCiAgICAgICAgdGhpcy52YWxpZGF0ZVZhbHVlUHJvcGVydHkoc2VsZWN0ZWRbaV0sIGFyZy52YWx1ZSkKICAgICAgfSBlbHNlIGlmIChhcmcucHJvcGVydHlOYW1lID09PSAnQ2FuY2VsJyB8fCBhcmcucHJvcGVydHlOYW1lID09PSAnRGVmYXVsdCcpIHsKICAgICAgICB0aGlzLnZhbGlkYXRlQ2FuY2VsRGVmYXVsdFByb3Aoc2VsZWN0ZWRbaV0sIGFyZy5wcm9wZXJ0eU5hbWUsIGFyZy52YWx1ZSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVwZGF0ZVByb3BWYWx1ZShzZWxlY3RlZFtpXSwgYXJnLnByb3BlcnR5TmFtZSwgYXJnLnZhbHVlKQogICAgICB9CiAgICB9CiAgfQogIHVwZGF0ZVByb3BWYWx1ZSAoaWQ6IHN0cmluZywgcHJvcE5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzLCBwcm9wVmFsdWU6IGFueSkgewogICAgdGhpcy51cGRhdGVDb250cm9sKHsKICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICBjb250cm9sSWQ6IGlkLAogICAgICBwcm9wZXJ0eU5hbWU6IHByb3BOYW1lLAogICAgICB2YWx1ZTogcHJvcFZhbHVlCiAgICB9KQogIH0KICB2YWxpZGF0ZVZhbHVlUHJvcGVydHkgKGlkOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIpIHsKICAgIGxldCBhY3R1YWxWYWx1ZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1baWRdLnByb3BlcnRpZXMuVmFsdWUhIGFzIG51bWJlcgogICAgaWYgKCF0aGlzLmNoZWNrVmFsdWVSYW5nZU1pbk1heChpZCwgYWN0dWFsVmFsdWUpKSB7CiAgICAgIHRoaXMudXBkYXRlUHJvcFZhbHVlKGlkLCAnVmFsdWUnLCB2YWx1ZSkKICAgIH0KICB9CiAgdXBkYXRlU3BpbkJ1dHRvblNjcm9sbEJhclZhbHVlUHJvcCAoaWQ6IHN0cmluZywgdmFsdWU6IG51bWJlcikgewogICAgaWYgKHRoaXMuY2hlY2tWYWx1ZVJhbmdlTWluTWF4KGlkLCB2YWx1ZSkpIHsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoaWQsICdWYWx1ZScsIHZhbHVlKQogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfQogIHZhbGlkYXRlQ2FuY2VsRGVmYXVsdFByb3AgKGlkOiBzdHJpbmcsIHByb3BOYW1lOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywgdmFsdWU6IGJvb2xlYW4pIHsKICAgIGNvbnN0IHVzZXJGb3JtQ29udHJvbHMgPSBPYmplY3Qua2V5cyh0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdKQogICAgZm9yIChsZXQgY29udHJvbElkIG9mIHVzZXJGb3JtQ29udHJvbHMpIHsKICAgICAgaWYgKHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udHJvbElkXS50eXBlID09PSAnQ29tbWFuZEJ1dHRvbicpIHsKICAgICAgICBpZiAoY29udHJvbElkID09PSBpZCkgewogICAgICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoaWQsIHByb3BOYW1lLCB2YWx1ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoY29udHJvbElkLCBwcm9wTmFtZSwgZmFsc2UpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIGNoZWNrVmFsdWVSYW5nZU1pbk1heCAoaWQ6IHN0cmluZywgdmFsdWU6IG51bWJlcikgewogICAgbGV0IG1heFZhbHVlID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtpZF0ucHJvcGVydGllcy5NYXghCiAgICBsZXQgbWluVmFsdWUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2lkXS5wcm9wZXJ0aWVzLk1pbiEKICAgIGxldCBtaW4gPSBNYXRoLm1pbihtaW5WYWx1ZSwgbWF4VmFsdWUpCiAgICBsZXQgbWF4ID0gTWF0aC5tYXgobWluVmFsdWUsIG1heFZhbHVlKQogICAgaWYgKHZhbHVlID49IG1pbiAmJiB2YWx1ZSA8PSBtYXgpIHsKICAgICAgcmV0dXJuIHRydWUKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogIH0KICB1cGRhdGVOYW1lIChpZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7CiAgICBsZXQgdXNlckRhdGEKICAgIGxldCBpc1VuaXF1ZQogICAgaWYgKHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1baWRdLnR5cGUgPT09ICdVc2VyZm9ybScpIHsKICAgICAgdXNlckRhdGEgPSBPYmplY3Qua2V5cyh0aGlzLnVzZXJmb3JtRGF0YSkKICAgICAgaXNVbmlxdWUgPSB1c2VyRGF0YS5maW5kSW5kZXgodmFsID0+IHRoaXMudXNlcmZvcm1EYXRhW3ZhbF1bdmFsXS5wcm9wZXJ0aWVzLk5hbWUgPT09IHZhbHVlICYmIHZhbCAhPT0gaWQpCiAgICB9IGVsc2UgewogICAgICB1c2VyRGF0YSA9IE9iamVjdC5rZXlzKHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0pCiAgICAgIGlzVW5pcXVlID0gdXNlckRhdGEuZmluZEluZGV4KHZhbCA9PiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3ZhbF0ucHJvcGVydGllcy5OYW1lID09PSB2YWx1ZSAmJiB2YWwgIT09IGlkKQogICAgfQogICAgaWYgKGlzVW5pcXVlID09PSAtMSAmJiB2YWx1ZSAhPT0gJycpIHsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoaWQsICdOYW1lJywgdmFsdWUpCiAgICAgIHJldHVybiB0cnVlCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2UKICAgIH0KICB9CiAgdmFsaWRhdGVWYWx1ZVByb3BlcnR5Q2hib3hPcGJ0blRnbGJ0biAocHJvcGVydHlOYW1lIDoga2V5b2YgY29udHJvbFByb3BlcnRpZXMsIHByb3BlcnR5VmFsdWUgOiBzdHJpbmcpIDogc3RyaW5nIHsKICAgIGxldCByZXN1bHRWYWx1ZSA9ICcnCiAgICBpZiAoIWlzTmFOKHBhcnNlSW50KHByb3BlcnR5VmFsdWUpKSkgewogICAgICBpZiAocGFyc2VJbnQocHJvcGVydHlWYWx1ZSkgPT09IDApIHsKICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsICdGYWxzZScpCiAgICAgICAgcmVzdWx0VmFsdWUgPSAnRmFsc2UnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCAnVHJ1ZScpCiAgICAgICAgcmVzdWx0VmFsdWUgPSAnVHJ1ZScKICAgICAgfQogICAgfSBlbHNlIGlmIChwcm9wZXJ0eVZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykgewogICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsICdUcnVlJykKICAgICAgcmVzdWx0VmFsdWUgPSAnVHJ1ZScKICAgIH0gZWxzZSBpZiAocHJvcGVydHlWYWx1ZS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnKSB7CiAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgJ0ZhbHNlJykKICAgICAgcmVzdWx0VmFsdWUgPSAnRmFsc2UnCiAgICB9IGVsc2UgewogICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsICcnKQogICAgICByZXN1bHRWYWx1ZSA9ICcnCiAgICB9CiAgICByZXR1cm4gcmVzdWx0VmFsdWUKICB9CiAgdmFsaWRhdGVDb250cm9sU291cmNlUHJvcGVydHkgKHByb3BlcnR5VmFsdWUgOiBzdHJpbmcpIHsKICAgIC8vIHNob3VsZCB2YWxpZGF0ZSB0aGUgcHJvcGVydHlWYWx1ZQogICAgcmV0dXJuIHRydWUKICB9CiAgdmFsaWRhdGVSb3dTb3VyY2VQcm9wZXJ0eSAocHJvcGVydHlWYWx1ZSA6IHN0cmluZykgewogICAgLy8gc2hvdWxkIHZhbGlkYXRlIHRoZSBwcm9wZXJ0eVZhbHVlCiAgICByZXR1cm4gdHJ1ZQogIH0KICB1cGRhdGVBcHBlYXJhbmNlIChlOiBFdmVudCkgewogICAgY29uc3QgcHJvcGVydHlOYW1lOiBrZXlvZiBjb250cm9sUHJvcGVydGllcyA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5uYW1lIGFzIGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzCiAgICBjb25zdCBpbnB1dFR5cGUgPSB0aGlzLnRhYmxlRGF0YVtwcm9wZXJ0eU5hbWVdIS50eXBlCiAgICBsZXQgcHJvcGVydHlWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZQogICAgaWYgKGlucHV0VHlwZSA9PT0gJ2ZpbGUnKSB7CiAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdNb3VzZUljb24nIHx8IHByb3BlcnR5TmFtZSA9PT0gJ1BpY3R1cmUnKSB7CiAgICAgICAgdGhpcy5oYW5kbGVDb252ZXJ0aW9uSW1hZ2VUb0Jhc2U2NChlKQogICAgICB9CiAgICB9IGVsc2UgaWYgKGlucHV0VHlwZSA9PT0gJ1N0cmluZycpIHsKICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ0FjY2VsZXJhdG9yJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdQYXNzd29yZENoYXInKSB7CiAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkoCiAgICAgICAgICBwcm9wZXJ0eU5hbWUsCiAgICAgICAgICBwcm9wZXJ0eVZhbHVlICE9PSAnJyA/IHByb3BlcnR5VmFsdWVbMF0gOiBwcm9wZXJ0eVZhbHVlCiAgICAgICAgKTsKICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSBwcm9wZXJ0eVZhbHVlICYmIHByb3BlcnR5VmFsdWVbMF0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdOYW1lJykgewogICAgICAgIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKSkgewogICAgICAgICAgY29uc3QgaXNTdWNjZXNzID0gdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogcHJvcGVydHlWYWx1ZSB9KQogICAgICAgICAgaWYgKCFpc1N1Y2Nlc3MpIHsKICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCAnQ291bGQgbm90IHNldCB0aGUgTmFtZSBwcm9wZXJ0eS4gQW1iaWd1b3VzIG5hbWUuJykKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYE5vdCBhIGxlZ2FsIG9iamVjdCBuYW1lOiAnJHtwcm9wZXJ0eVZhbHVlfSdgKQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdWYWx1ZScpIHsKICAgICAgICBjb25zdCBjb250cm9sVHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNbMF1dLnR5cGUKICAgICAgICBpZiAoY29udHJvbFR5cGUgPT09ICdDaGVja0JveCcgfHwgY29udHJvbFR5cGUgPT09ICdPcHRpb25CdXR0b24nIHx8IGNvbnRyb2xUeXBlID09PSAnVG9nZ2xlQnV0dG9uJykgewogICAgICAgICAgY29uc3QgcmVzdWx0VmFsdWUgPSB0aGlzLnZhbGlkYXRlVmFsdWVQcm9wZXJ0eUNoYm94T3BidG5UZ2xidG4ocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKTsKICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHJlc3VsdFZhbHVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnQ29udHJvbFNvdXJjZScpIHsKICAgICAgICBjb25zdCBpc1ZhbGlkID0gdGhpcy52YWxpZGF0ZUNvbnRyb2xTb3VyY2VQcm9wZXJ0eShwcm9wZXJ0eVZhbHVlKQogICAgICAgIGlmIChpc1ZhbGlkKSB7CiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgJ0ludmFsaWQgcHJvcGVydHkgdmFsdWUuJykKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnUm93U291cmNlJykgewogICAgICAgIGNvbnN0IGlzVmFsaWQgPSB0aGlzLnZhbGlkYXRlUm93U291cmNlUHJvcGVydHkocHJvcGVydHlWYWx1ZSkKICAgICAgICBpZiAoaXNWYWxpZCkgewogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsICdJbnZhbGlkIHByb3BlcnR5IHZhbHVlLicpCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkKICAgICAgfQogICAgfSBlbHNlIGlmIChpbnB1dFR5cGUgPT09ICdudW1iZXInIHx8IGlucHV0VHlwZSA9PT0gJ2Zsb2F0JykgewogICAgICBjb25zdCB2YWx1ZSA9IHByb3BlcnR5VmFsdWUuaW5jbHVkZXMoJy4nKSA/IHBhcnNlRmxvYXQocHJvcGVydHlWYWx1ZSkgOiBwYXJzZUludChwcm9wZXJ0eVZhbHVlKQogICAgICBpZiAocHJvcGVydHlOYW1lID09PSAnSGVpZ2h0JyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdXaWR0aCcpIHsKICAgICAgICBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpKSB7CiAgICAgICAgICBpZiAoKHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNbMF1dLnR5cGUgPT09ICdVc2VyZm9ybScpKSB7CiAgICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdXaWR0aCcpIHsKICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gMCAmJiB2YWx1ZSA8IDEwMykgewogICAgICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCAxMDMpOwogICAgICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gJzEwMycKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnSGVpZ2h0JykgewogICAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAwICYmIHZhbHVlIDwgMzApIHsKICAgICAgICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgMzApOwogICAgICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gJzMwJwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgIGlmICh2YWx1ZSA+IDMyNzY3KSB7CiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdvdmVyZmxvdycsICdPdmVyZmxvdycpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuIEVudGVyIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAzMjc2OGApCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1RvcCcgfHwgcHJvcGVydHlOYW1lID09PSAnTGVmdCcpIHsKICAgICAgICBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLmApCiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ01heExlbmd0aCcpIHsKICAgICAgICBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMCBhbmQgIDIxNDc0ODM2NDdgKQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdCb3VuZENvbHVtbicpIHsKICAgICAgICBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMCBhbmQgNjU1MzZgKQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdDb2x1bW5Db3VudCcpIHsKICAgICAgICBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gLTEgYW5kIDIxNDc0ODM2NDdgKQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdMaXN0Um93cycpIHsKICAgICAgICBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMCBhbmQgMjE0NzQ4MzY0N2ApCiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1RleHRDb2x1bW4nKSB7CiAgICAgICAgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSkgewogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS4gRW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIC0xIGFuZCAzMjc2OGApCiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1ZhbHVlJykgewogICAgICAgIGNvbnN0IGNvbnRyb2xEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhc1swXV0KICAgICAgICBjb25zdCBjb250cm9sVHlwZSA9IGNvbnRyb2xEYXRhLnR5cGUKICAgICAgICBpZiAoY29udHJvbFR5cGUgPT09ICdUYWJTdHJpcCcpIHsKICAgICAgICAgIGlmICh2YWx1ZSA8IC0xIHx8IHZhbHVlID49IGNvbnRyb2xEYXRhLmV4dHJhRGF0YXMhLlRhYnMhLmxlbmd0aCEpIHsKICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLmApCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoY29udHJvbFR5cGUgPT09ICdNdWx0aVBhZ2UnKSB7CiAgICAgICAgICBpZiAodmFsdWUgPCAtMSB8fCB2YWx1ZSA+PSBjb250cm9sRGF0YS5jb250cm9scy5sZW5ndGgpIHsKICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLmApCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoY29udHJvbFR5cGUgPT09ICdTcGluQnV0dG9uJyB8fCBjb250cm9sVHlwZSA9PT0gJ1Njcm9sbEJhcicpIHsKICAgICAgICAgIGlmICh0aGlzLmlzRGVjaW1hbE51bWJlcihwcm9wZXJ0eVZhbHVlKSkgewogICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3QgaXNTdWNjZXNzID0gdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogdmFsdWUgfSkKICAgICAgICAgICAgaWYgKCFpc1N1Y2Nlc3MpIHsKICAgICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS5gKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnTWluJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdNYXgnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ1NtYWxsQ2hhbmdlJykgewogICAgICAgIGlmICh0aGlzLmlzRGVjaW1hbE51bWJlcihwcm9wZXJ0eVZhbHVlKSkgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICB9IGVsc2UgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSkgewogICAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ01pbicgfHwgcHJvcGVydHlOYW1lID09PSAnTWF4JykgewogICAgICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnR5KHsgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsIHZhbHVlOiB2YWx1ZSB9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYEludmFsaWQgcHJvcGVydHkgdmFsdWUuYCkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnVGFiRml4ZWRIZWlnaHQnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ1RhYkZpeGVkV2lkdGgnKSB7CiAgICAgICAgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSkgewogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS4gRW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDcyMDBgKQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdUYWJJbmRleCcpIHsKICAgICAgICBpZiAodGhpcy5pc0RlY2ltYWxOdW1iZXIocHJvcGVydHlWYWx1ZSkpIHsKICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nCiAgICAgICAgfSBlbHNlIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCB2YWx1ZSkpIHsKICAgICAgICAgIGNvbnN0IGlzU3VjY2VzcyA9IHRoaXMudXBkYXRlUHJvcGVydHkoeyBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSwgdmFsdWU6IHZhbHVlIH0pCiAgICAgICAgICBpZiAoIWlzU3VjY2VzcykgewogICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB6ZXJvLmApCiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ0luZGV4JykgewogICAgICAgIGlmICh0aGlzLmlzRGVjaW1hbE51bWJlcihwcm9wZXJ0eVZhbHVlKSkgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgMCkgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS4gRW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDMyNzY3YCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgaXNTdWNjZXNzID0gdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogcHJvcGVydHlWYWx1ZSB9KQogICAgICAgICAgaWYgKCFpc1N1Y2Nlc3MpIHsKICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhLkluZGV4IS52YWx1ZSEgYXMgc3RyaW5nCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS5gKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdEZWxheScpIHsKICAgICAgICBpZiAodGhpcy5pc0RlY2ltYWxOdW1iZXIocHJvcGVydHlWYWx1ZSkpIHsKICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nCiAgICAgICAgfSBlbHNlIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKSkgewogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkKICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgMCkgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS4gRW50ZXIgYSB2YWx1ZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gemVyby5gKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS5gKQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdab29tJykgewogICAgICAgIGlmICh0aGlzLmlzRGVjaW1hbE51bWJlcihwcm9wZXJ0eVZhbHVlKSkgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICB9IGVsc2UgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMTAgYW5kIDQwMC5gKQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdEcmF3QnVmZmVyJykgewogICAgICAgIGlmICh0aGlzLmlzRGVjaW1hbE51bWJlcihwcm9wZXJ0eVZhbHVlKSkgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICB9IGVsc2UgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMTYwMDAgYW5kIDEwNDg1NzYuYCkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnVHJhbnNpdGlvblBlcmlvZCcpIHsKICAgICAgICBpZiAodGhpcy5pc0RlY2ltYWxOdW1iZXIocHJvcGVydHlWYWx1ZSkpIHsKICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nCiAgICAgICAgfSBlbHNlIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKSkgewogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS4gRW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEwMDAwLmApCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpCiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaW5wdXRUeXBlID09PSAnQm9vbGVhbicpIHsKICAgICAgaWYgKChwcm9wZXJ0eU5hbWUgPT09ICdDYW5jZWwnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ0RlZmF1bHQnKSAmJiAoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKSA9PT0gJ3RydWUnKSB7CiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogdHJ1ZSB9KQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KAogICAgICAgICAgcHJvcGVydHlOYW1lLAogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID09PSAndHJ1ZScKICAgICAgICApCiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaW5wdXRUeXBlID09PSAnYXJyYXknKSB7CiAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgIT09ICcnKSB7CiAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ0JvcmRlclN0eWxlJyAmJiBwcm9wZXJ0eVZhbHVlID09PSAnMScpIHsKICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KAogICAgICAgICAgICBwcm9wZXJ0eU5hbWUsCiAgICAgICAgICAgIHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSkKICAgICAgICAgICkKICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KAogICAgICAgICAgICAnU3BlY2lhbEVmZmVjdCcsCiAgICAgICAgICAgIDAKICAgICAgICAgICkKICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1NwZWNpYWxFZmZlY3QnICYmIHBhcnNlSW50KHByb3BlcnR5VmFsdWUpID4gMCkgewogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkoCiAgICAgICAgICAgIHByb3BlcnR5TmFtZSwKICAgICAgICAgICAgcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKQogICAgICAgICAgKQogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkoCiAgICAgICAgICAgICdCb3JkZXJTdHlsZScsCiAgICAgICAgICAgIDAKICAgICAgICAgICkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkoCiAgICAgICAgICAgIHByb3BlcnR5TmFtZSwKICAgICAgICAgICAgcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKQogICAgICAgICAgKQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgaXNEZWNpbWFsTnVtYmVyIChwcm9wVmFsdWUgOiBzdHJpbmcpIHsKICAgIGlmIChwcm9wVmFsdWUuaW5kZXhPZignLicpID4gLTEpIHsKICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS5gKQogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfQogIGhhbmRsZUNvbnZlcnRpb25JbWFnZVRvQmFzZTY0IChlOiBFdmVudCkgewogICAgbGV0IHRoYXQgPSB0aGlzCiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpCiAgICBjb25zdCBmaWxlSW5wdXQgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkKICAgIGNvbnN0IGZpbGVQYXRoID0gZmlsZUlucHV0LnZhbHVlCiAgICBsZXQgYWxsb3dlZEV4dGVuc2lvbnMKICAgIC8vIEFsbG93ZWQgZmlsZSB0eXBlCiAgICBpZiAoZmlsZUlucHV0Lm5hbWUgPT09ICdQaWN0dXJlJykgewogICAgICBhbGxvd2VkRXh0ZW5zaW9ucyA9IC8oXC5qcGd8XC5qcGVnfFwuYm1wfFwuaWNvfFwuZ2lmKSQvaQogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZEV4dGVuc2lvbnMgPSAvKFwuYm1wfFwuaWNvfFwuZ2lmKSQvaQogICAgfQogICAgaWYgKCFhbGxvd2VkRXh0ZW5zaW9ucy5leGVjKGZpbGVQYXRoKSkgewogICAgICBmaWxlSW5wdXQudmFsdWUgPSAnJwogICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsICdJbnZhbGlkIFBpY3R1cmUnKQogICAgICByZXR1cm4gZmFsc2UKICAgIH0gZWxzZSB7CiAgICAgIGlmIChmaWxlSW5wdXQuZmlsZXMgJiYgZmlsZUlucHV0LmZpbGVzWzBdKSB7CiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB0aGF0LmVtaXRVcGRhdGVQcm9wZXJ0eShmaWxlSW5wdXQubmFtZSBhcyBrZXlvZiBjb250cm9sUHJvcGVydGllcywgcmVhZGVyLnJlc3VsdCkKICAgICAgICB9CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZUlucHV0LmZpbGVzWzBdKQogICAgICB9CiAgICB9CiAgfQoKICBlbWl0Rm9udCAodGVtcFZhbDogZm9udCkgewogICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkoJ0ZvbnQnLCB0ZW1wVmFsKQogIH0KICBjb2xvclBhbGV0dGVQcm9wIChzZWxlY3RlZFZhbHVlOiBJU2VsZWN0ZWRDb2xvUGFsZXR0ZVZhbHVlKSB7CiAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShzZWxlY3RlZFZhbHVlLnByb3BlcnR5TmFtZSBhcyBrZXlvZiBjb250cm9sUHJvcGVydGllcywgc2VsZWN0ZWRWYWx1ZS5wcm9wZXJ0eVZhbHVlKQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/organisms/FDTable","sourcesContent":["<template>\n  <div>\n    <div class=\"btn-group\">\n      <button class=\"button\" default>Alphabetic</button>\n      <button class=\"button\">Categorized</button>\n    </div>\n    <div\n      style=\"\n        position: absolute;\n        height: calc(100% - 59px);\n        overflow-y: auto;\n        overflow-x: hidden;\n        width: 100%;\n      \"\n    >\n      <FDTableItems\n        v-for=\"(value, propertyName, index) in tableData\"\n        :key=\"index\"\n        :controlPropertyData=\"value\"\n        :propertyName=\"propertyName\"\n        @updateAppearance=\"updateAppearance\"\n        @emitFont=\"emitFont\"\n        @colorPaletteProp=\"colorPaletteProp\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue, Emit } from 'vue-property-decorator'\nimport { State, Action } from 'vuex-class'\nimport FDTableItems from '../../molecules/FDTableItems/index.vue'\nimport { IselectControl, IsetChildControls, IupdateControl, IupdateControlExtraData, IupdatedSelectedControl } from '@/storeModules/fd/actions'\nimport { EventBus } from '@/FormDesigner/event-bus'\nimport { checkPropertyValue } from '@/storeModules/fd/checkValidation'\n\ninterface IPropControl {\n  propertyName: keyof controlProperties\n  value : any\n}\n\n@Component({\n  name: 'FDTable',\n  components: {\n    FDTableItems\n  }\n})\nexport default class FDTable extends Vue {\n  @Prop({ type: Object, required: true }) tableData!: tableDatas;\n  @State((state) => state.fd.userformData) userformData!: userformData;\n  @Prop({ required: true, type: String }) public readonly userFormId! : string\n  @Prop({ required: true }) public readonly getSelectedControlsDatas: any\n  @Action('fd/updateControl') updateControl!: (payload: IupdateControl) => void;\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (\n    payload: IupdateControlExtraData\n  ) => void;\n  @Action('fd/setChildControls') setChildControls!: (\n    payload: IsetChildControls\n  ) => void;\n  @State((state) => state.fd.selectedControls) selectedControls!: fdState['selectedControls'];\n\n  emitUpdateProperty (\n    propertyName: keyof controlProperties,\n    value: any\n  ) {\n    this.updateProperty({ propertyName: propertyName, value: value })\n  }\n\n  emitUpdateExtraProperty (\n    propertyName: keyof controlProperties,\n    value: any\n  ) {\n    this.updateProperty({ propertyName: propertyName, value: value })\n  }\n  updatePageIndex (propValue: number) {\n    const userData = this.userformData[this.userFormId]\n    const selected = this.selectedControls[this.userFormId].selected[0]\n    const swapTabIndex = userData[selected].properties.Index!\n    const container = this.selectedControls[this.userFormId].container[0]\n\n    if (propValue < userData[container].controls.length) {\n      const index = userData[container].controls.findIndex(val => userData[val].properties.Index === propValue)\n      this.updatePropValue(userData[container].controls[index], 'Index', swapTabIndex)\n      this.updatePropValue(selected, 'Index', propValue)\n      const controls = userData[container].controls\n      controls.sort((a, b) => {\n        return userData[a].properties.Index! - userData[b].properties.Index!\n      })\n      this.setChildControls({\n        userFormId: this.userFormId,\n        containerId: container,\n        targetControls: controls\n      })\n      return true\n    } else {\n      return false\n    }\n  }\n  getLowestIndex (tempControls: string[], controlLength: number, propertyType: boolean) {\n    let lastControlId = controlLength\n    const userData = this.userformData[this.userFormId]\n    for (let i = 0; i < tempControls.length; i++) {\n      const propetyName = propertyType ? userData[tempControls[i]].extraDatas!.zIndex! : userData[tempControls[i]].extraDatas!.TabIndex!\n      if (propetyName !== -1) {\n        const IdNum = propetyName\n        if (!isNaN(IdNum) && lastControlId > IdNum) {\n          lastControlId = IdNum\n        }\n      }\n    }\n    return lastControlId\n  }\n  swapTabIndex (tempZIndex: number) {\n    const userData = this.userformData[this.userFormId]\n    const container = this.selectedControls[this.userFormId].container[0]\n    const selected = this.selectedControls[this.userFormId].selected[0]\n    const swapTabIndex = userData[selected].properties!.TabIndex!\n    if (tempZIndex <= userData[container].controls.length - 1 && tempZIndex > -1) {\n      const index = userData[container].controls.findIndex(\n        (val) => userData[val].properties!.TabIndex === tempZIndex\n      )\n      this.updatePropValue(userData[container].controls[index], 'TabIndex', swapTabIndex)\n      this.updatePropValue(selected, 'TabIndex', tempZIndex)\n    }\n  }\n  updateTabIndexValue (val: number) {\n    const userData = this.userformData[this.userFormId]\n    const container = this.selectedControls[this.userFormId].container[0]\n    const selected = this.selectedControls[this.userFormId].selected[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    const controlType = userData[selected].type\n    if (controlType !== 'FDImage') {\n      const tempControls = []\n      for (const index in containerControls) {\n        const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n        if (cntrlData.type === 'FDImage') {\n          tempControls.push(containerControls[index])\n        }\n      }\n      const lastControlId = tempControls.length > 0 ? this.getLowestIndex(tempControls, userData[container].controls.length - 1, false)\n        : this.userformData[this.userFormId][container].controls.length - 1\n      if (val <= lastControlId) {\n        this.swapTabIndex(val)\n        return true\n      } else {\n        return false\n      }\n    }\n  }\n\n  updateExtraProperty (arg: IupdateControlExtraData) {\n    const selected = this.getSelectedControlsDatas!\n    for (let i = 0; i < selected.length; i++) {\n      this.updateControlExtraData({\n        userFormId: this.userFormId,\n        controlId: selected[i],\n        propertyName: arg.propertyName,\n        value: arg.value\n      })\n    }\n  }\n  updateProperty (arg: IPropControl) {\n    const selected = this.getSelectedControlsDatas!\n    for (let i = 0; i < selected.length; i++) {\n      if (arg.propertyName === 'TabIndex') {\n        return this.updateTabIndexValue(parseInt(arg.value))\n      } else if (arg.propertyName === 'Index') {\n        return this.updatePageIndex(parseInt(arg.value))\n      } else if (arg.propertyName === 'Name') {\n        return this.updateName(selected[i], arg.value)\n      } else if (arg.propertyName === 'Value' && (this.userformData[this.userFormId][selected[i]].type === 'SpinButton' || this.userformData[this.userFormId][selected[i]].type === 'ScrollBar')) {\n        return this.updateSpinButtonScrollBarValueProp(selected[i], arg.value)\n      } else if (arg.propertyName === 'Min' || arg.propertyName === 'Max') {\n        this.updatePropValue(selected[i], arg.propertyName, arg.value)\n        this.validateValueProperty(selected[i], arg.value)\n      } else if (arg.propertyName === 'Cancel' || arg.propertyName === 'Default') {\n        this.validateCancelDefaultProp(selected[i], arg.propertyName, arg.value)\n      } else {\n        this.updatePropValue(selected[i], arg.propertyName, arg.value)\n      }\n    }\n  }\n  updatePropValue (id: string, propName: keyof controlProperties, propValue: any) {\n    this.updateControl({\n      userFormId: this.userFormId,\n      controlId: id,\n      propertyName: propName,\n      value: propValue\n    })\n  }\n  validateValueProperty (id: string, value: number) {\n    let actualValue = this.userformData[this.userFormId][id].properties.Value! as number\n    if (!this.checkValueRangeMinMax(id, actualValue)) {\n      this.updatePropValue(id, 'Value', value)\n    }\n  }\n  updateSpinButtonScrollBarValueProp (id: string, value: number) {\n    if (this.checkValueRangeMinMax(id, value)) {\n      this.updatePropValue(id, 'Value', value)\n      return true\n    }\n    return false\n  }\n  validateCancelDefaultProp (id: string, propName: keyof controlProperties, value: boolean) {\n    const userFormControls = Object.keys(this.userformData[this.userFormId])\n    for (let controlId of userFormControls) {\n      if (this.userformData[this.userFormId][controlId].type === 'CommandButton') {\n        if (controlId === id) {\n          this.updatePropValue(id, propName, value)\n        } else {\n          this.updatePropValue(controlId, propName, false)\n        }\n      }\n    }\n  }\n  checkValueRangeMinMax (id: string, value: number) {\n    let maxValue = this.userformData[this.userFormId][id].properties.Max!\n    let minValue = this.userformData[this.userFormId][id].properties.Min!\n    let min = Math.min(minValue, maxValue)\n    let max = Math.max(minValue, maxValue)\n    if (value >= min && value <= max) {\n      return true\n    } else {\n      return false\n    }\n  }\n  updateName (id: string, value: string) {\n    let userData\n    let isUnique\n    if (this.userformData[this.userFormId][id].type === 'Userform') {\n      userData = Object.keys(this.userformData)\n      isUnique = userData.findIndex(val => this.userformData[val][val].properties.Name === value && val !== id)\n    } else {\n      userData = Object.keys(this.userformData[this.userFormId])\n      isUnique = userData.findIndex(val => this.userformData[this.userFormId][val].properties.Name === value && val !== id)\n    }\n    if (isUnique === -1 && value !== '') {\n      this.updatePropValue(id, 'Name', value)\n      return true\n    } else {\n      return false\n    }\n  }\n  validateValuePropertyChboxOpbtnTglbtn (propertyName : keyof controlProperties, propertyValue : string) : string {\n    let resultValue = ''\n    if (!isNaN(parseInt(propertyValue))) {\n      if (parseInt(propertyValue) === 0) {\n        this.emitUpdateProperty(propertyName, 'False')\n        resultValue = 'False'\n      } else {\n        this.emitUpdateProperty(propertyName, 'True')\n        resultValue = 'True'\n      }\n    } else if (propertyValue.toLowerCase() === 'true') {\n      this.emitUpdateProperty(propertyName, 'True')\n      resultValue = 'True'\n    } else if (propertyValue.toLowerCase() === 'false') {\n      this.emitUpdateProperty(propertyName, 'False')\n      resultValue = 'False'\n    } else {\n      this.emitUpdateProperty(propertyName, '')\n      resultValue = ''\n    }\n    return resultValue\n  }\n  validateControlSourceProperty (propertyValue : string) {\n    // should validate the propertyValue\n    return true\n  }\n  validateRowSourceProperty (propertyValue : string) {\n    // should validate the propertyValue\n    return true\n  }\n  updateAppearance (e: Event) {\n    const propertyName: keyof controlProperties = (e.target as HTMLInputElement).name as keyof controlProperties\n    const inputType = this.tableData[propertyName]!.type\n    let propertyValue = (e.target as HTMLInputElement).value\n    if (inputType === 'file') {\n      if (propertyName === 'MouseIcon' || propertyName === 'Picture') {\n        this.handleConvertionImageToBase64(e)\n      }\n    } else if (inputType === 'String') {\n      if (propertyName === 'Accelerator' || propertyName === 'PasswordChar') {\n        this.emitUpdateProperty(\n          propertyName,\n          propertyValue !== '' ? propertyValue[0] : propertyValue\n        );\n        (e.target as HTMLInputElement).value = propertyValue && propertyValue[0]\n      } else if (propertyName === 'Name') {\n        if (checkPropertyValue(propertyName, propertyValue)) {\n          const isSuccess = this.updateProperty({ propertyName: propertyName, value: propertyValue })\n          if (!isSuccess) {\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n            EventBus.$emit('showErrorPopup', true, 'invalid', 'Could not set the Name property. Ambiguous name.')\n          }\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Not a legal object name: '${propertyValue}'`)\n        }\n      } else if (propertyName === 'Value') {\n        const controlType = this.userformData[this.userFormId][this.getSelectedControlsDatas[0]].type\n        if (controlType === 'CheckBox' || controlType === 'OptionButton' || controlType === 'ToggleButton') {\n          const resultValue = this.validateValuePropertyChboxOpbtnTglbtn(propertyName, propertyValue);\n          (e.target as HTMLInputElement).value = resultValue\n        } else {\n          this.emitUpdateProperty(propertyName, propertyValue)\n        }\n      } else if (propertyName === 'ControlSource') {\n        const isValid = this.validateControlSourceProperty(propertyValue)\n        if (isValid) {\n          this.emitUpdateProperty(propertyName, propertyValue)\n        } else {\n          EventBus.$emit('showErrorPopup', true, 'invalid', 'Invalid property value.')\n        }\n      } else if (propertyName === 'RowSource') {\n        const isValid = this.validateRowSourceProperty(propertyValue)\n        if (isValid) {\n          this.emitUpdateProperty(propertyName, propertyValue)\n        } else {\n          EventBus.$emit('showErrorPopup', true, 'invalid', 'Invalid property value.')\n        }\n      } else {\n        this.emitUpdateProperty(propertyName, propertyValue)\n      }\n    } else if (inputType === 'number' || inputType === 'float') {\n      const value = propertyValue.includes('.') ? parseFloat(propertyValue) : parseInt(propertyValue)\n      if (propertyName === 'Height' || propertyName === 'Width') {\n        if (checkPropertyValue(propertyName, value)) {\n          if ((this.userformData[this.userFormId][this.getSelectedControlsDatas[0]].type === 'Userform')) {\n            if (propertyName === 'Width') {\n              if (value >= 0 && value < 103) {\n                this.emitUpdateProperty(propertyName, 103);\n                (e.target as HTMLInputElement).value = '103'\n              } else {\n                this.emitUpdateProperty(propertyName, value)\n              }\n            } else if (propertyName === 'Height') {\n              if (value >= 0 && value < 30) {\n                this.emitUpdateProperty(propertyName, 30);\n                (e.target as HTMLInputElement).value = '30'\n              } else {\n                this.emitUpdateProperty(propertyName, value)\n              }\n            }\n          } else {\n            this.emitUpdateProperty(propertyName, value)\n          }\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          if (value > 32767) {\n            EventBus.$emit('showErrorPopup', true, 'overflow', 'Overflow')\n          } else {\n            EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 32768`)\n          }\n        }\n      } else if (propertyName === 'Top' || propertyName === 'Left') {\n        if (checkPropertyValue(propertyName, value)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\n        }\n      } else if (propertyName === 'MaxLength') {\n        if (checkPropertyValue(propertyName, value)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and  2147483647`)\n        }\n      } else if (propertyName === 'BoundColumn') {\n        if (checkPropertyValue(propertyName, value)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 65536`)\n        }\n      } else if (propertyName === 'ColumnCount') {\n        if (checkPropertyValue(propertyName, value)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between -1 and 2147483647`)\n        }\n      } else if (propertyName === 'ListRows') {\n        if (checkPropertyValue(propertyName, value)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 2147483647`)\n        }\n      } else if (propertyName === 'TextColumn') {\n        if (checkPropertyValue(propertyName, value)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between -1 and 32768`)\n        }\n      } else if (propertyName === 'Value') {\n        const controlData = this.userformData[this.userFormId][this.getSelectedControlsDatas[0]]\n        const controlType = controlData.type\n        if (controlType === 'TabStrip') {\n          if (value < -1 || value >= controlData.extraDatas!.Tabs!.length!) {\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n            EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\n          } else {\n            this.emitUpdateProperty(propertyName, value)\n          }\n        } else if (controlType === 'MultiPage') {\n          if (value < -1 || value >= controlData.controls.length) {\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n            EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\n          } else {\n            this.emitUpdateProperty(propertyName, value)\n          }\n        } else if (controlType === 'SpinButton' || controlType === 'ScrollBar') {\n          if (this.isDecimalNumber(propertyValue)) {\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          } else {\n            const isSuccess = this.updateProperty({ propertyName: propertyName, value: value })\n            if (!isSuccess) {\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n              EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\n            }\n          }\n        } else {\n          this.emitUpdateProperty(propertyName, propertyValue)\n        }\n      } else if (propertyName === 'Min' || propertyName === 'Max' || propertyName === 'SmallChange') {\n        if (this.isDecimalNumber(propertyValue)) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n        } else if (checkPropertyValue(propertyName, value)) {\n          if (propertyName === 'Min' || propertyName === 'Max') {\n            this.updateProperty({ propertyName: propertyName, value: value })\n          } else {\n            this.emitUpdateProperty(propertyName, value)\n          }\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Invalid property value.`)\n        }\n      } else if (propertyName === 'TabFixedHeight' || propertyName === 'TabFixedWidth') {\n        if (checkPropertyValue(propertyName, value)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 7200`)\n        }\n      } else if (propertyName === 'TabIndex') {\n        if (this.isDecimalNumber(propertyValue)) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n        } else if (checkPropertyValue(propertyName, value)) {\n          const isSuccess = this.updateProperty({ propertyName: propertyName, value: value })\n          if (!isSuccess) {\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          }\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value greater than or equal to zero.`)\n        }\n      } else if (propertyName === 'Index') {\n        if (this.isDecimalNumber(propertyValue)) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n        } else if (value < 0) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 32767`)\n        } else {\n          const isSuccess = this.updateProperty({ propertyName: propertyName, value: propertyValue })\n          if (!isSuccess) {\n            (e.target as HTMLInputElement).value = this.tableData!.Index!.value! as string\n            EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\n          }\n        }\n      } else if (propertyName === 'Delay') {\n        if (this.isDecimalNumber(propertyValue)) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n        } else if (checkPropertyValue(propertyName, propertyValue)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else if (value < 0) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value greater than or equal to zero.`)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Invalid property value.`)\n        }\n      } else if (propertyName === 'Zoom') {\n        if (this.isDecimalNumber(propertyValue)) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n        } else if (checkPropertyValue(propertyName, propertyValue)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 10 and 400.`)\n        }\n      } else if (propertyName === 'DrawBuffer') {\n        if (this.isDecimalNumber(propertyValue)) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n        } else if (checkPropertyValue(propertyName, propertyValue)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 16000 and 1048576.`)\n        }\n      } else if (propertyName === 'TransitionPeriod') {\n        if (this.isDecimalNumber(propertyValue)) {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n        } else if (checkPropertyValue(propertyName, propertyValue)) {\n          this.emitUpdateProperty(propertyName, value)\n        } else {\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 10000.`)\n        }\n      } else {\n        this.emitUpdateProperty(propertyName, value)\n      }\n    } else if (inputType === 'Boolean') {\n      if ((propertyName === 'Cancel' || propertyName === 'Default') && ((e.target as HTMLInputElement).value) === 'true') {\n        this.updateProperty({ propertyName: propertyName, value: true })\n      } else {\n        this.emitUpdateProperty(\n          propertyName,\n          (e.target as HTMLInputElement).value === 'true'\n        )\n      }\n    } else if (inputType === 'array') {\n      if ((e.target as HTMLInputElement).value !== '') {\n        if (propertyName === 'BorderStyle' && propertyValue === '1') {\n          this.emitUpdateProperty(\n            propertyName,\n            parseInt((e.target as HTMLInputElement).value)\n          )\n          this.emitUpdateProperty(\n            'SpecialEffect',\n            0\n          )\n        } else if (propertyName === 'SpecialEffect' && parseInt(propertyValue) > 0) {\n          this.emitUpdateProperty(\n            propertyName,\n            parseInt((e.target as HTMLInputElement).value)\n          )\n          this.emitUpdateProperty(\n            'BorderStyle',\n            0\n          )\n        } else {\n          this.emitUpdateProperty(\n            propertyName,\n            parseInt((e.target as HTMLInputElement).value)\n          )\n        }\n      }\n    }\n  }\n\n  isDecimalNumber (propValue : string) {\n    if (propValue.indexOf('.') > -1) {\n      EventBus.$emit('showErrorPopup', true, 'invalid', `Invalid property value.`)\n      return true\n    }\n    return false\n  }\n  handleConvertionImageToBase64 (e: Event) {\n    let that = this\n    const reader = new FileReader()\n    const fileInput = (e.target as HTMLInputElement)\n    const filePath = fileInput.value\n    let allowedExtensions\n    // Allowed file type\n    if (fileInput.name === 'Picture') {\n      allowedExtensions = /(\\.jpg|\\.jpeg|\\.bmp|\\.ico|\\.gif)$/i\n    } else {\n      allowedExtensions = /(\\.bmp|\\.ico|\\.gif)$/i\n    }\n    if (!allowedExtensions.exec(filePath)) {\n      fileInput.value = ''\n      EventBus.$emit('showErrorPopup', true, 'invalid', 'Invalid Picture')\n      return false\n    } else {\n      if (fileInput.files && fileInput.files[0]) {\n        reader.onload = function (e) {\n          that.emitUpdateProperty(fileInput.name as keyof controlProperties, reader.result)\n        }\n        reader.readAsDataURL(fileInput.files[0])\n      }\n    }\n  }\n\n  emitFont (tempVal: font) {\n    this.emitUpdateProperty('Font', tempVal)\n  }\n  colorPaletteProp (selectedValue: ISelectedColoPaletteValue) {\n    this.emitUpdateProperty(selectedValue.propertyName as keyof controlProperties, selectedValue.propertyValue)\n  }\n}\n</script>\n\n<style scoped>\n.node {\n  text-align: left;\n}\ntable {\n  margin-right: 0%;\n  width: 100%;\n  border: 1px solid black;\n  border-collapse: collapse;\n  color: black;\n}\nth,\ntd {\n  text-align: left;\n  font-size: 11px;\n  margin-right: 0%;\n  width: fit-content;\n  border: 1px solid black;\n  border-collapse: collapse;\n  color: black;\n}\nth {\n  width: 120%;\n  font-size: 12px;\n}\n.form-control {\n  float: left;\n  width: 280px;\n  cursor: pointer;\n  background-color: rgb(190, 185, 185);\n}\nlabel {\n  float: left;\n}\nselect {\n  width: 100%;\n  padding: 1px 2px;\n}\ninput {\n  width: 100%;\n}\n.btn-group .button {\n  border: none;\n  color: black;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 12px;\n  cursor: pointer;\n}\n.lefttd {\n  width: 120px;\n}\n</style>\n"]}]}