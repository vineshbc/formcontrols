{"remainingRequest":"/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/organisms/FDHeader/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/organisms/FDHeader/index.vue","mtime":1610544258558},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgeyBTdGF0ZSwgQWN0aW9uIH0gZnJvbSAndnVleC1jbGFzcycKaW1wb3J0IHsKICBJYWRkVXNlcmZvcm0sCiAgSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGEKfSBmcm9tICdAL3N0b3JlTW9kdWxlcy9mZC9hY3Rpb25zJwppbXBvcnQgeyBDb250cm9sUHJvcGVydHlEYXRhIH0gZnJvbSAnQC9Gb3JtRGVzaWduZXIvbW9kZWxzL0NvbnRyb2xzVGFibGVQcm9wZXJ0aWVzL0NvbnRyb2xQcm9wZXJ0eURhdGEnCmltcG9ydCBDdXRMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9jdXQuc3ZnJwppbXBvcnQgRmlsZVNhdmVMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9maWxlLXNhdmUuc3ZnJwppbXBvcnQgQ29weUxvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL2NvcHkuc3ZnJwppbXBvcnQgUGFzdGVMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9wYXN0ZS5zdmcnCmltcG9ydCBGaW5kTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvZmluZC5zdmcnCmltcG9ydCBVbmRvTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvdW5kby5zdmcnCmltcG9ydCBSZWRvTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvcmVkby5zdmcnCmltcG9ydCBEZXNpZ25Nb2RlTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvZGVzaWduLW1vZGUuc3ZnJwppbXBvcnQgUGpFeHBsb3JlckxvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL3BqLWV4cGxvcmVyLnN2ZycKaW1wb3J0IFBqUHJvcGVydHlMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9wai1wcm9wZXJ0eS5zdmcnCmltcG9ydCBPYmpCcm93c2VyTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvb2JqLWJyb3dzZXIuc3ZnJwppbXBvcnQgVG9vbEJveExvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL3Rvb2wtYm94LnN2ZycKaW1wb3J0IFVzZXJGb3JtTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvdXNlci1mcm9tLnN2ZycKaW1wb3J0IEhlbHBMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9oZWxwLnN2ZycKaW1wb3J0IENvZGVMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy92aWV3LWNvZGUuc3ZnJwppbXBvcnQgT2JqZWN0TG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvdmlldy1vYmplY3Quc3ZnJwppbXBvcnQgRkRTVkdJbWFnZSBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL2F0b21zL0ZEU1ZHSW1hZ2UvaW5kZXgudnVlJwppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL2V2ZW50LWJ1cycKaW1wb3J0IEZEQ29tbW9uTWV0aG9kIGZyb20gJ0AvYXBpL2Fic3RyYWN0L0Zvcm1EZXNpZ25lci9GRENvbW1vbk1ldGhvZCcKCkBDb21wb25lbnQoewogIG5hbWU6ICdIZWFkZXInLAogIGNvbXBvbmVudHM6IHsKICAgIEZpbGVTYXZlTG9nbywKICAgIEN1dExvZ28sCiAgICBDb3B5TG9nbywKICAgIFBhc3RlTG9nbywKICAgIEZpbmRMb2dvLAogICAgVW5kb0xvZ28sCiAgICBSZWRvTG9nbywKICAgIERlc2lnbk1vZGVMb2dvLAogICAgUGpFeHBsb3JlckxvZ28sCiAgICBQalByb3BlcnR5TG9nbywKICAgIE9iakJyb3dzZXJMb2dvLAogICAgVG9vbEJveExvZ28sCiAgICBVc2VyRm9ybUxvZ28sCiAgICBDb2RlTG9nbywKICAgIE9iamVjdExvZ28sCiAgICBIZWxwTG9nbywKICAgIEZEU1ZHSW1hZ2UKICB9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlYWRlciBleHRlbmRzIEZEQ29tbW9uTWV0aG9kIHsKICBkaXNwbGF5U3ViTWVudTogYm9vbGVhbiA9IGZhbHNlOwogIEBBY3Rpb24oJ2ZkL2FkZFVzZXJmb3JtJykgYWRkQ29udHJvbCE6IChwYXlsb2FkOiBJYWRkVXNlcmZvcm0pID0+IHZvaWQ7CiAgQEFjdGlvbignZmQvY2hhbmdlUnVuTW9kZScpIGNoYW5nZVJ1bk1vZGUhOiAocGF5bG9hZDogYm9vbGVhbikgPT4gdm9pZDsKCiAgQFN0YXRlKChzdGF0ZSkgPT4gc3RhdGUuZmQuc2VsZWN0ZWRDb250cm9scykKICBzZWxlY3RlZENvbnRyb2xzITogZmRTdGF0ZVsnc2VsZWN0ZWRDb250cm9scyddOwogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnVzZXJmb3JtRGF0YSkgdXNlcmZvcm1EYXRhITogdXNlcmZvcm1EYXRhOwogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLmlzUnVuTW9kZSkgaXNSdW5Nb2RlITogYm9vbGVhbjsKICBAQWN0aW9uKCdmZC91cGRhdGVDb250cm9sRXh0cmFEYXRhJykgdXBkYXRlQ29udHJvbEV4dHJhRGF0YSE6ICgKICAgIHBheWxvYWQ6IEl1cGRhdGVDb250cm9sRXh0cmFEYXRhCiAgKSA9PiB2b2lkOwogIHByb3BDb250cm9sRGF0YSA9IHt9OwogIHVzZXJGb3JtSWQgPSAnSURfVVNFUkZPUk0xJzsKICBpbnNlcnRVc2VyRm9ybSAoKSB7CiAgICB0aGlzLnByb3BDb250cm9sRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhCiAgICBjb25zdCB1c2VyZm9ybSA9IG5ldyBDb250cm9sUHJvcGVydHlEYXRhKCkKICAgIGNvbnN0IHVzZXJGb3JtSWQgPSBgSURfVVNFUkZPUk0kewogICAgICBPYmplY3Qua2V5cyh0aGlzLnVzZXJmb3JtRGF0YSkubGVuZ3RoICsgMQogICAgfWAKICAgIGNvbnN0IE5hbWUgPSBgVXNlckZvcm0ke09iamVjdC5rZXlzKHRoaXMudXNlcmZvcm1EYXRhKS5sZW5ndGggKyAxfWAKICAgIGNvbnN0IENhcHRpb24gPSBgVXNlckZvcm0ke09iamVjdC5rZXlzKHRoaXMudXNlcmZvcm1EYXRhKS5sZW5ndGggKyAxfWAKICAgIGNvbnN0IElEID0gT2JqZWN0LmtleXModGhpcy51c2VyZm9ybURhdGEpLmxlbmd0aCArIDEKICAgIHRoaXMuYWRkQ29udHJvbCh7CiAgICAgIHRhcmdldDogdGhpcywKICAgICAga2V5OiB1c2VyRm9ybUlkLAogICAgICB2YWx1ZTogewogICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgIC4uLnVzZXJmb3JtLmRhdGEuVXNlckZvcm0sCiAgICAgICAgICBOYW1lOiBOYW1lLAogICAgICAgICAgSUQ6IElELAogICAgICAgICAgQ2FwdGlvbjogQ2FwdGlvbgogICAgICAgIH0sCiAgICAgICAgY29udHJvbHM6IFtdLAogICAgICAgIGV4dHJhRGF0YXM6IHsgZGlzcGxheTogJ25vbmUnIH0sCiAgICAgICAgdHlwZTogJ1VzZXJmb3JtJwogICAgICB9CiAgICB9KQogIH0KICBzdWJNZW51RGlzcGxheSAoKSB7CiAgICB0aGlzLmRpc3BsYXlTdWJNZW51ID0gIXRoaXMuZGlzcGxheVN1Yk1lbnUKICB9CiAgY2xpY2tDaGFuZ2VNb2RlICgpIHsKICAgIHRoaXMuY2hhbmdlUnVuTW9kZSghdGhpcy5pc1J1bk1vZGUpCiAgfQogIG1ha2VFcXVhbCAodHlwZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMpIHsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBjb25zdCBjdHJsU2VsID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQKICAgIGNvbnN0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0KICAgIGNvbnN0IGNvbnRyb2xzID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9scwogICAgbGV0IGRpdnN0eWxlOiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXQogICAgbGV0IGdldEdyb3VwSW5kZXggPSAtMQogICAgRXZlbnRCdXMuJGVtaXQoJ2dldEdyb3VwU2l6ZScsIChkaXZzdGF5bGVBcnJheTogQXJyYXk8SUdyb3VwU3R5bGU+KSA9PiB7CiAgICAgIGRpdnN0eWxlID0gZGl2c3RheWxlQXJyYXkKICAgIH0pCiAgICBpZiAoY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgIGdldEdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFswXSkKICAgIH0KICAgIGxldCBwcm9wVmFsdWUgPSAwCiAgICBjb25zdCBsZWZ0QXJyYXk6IHN0cmluZ1tdID0gW10KICAgIGNvbnN0IHJpZ2h0QXJyYXk6IHN0cmluZ1tdID0gW10KICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBzZWxMZWZ0ID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpCiAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtnZXRHcm91cEluZGV4XS5sZWZ0ISkKICAgICAgICA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5MZWZ0CiAgICAgIGNvbnN0IHNlbFRvcCA9IGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKQogICAgICAgID8gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0R3JvdXBJbmRleF0udG9wISkKICAgICAgICA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5Ub3AKICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW2N0cmxTZWxbaW5kZXhdXS5wcm9wZXJ0aWVzCiAgICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgICAgaWYgKGN0cmxQcm9wLkxlZnQhIDw9IHNlbExlZnQhKSB7CiAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5Ub3AhIDw9IHNlbFRvcCEpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCAoZGl2c3RheWxlQXJyYXk6IEFycmF5PElHcm91cFN0eWxlPikgPT4gewogICAgICAgICAgZGl2c3R5bGUgPSBkaXZzdGF5bGVBcnJheQogICAgICAgIH0pCiAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoCiAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XQogICAgICAgICkKICAgICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCEpCiAgICAgICAgY29uc3QgZ3JvdXBUb3AgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0udG9wISkKICAgICAgICBjb25zdCBncm91cENvbnJvbCA9IHRoaXMuZ2V0R3JvdXBDb250cm9sKGN0cmxTZWxbaW5kZXhdKQogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICAgIGlmIChncm91cExlZnQgPD0gc2VsTGVmdCEpIHsKICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLkxlZnQhKSA9PT0gZ3JvdXBMZWZ0KSB7CiAgICAgICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLkxlZnQhKSA9PT0gZ3JvdXBMZWZ0KSB7CiAgICAgICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgICBpZiAoZ3JvdXBUb3AgPD0gc2VsVG9wISkgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcwogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuVG9wISkgPT09IGdyb3VwVG9wKSB7CiAgICAgICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCEpID09PSBncm91cFRvcCkgewogICAgICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgIGNvbnN0IGdldEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KAogICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0KICAgICAgKQogICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCEpCiAgICAgIGNvbnN0IGdyb3VwVG9wID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLnRvcCEpCiAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFswXSkKICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsKICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMKICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCEpID09PSBncm91cExlZnQpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCkKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcwogICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3AhKSA9PT0gZ3JvdXBUb3ApIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCkKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBsZWZ0QXJyYXkudW5zaGlmdChjdHJsU2VsWzBdKQogICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFswXSkKICAgIH0KICAgIGNvbnNvbGUubG9nKGxlZnRBcnJheSwgJycsIHJpZ2h0QXJyYXkpCiAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0ISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5MZWZ0IQogICAgICB9KQogICAgICByaWdodEFycmF5LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLkxlZnQhIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLkxlZnQhCiAgICAgIH0pCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5Ub3AhIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcCEKICAgICAgfSkKICAgICAgcmlnaHRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5Ub3AhIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcCEKICAgICAgfSkKICAgIH0KICAgIGxldCBsZWZ0Q29udHJvbCA9IHsgLi4udXNyRnJtRGF0YVtsZWZ0QXJyYXlbMF1dLnByb3BlcnRpZXMgfQogICAgaWYgKGxlZnRDb250cm9sLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoCiAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gbGVmdENvbnRyb2wuR3JvdXBJRAogICAgICApCiAgICAgIGNvbnN0IGdyb3VwU2l6ZSA9IGRpdnN0eWxlW2dyb3VwSW5kZXhdCiAgICAgIGxlZnRDb250cm9sID0gewogICAgICAgIC4uLmxlZnRDb250cm9sLAogICAgICAgIFdpZHRoOiBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS53aWR0aCEpLAogICAgICAgIEhlaWdodDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0uaGVpZ2h0ISksCiAgICAgICAgTGVmdDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0ubGVmdCEpLAogICAgICAgIFRvcDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0udG9wISkKICAgICAgfQogICAgfQogICAgbGV0IHJpZ2h0Q29udHJvbCA9IHsKICAgICAgLi4udXNyRnJtRGF0YVtyaWdodEFycmF5W3JpZ2h0QXJyYXkubGVuZ3RoIC0gMV1dLnByb3BlcnRpZXMKICAgIH0KICAgIGlmIChyaWdodENvbnRyb2wuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgY29uc3QgZ3JvdXBJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSByaWdodENvbnRyb2wuR3JvdXBJRAogICAgICApCiAgICAgIGNvbnN0IGdyb3VwU2l6ZSA9IGRpdnN0eWxlW2dyb3VwSW5kZXhdCiAgICAgIHJpZ2h0Q29udHJvbCA9IHsKICAgICAgICAuLi5sZWZ0Q29udHJvbCwKICAgICAgICBXaWR0aDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0ud2lkdGghKSwKICAgICAgICBIZWlnaHQ6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLmhlaWdodCEpLAogICAgICAgIExlZnQ6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLmxlZnQhKSwKICAgICAgICBUb3A6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLnRvcCEpCiAgICAgIH0KICAgIH0KICAgIGxldCB0b3RhbFNpemUgPSAwCiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW2N0cmxTZWxbaW5kZXhdXS5wcm9wZXJ0aWVzCiAgICAgICAgICB0b3RhbFNpemUgPSB0b3RhbFNpemUgKyBjdHJsUHJvcC5XaWR0aCEKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgZ3JvdXBJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0KICAgICAgICAgICkKICAgICAgICAgIHRvdGFsU2l6ZSA9IHRvdGFsU2l6ZSArIHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLndpZHRoISkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllcwogICAgICAgICAgdG90YWxTaXplID0gdG90YWxTaXplICsgY3RybFByb3AuSGVpZ2h0IQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBncm91cEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KAogICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XQogICAgICAgICAgKQogICAgICAgICAgdG90YWxTaXplID0gdG90YWxTaXplICsgcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0uaGVpZ2h0ISkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGxldCBkaWZmcmVuY2UgPSAwCiAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgIGRpZmZyZW5jZSA9CiAgICAgICAgKHJpZ2h0Q29udHJvbC5MZWZ0ISArCiAgICAgICAgICByaWdodENvbnRyb2wuV2lkdGghIC0KICAgICAgICAgIGxlZnRDb250cm9sLkxlZnQhIC0KICAgICAgICAgIHRvdGFsU2l6ZSkgLwogICAgICAgIChjdHJsU2VsLmxlbmd0aCAtIDEpCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgIGRpZmZyZW5jZSA9CiAgICAgICAgKHJpZ2h0Q29udHJvbC5Ub3AhICsKICAgICAgICAgIHJpZ2h0Q29udHJvbC5IZWlnaHQhIC0KICAgICAgICAgIGxlZnRDb250cm9sLlRvcCEgLQogICAgICAgICAgdG90YWxTaXplKSAvCiAgICAgICAgKGN0cmxTZWwubGVuZ3RoIC0gMSkKICAgIH0KICAgIGNvbnN0IHVuaXF1ZSA9ICgpID0+IHsKICAgICAgdmFyIGEgPSBsZWZ0QXJyYXkuY29uY2F0KHJpZ2h0QXJyYXkpCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSkgewogICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IGEubGVuZ3RoOyArK2opIHsKICAgICAgICAgIGlmIChhW2ldID09PSBhW2pdKSB7CiAgICAgICAgICAgIGEuc3BsaWNlKGotLSwgMSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGEKICAgIH0KICAgIGNvbnN0IGNvbWJpbmVBcnJheSA9IHVuaXF1ZSgpCiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgY29tYmluZUFycmF5Lmxlbmd0aCAtIDE7IGluZGV4KyspIHsKICAgICAgY29uc3QgcHJldkN0cmxQcm9wID0gdXNyRnJtRGF0YVtjb21iaW5lQXJyYXlbaW5kZXggLSAxXV0ucHJvcGVydGllcwogICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbY29tYmluZUFycmF5W2luZGV4XV0ucHJvcGVydGllcwogICAgICBsZXQgcHJldkluZGV4ID0gLTEKICAgICAgY29uc3QgY29udHJvbFByb3BJbmRleCA9IC0xCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgPT09ICcnICYmIGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7CiAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuTGVmdCEgKyBwcmV2Q3RybFByb3AuV2lkdGghICsgZGlmZnJlbmNlCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGNvbWJpbmVBcnJheVtpbmRleF0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgcHJldkluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KAogICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICkKICAgICAgICAgICAgcHJvcFZhbHVlID0KICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLmxlZnQhKSArCiAgICAgICAgICAgICAgcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS53aWR0aCEpICsKICAgICAgICAgICAgICBkaWZmcmVuY2UKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ISArIHByZXZDdHJsUHJvcC5XaWR0aCEgKyBkaWZmcmVuY2UKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICkKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCB0eXBlLCBwcm9wVmFsdWUsIGdldEluZGV4KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBjb21iaW5lQXJyYXlbaW5kZXhdKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycgJiYgY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgICAgcHJvcFZhbHVlID0gcHJldkN0cmxQcm9wLlRvcCEgKyBwcmV2Q3RybFByb3AuSGVpZ2h0ISArIGRpZmZyZW5jZQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGNvbWJpbmVBcnJheVtpbmRleF0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgICAgcHJldkluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KAogICAgICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgcHJvcFZhbHVlID0KICAgICAgICAgICAgICAgIHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0udG9wISkgKwogICAgICAgICAgICAgICAgcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS5oZWlnaHQhKSArCiAgICAgICAgICAgICAgICBkaWZmcmVuY2UKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wISArIHByZXZDdHJsUHJvcC5IZWlnaHQhICsgZGlmZnJlbmNlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgdHlwZSwgcHJvcFZhbHVlLCBnZXRJbmRleCkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGNvbWJpbmVBcnJheVtpbmRleF0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgYnJpbmdGcm9udCAoKSB7CiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0KICAgIGNvbnN0IGhpZ2hQcm9yQ29udHJvbDogc3RyaW5nW10gPSBbXQogICAgY29uc3QgbG93UHJvckNvbnRyb2w6IHN0cmluZ1tdID0gW10KICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFbMF0pWzBdCiAgICBjb25zdCBjb250YWluZXJDb250cm9scyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9scwogICAgZm9yIChjb25zdCBpbmRleCBpbiBjb250YWluZXJDb250cm9scykgewogICAgICBjb25zdCBjbnRybERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lckNvbnRyb2xzW2luZGV4XV0KICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnTXVsdGlQYWdlJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0ZyYW1lJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0xpc3RCb3gnKSB7CiAgICAgICAgaGlnaFByb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKQogICAgICB9IGVsc2UgewogICAgICAgIGxvd1Byb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKQogICAgICB9CiAgICB9CiAgICBsb3dQcm9yQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgfSkKICAgIGxldCBnZXRMb3dQcm9wSGlnaGVzdEluZGV4OiBzdHJpbmcgPSBsb3dQcm9yQ29udHJvbFtsb3dQcm9yQ29udHJvbC5sZW5ndGggLSAxXQogICAgaGlnaFByb3JDb250cm9sLnNvcnQoKGEsIGIpID0+IHsKICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghCiAgICB9KQogICAgbGV0IGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4ID0gaGlnaFByb3JDb250cm9sW2hpZ2hQcm9yQ29udHJvbC5sZW5ndGggLSAxXQogICAgY29uc3QgbG93U2VyaWVzQ29udHJvbDogc3RyaW5nW10gPSBbXQogICAgY29uc3QgaGlnaFNlcmllc0NvbnRyb2w6IHN0cmluZ1tdID0gW10KICAgIGNvbnN0IGdldFNlbENvbnRyb2wgPSBbLi4udGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhXQogICAgZ2V0U2VsQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgfSkKICAgIGZvciAoY29uc3Qgc2VsQ29udHJvbCBvZiBnZXRTZWxDb250cm9sKSB7CiAgICAgIGlmIChsb3dQcm9yQ29udHJvbC5pbmNsdWRlcyhzZWxDb250cm9sKSkgewogICAgICAgIGxvd1Nlcmllc0NvbnRyb2wucHVzaChzZWxDb250cm9sKQogICAgICB9IGVsc2UgewogICAgICAgIGhpZ2hTZXJpZXNDb250cm9sLnB1c2goc2VsQ29udHJvbCkKICAgICAgfQogICAgfQogICAgY29uc3Qgc2V0TG93UHJvcEhpZ2hJbmRleCA9IChjb250cm9sOiBzdHJpbmcpID0+IHsKICAgICAgaWYgKGxvd1Nlcmllc0NvbnRyb2wubGVuZ3RoID4gMCAmJiBsb3dTZXJpZXNDb250cm9sLmluY2x1ZGVzKGNvbnRyb2wpKSB7CiAgICAgICAgbG93U2VyaWVzQ29udHJvbC5wb3AoKQogICAgICAgIGNvbnN0IEluZGV4ID0gbG93UHJvckNvbnRyb2wuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVtnZXRMb3dQcm9wSGlnaGVzdEluZGV4IV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4KQogICAgICAgIGdldExvd1Byb3BIaWdoZXN0SW5kZXggPSBJbmRleCAhPT0gLTEgPyBsb3dQcm9yQ29udHJvbFtJbmRleF0gOiAnJwogICAgICAgIGlmIChJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIHNldExvd1Byb3BIaWdoSW5kZXgoZ2V0TG93UHJvcEhpZ2hlc3RJbmRleCkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHNldExvd1Byb3BIaWdoSW5kZXgoZ2V0TG93UHJvcEhpZ2hlc3RJbmRleCkKICAgIGxvd1Nlcmllc0NvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgIH0pCiAgICBpZiAobG93U2VyaWVzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgIGNvbnN0IGxvd2VzdFpJbmRleCA9IHVzZXJEYXRhW2xvd1Nlcmllc0NvbnRyb2xbMF1dLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgICAgbGV0IG5leHRTZXJpZXM6IHN0cmluZ1tdID0gW10KICAgICAgbGV0IGNvdW50ID0gbG93U2VyaWVzQ29udHJvbC5sZW5ndGggLSAxCiAgICAgIGNvbnN0IGRpZmYgPSB1c2VyRGF0YVtnZXRMb3dQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbbG93U2VyaWVzQ29udHJvbFtsb3dTZXJpZXNDb250cm9sLmxlbmd0aCAtIDFdXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBsb3dTZXJpZXNDb250cm9sKSB7CiAgICAgICAgY29uc3QgbmV4dENvbnRyb2wgPSBsb3dTZXJpZXNDb250cm9sLmZpbmRJbmRleCh2YWwgPT4gJ3pJbmRleCcgaW4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzISAmJiAodXNlckRhdGFbY3RybF0uZXh0cmFEYXRhcyEuekluZGV4ISArIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ISkpCiAgICAgICAgaWYgKG5leHRDb250cm9sICE9PSAtMSkgewogICAgICAgICAgbmV4dFNlcmllcy5wdXNoKGN0cmwpCiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBkaWZmZXJlbmNlID0gdXNlckRhdGFbZ2V0TG93UHJvcEhpZ2hlc3RJbmRleF0uZXh0cmFEYXRhcyEuekluZGV4ISAtIGNvdW50CiAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoY3RybCwgJ3pJbmRleCcsIGRpZmZlcmVuY2UpCiAgICAgICAgICBpZiAobmV4dFNlcmllcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dFNlcmllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB1c2VyRGF0YVtjdHJsXS5leHRyYURhdGFzIS56SW5kZXghIC0gKG5leHRTZXJpZXMubGVuZ3RoIC0gaSkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlcmllc1tpXSwgJ3pJbmRleCcsIGRpZmYpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV4dFNlcmllcyA9IFtdCiAgICAgICAgICB9CiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMQogICAgICAgIH0KICAgICAgfQogICAgICBsZXQgY291bnRlciA9IDAKICAgICAgZm9yIChjb25zdCBjdHJsIG9mIGxvd1Byb3JDb250cm9sKSB7CiAgICAgICAgaWYgKCF0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyEuaW5jbHVkZXMoY3RybCkpIHsKICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMQogICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGN0cmwsICd6SW5kZXgnLCBjb3VudGVyKQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGNvbnN0IHNldEhpZ2hQcm9wSGlnaEluZGV4ID0gKGNvbnRyb2w6IHN0cmluZykgPT4gewogICAgICBpZiAoaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoID4gMCAmJiBoaWdoU2VyaWVzQ29udHJvbC5pbmNsdWRlcyhjb250cm9sKSkgewogICAgICAgIGhpZ2hTZXJpZXNDb250cm9sLnBvcCgpCiAgICAgICAgY29uc3QgSW5kZXggPSBoaWdoUHJvckNvbnRyb2wuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVtnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleCFdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSAxID09PSB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCkKICAgICAgICBnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleCA9IEluZGV4ICE9PSAtMSA/IGhpZ2hQcm9yQ29udHJvbFtJbmRleF0gOiAnJwogICAgICAgIGlmIChJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIHNldEhpZ2hQcm9wSGlnaEluZGV4KGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4KQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgc2V0SGlnaFByb3BIaWdoSW5kZXgoZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXgpCiAgICBoaWdoU2VyaWVzQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgfSkKICAgIGlmIChoaWdoU2VyaWVzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgIGNvbnN0IGhpZ2hlc3RaSW5kZXggPSB1c2VyRGF0YVtoaWdoU2VyaWVzQ29udHJvbFswXV0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgICBsZXQgbmV4dFNlcmllczogc3RyaW5nW10gPSBbXQogICAgICBsZXQgY291bnQgPSBoaWdoU2VyaWVzQ29udHJvbC5sZW5ndGggLSAxCiAgICAgIGNvbnN0IGRpZmYgPSB1c2VyRGF0YVtnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleF0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2hpZ2hTZXJpZXNDb250cm9sW2hpZ2hTZXJpZXNDb250cm9sLmxlbmd0aCAtIDFdXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBoaWdoU2VyaWVzQ29udHJvbCkgewogICAgICAgIGNvbnN0IG5leHRDb250cm9sID0gaGlnaFNlcmllc0NvbnRyb2wuZmluZEluZGV4KHZhbCA9PiAnekluZGV4JyBpbiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhICYmICh1c2VyRGF0YVtjdHJsXS5leHRyYURhdGFzIS56SW5kZXghICsgMSA9PT0gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXghKSkKICAgICAgICBpZiAobmV4dENvbnRyb2wgIT09IC0xKSB7CiAgICAgICAgICBuZXh0U2VyaWVzLnB1c2goY3RybCkKICAgICAgICAgIGNvdW50ID0gY291bnQgLSAxCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSB1c2VyRGF0YVtnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleF0uZXh0cmFEYXRhcyEuekluZGV4ISAtIGNvdW50CiAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoY3RybCwgJ3pJbmRleCcsIGRpZmZlcmVuY2UpCiAgICAgICAgICBpZiAobmV4dFNlcmllcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dFNlcmllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB1c2VyRGF0YVtjdHJsXS5leHRyYURhdGFzIS56SW5kZXghIC0gKG5leHRTZXJpZXMubGVuZ3RoIC0gaSkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlcmllc1tpXSwgJ3pJbmRleCcsIGRpZmYpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV4dFNlcmllcyA9IFtdCiAgICAgICAgICB9CiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMQogICAgICAgIH0KICAgICAgfQogICAgICBsZXQgY291bnRlciA9IDAKICAgICAgZm9yIChjb25zdCBjdHJsIG9mIGhpZ2hQcm9yQ29udHJvbCkgewogICAgICAgIGlmICghdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhLmluY2x1ZGVzKGN0cmwpKSB7CiAgICAgICAgICBjb3VudGVyID0gY291bnRlciArIDEKICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhjdHJsLCAnekluZGV4JywgY291bnRlcikKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgc2VuZEJhY2sgKCkgewogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBjb25zdCBoaWdoUHJvckNvbnRyb2w6IHN0cmluZ1tdID0gW10KICAgIGNvbnN0IGxvd1Byb3JDb250cm9sOiBzdHJpbmdbXSA9IFtdCiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmdldENvbnRhaW5lckxpc3QodGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhWzBdKVswXQogICAgY29uc3QgY29udGFpbmVyQ29udHJvbHMgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lcl0uY29udHJvbHMKICAgIGZvciAoY29uc3QgaW5kZXggaW4gY29udGFpbmVyQ29udHJvbHMpIHsKICAgICAgY29uc3QgY250cmxEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJDb250cm9sc1tpbmRleF1dCiAgICAgIGlmIChjbnRybERhdGEudHlwZSA9PT0gJ011bHRpUGFnZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdGcmFtZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdMaXN0Qm94JykgewogICAgICAgIGhpZ2hQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkKICAgICAgfSBlbHNlIHsKICAgICAgICBsb3dQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkKICAgICAgfQogICAgfQogICAgbG93UHJvckNvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICByZXR1cm4gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgIH0pCiAgICBsZXQgZ2V0TG93UHJvcEhpZ2hlc3RJbmRleDogc3RyaW5nID0gbG93UHJvckNvbnRyb2xbbG93UHJvckNvbnRyb2wubGVuZ3RoIC0gMV0KICAgIGhpZ2hQcm9yQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYV0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgfSkKICAgIGxldCBnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleCA9IGhpZ2hQcm9yQ29udHJvbFtoaWdoUHJvckNvbnRyb2wubGVuZ3RoIC0gMV0KICAgIGNvbnN0IGxvd1Nlcmllc0NvbnRyb2w6IHN0cmluZ1tdID0gW10KICAgIGNvbnN0IGhpZ2hTZXJpZXNDb250cm9sOiBzdHJpbmdbXSA9IFtdCiAgICBjb25zdCBnZXRTZWxDb250cm9sID0gWy4uLnRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIV0KICAgIGdldFNlbENvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgIH0pCiAgICBmb3IgKGNvbnN0IHNlbENvbnRyb2wgb2YgZ2V0U2VsQ29udHJvbCkgewogICAgICBpZiAobG93UHJvckNvbnRyb2wuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsKICAgICAgICBsb3dTZXJpZXNDb250cm9sLnB1c2goc2VsQ29udHJvbCkKICAgICAgfSBlbHNlIHsKICAgICAgICBoaWdoU2VyaWVzQ29udHJvbC5wdXNoKHNlbENvbnRyb2wpCiAgICAgIH0KICAgIH0KICAgIGNvbnN0IHNldExvd1Byb3BIaWdoSW5kZXggPSAoY29udHJvbDogc3RyaW5nKSA9PiB7CiAgICAgIGlmIChsb3dTZXJpZXNDb250cm9sLmxlbmd0aCA+IDAgJiYgbG93U2VyaWVzQ29udHJvbC5pbmNsdWRlcyhjb250cm9sKSkgewogICAgICAgIGxvd1Nlcmllc0NvbnRyb2wucG9wKCkKICAgICAgICBjb25zdCBJbmRleCA9IGxvd1Byb3JDb250cm9sLmZpbmRJbmRleCh2YWwgPT4gdXNlckRhdGFbZ2V0TG93UHJvcEhpZ2hlc3RJbmRleCFdLmV4dHJhRGF0YXMhLnpJbmRleCEgKyAxID09PSB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCkKICAgICAgICBnZXRMb3dQcm9wSGlnaGVzdEluZGV4ID0gSW5kZXggIT09IC0xID8gbG93UHJvckNvbnRyb2xbSW5kZXhdIDogJycKICAgICAgICBpZiAoSW5kZXggIT09IC0xKSB7CiAgICAgICAgICBzZXRMb3dQcm9wSGlnaEluZGV4KGdldExvd1Byb3BIaWdoZXN0SW5kZXgpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBzZXRMb3dQcm9wSGlnaEluZGV4KGdldExvd1Byb3BIaWdoZXN0SW5kZXgpCiAgICBpZiAobG93U2VyaWVzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgIGxvd1Nlcmllc0NvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgICB9KQogICAgICBsZXQgY291bnQgPSB1c2VyRGF0YVtnZXRMb3dQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBsb3dTZXJpZXNDb250cm9sKSB7CiAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGN0cmwsICd6SW5kZXgnLCBjb3VudCkKICAgICAgICBjb3VudCA9IGNvdW50ICsgMQogICAgICB9CiAgICAgIGxldCBjb3VudGVyID0gdXNlckRhdGFbbG93U2VyaWVzQ29udHJvbFtsb3dTZXJpZXNDb250cm9sLmxlbmd0aCAtIDFdXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgIGZvciAobGV0IGkgPSBsb3dQcm9yQ29udHJvbC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGlmICghdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhLmluY2x1ZGVzKGxvd1Byb3JDb250cm9sW2ldKSkgewogICAgICAgICAgY291bnRlciA9IGNvdW50ZXIgKyAxCiAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobG93UHJvckNvbnRyb2xbaV0sICd6SW5kZXgnLCBjb3VudGVyKQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGNvbnN0IHNldEhpZ2hQcm9wSGlnaEluZGV4ID0gKGNvbnRyb2w6IHN0cmluZykgPT4gewogICAgICBpZiAoaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoID4gMCAmJiBoaWdoU2VyaWVzQ29udHJvbC5pbmNsdWRlcyhjb250cm9sKSkgewogICAgICAgIGhpZ2hTZXJpZXNDb250cm9sLnNoaWZ0KCkKICAgICAgICBjb25zdCBJbmRleCA9IGhpZ2hQcm9yQ29udHJvbC5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW2dldEhpZ2hQcm9wSGlnaGVzdEluZGV4IV0uZXh0cmFEYXRhcyEuekluZGV4ISArIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4KQogICAgICAgIGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4ID0gSW5kZXggIT09IC0xID8gaGlnaFByb3JDb250cm9sW0luZGV4XSA6ICcnCiAgICAgICAgaWYgKEluZGV4ICE9PSAtMSkgewogICAgICAgICAgc2V0SGlnaFByb3BIaWdoSW5kZXgoZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXgpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBzZXRIaWdoUHJvcEhpZ2hJbmRleChnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleCkKICAgIGlmIChoaWdoU2VyaWVzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgIGhpZ2hTZXJpZXNDb250cm9sLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgICAgfSkKICAgICAgbGV0IGNvdW50ID0gdXNlckRhdGFbZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXhdLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgICAgZm9yIChjb25zdCBjdHJsIG9mIGhpZ2hTZXJpZXNDb250cm9sKSB7CiAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGN0cmwsICd6SW5kZXgnLCBjb3VudCkKICAgICAgICBjb3VudCA9IGNvdW50ICsgMQogICAgICB9CiAgICAgIGxldCBjb3VudGVyID0gdXNlckRhdGFbaGlnaFNlcmllc0NvbnRyb2xbaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoIC0gMV1dLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgICAgZm9yIChsZXQgaSA9IGhpZ2hQcm9yQ29udHJvbC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGlmICghdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhLmluY2x1ZGVzKGhpZ2hQcm9yQ29udHJvbFtpXSkpIHsKICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMQogICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGhpZ2hQcm9yQ29udHJvbFtpXSwgJ3pJbmRleCcsIGNvdW50ZXIpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIGdyb3VwQ29udHJvbCAoKSB7CiAgICBFdmVudEJ1cy4kZW1pdCgnZ3JvdXBDb250cm9sJywgJ2dyb3VwJykKICB9CiAgdW5Hcm91cENvbnRyb2wgKCkgewogICAgRXZlbnRCdXMuJGVtaXQoJ2dyb3VwQ29udHJvbCcsICd1bmdyb3VwJykKICB9CiAgc2l6ZVRvRml0ICgpIHsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBjb25zdCBjdHJsU2VsID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQKICAgIGNvbnN0IHNpemVUb0ZpdEFycjogc3RyaW5nW10gPSBbXQogICAgY29uc3Qgc2l6ZVRvRml0VmFsOiBib29sZWFuW10gPSBbXQogICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGN0cmxTZWwubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgIGNvbnN0IGNvbnRyb2xwcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllcwogICAgICAgIGlmICgnQXV0b1NpemUnIGluIGNvbnRyb2xwcm9wKSB7CiAgICAgICAgICBzaXplVG9GaXRBcnIucHVzaChjdHJsU2VsW2luZGV4XSkKICAgICAgICAgIHNpemVUb0ZpdFZhbC5wdXNoKGNvbnRyb2xwcm9wLkF1dG9TaXplISkKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdBdXRvU2l6ZScsIHRydWUsIGN0cmxTZWxbaW5kZXhdKQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzaXplVG9GaXRBcnIubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKCFzaXplVG9GaXRBcnJbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICAgIGNvbnN0IGNvbnRyb2xwcm9wID0gdXNyRnJtRGF0YVtzaXplVG9GaXRBcnJbaW5kZXhdXS5wcm9wZXJ0aWVzCiAgICAgICAgICBpZiAoJ0F1dG9TaXplJyBpbiBjb250cm9scHJvcCkgewogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgKICAgICAgICAgICAgICAnQXV0b1NpemUnLAogICAgICAgICAgICAgIHNpemVUb0ZpdFZhbFtpbmRleF0sCiAgICAgICAgICAgICAgc2l6ZVRvRml0QXJyW2luZGV4XQogICAgICAgICAgICApCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LCAxMDApCiAgfQogIHNpemVUb0dyaWQgKCkgewogICAgbGV0IGRpdnN0eWxlOiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXQogICAgY29uc3QgdXNyRnJtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0KICAgIGNvbnN0IGN0cmxTZWwgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZAogICAgbGV0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0KICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICBjb25zdCBjb250cm9scHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXMKICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgKICAgICAgICAgICdMZWZ0JywKICAgICAgICAgIE1hdGgudHJ1bmMoY29udHJvbHByb3AuTGVmdCEpLAogICAgICAgICAgY3RybFNlbFtpbmRleF0KICAgICAgICApCiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoCiAgICAgICAgICAnVG9wJywKICAgICAgICAgIE1hdGgudHJ1bmMoY29udHJvbHByb3AuVG9wISksCiAgICAgICAgICBjdHJsU2VsW2luZGV4XQogICAgICAgICkKICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgKICAgICAgICAgICdXaWR0aCcsCiAgICAgICAgICBNYXRoLnRydW5jKGNvbnRyb2xwcm9wLldpZHRoISksCiAgICAgICAgICBjdHJsU2VsW2luZGV4XQogICAgICAgICkKICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgKICAgICAgICAgICdIZWlnaHQnLAogICAgICAgICAgTWF0aC50cnVuYyhjb250cm9scHJvcC5IZWlnaHQhKSwKICAgICAgICAgIGN0cmxTZWxbaW5kZXhdCiAgICAgICAgKQogICAgICB9IGVsc2UgewogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCAoZGl2c3RheWxlQXJyYXk6IEFycmF5PElHcm91cFN0eWxlPikgPT4gewogICAgICAgICAgZGl2c3R5bGUgPSBkaXZzdGF5bGVBcnJheQogICAgICAgIH0pCiAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoCiAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XQogICAgICAgICkKICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsICdHcm91cElEJywgMCwgZ2V0SW5kZXgpCiAgICAgIH0KICAgIH0KICB9CiAgaW5jRGVjc3BhY2luZyAodHlwZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMsIHZhbHVlOiBudW1iZXIpIHsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBjb25zdCBjdHJsU2VsID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQKICAgIGNvbnN0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0KICAgIGNvbnN0IGNvbnRyb2xzID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9scwogICAgbGV0IGRpdnN0eWxlOiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXQogICAgbGV0IGdldEdyb3VwSW5kZXggPSAtMQogICAgaWYgKGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgKGRpdnN0YXlsZUFycmF5OiBBcnJheTxJR3JvdXBTdHlsZT4pID0+IHsKICAgICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5CiAgICAgIH0pCiAgICAgIGdldEdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFswXSkKICAgIH0KICAgIGNvbnN0IGxlZnRBcnJheTogc3RyaW5nW10gPSBbXQogICAgY29uc3QgcmlnaHRBcnJheTogc3RyaW5nW10gPSBbXQogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGN0cmxTZWwubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGNvbnN0IHNlbExlZnQgPSBjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykKICAgICAgICA/IHBhcnNlSW50KGRpdnN0eWxlW2dldEdyb3VwSW5kZXhdLmxlZnQhKQogICAgICAgIDogdXNyRnJtRGF0YVtjdHJsU2VsWzBdXS5wcm9wZXJ0aWVzLkxlZnQKICAgICAgY29uc3Qgc2VsVG9wID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpCiAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtnZXRHcm91cEluZGV4XS50b3AhKQogICAgICAgIDogdXNyRnJtRGF0YVtjdHJsU2VsWzBdXS5wcm9wZXJ0aWVzLlRvcAogICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXMKICAgICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgICAgICBpZiAoY3RybFByb3AuTGVmdCEgPD0gc2VsTGVmdCEpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICAgICAgaWYgKGN0cmxQcm9wLlRvcCEgPD0gc2VsVG9wISkgewogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2dldEdyb3VwU2l6ZScsIChkaXZzdGF5bGVBcnJheTogQXJyYXk8SUdyb3VwU3R5bGU+KSA9PiB7CiAgICAgICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5CiAgICAgICAgfSkKICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbaW5kZXhdCiAgICAgICAgKQogICAgICAgIGNvbnN0IGdyb3VwTGVmdCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS5sZWZ0ISkKICAgICAgICBjb25zdCBncm91cFRvcCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS50b3AhKQogICAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFtpbmRleF0pCiAgICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgICAgaWYgKGdyb3VwTGVmdCA8PSBzZWxMZWZ0ISkgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcwogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCEpID09PSBncm91cExlZnQpIHsKICAgICAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmwpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcwogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCEpID09PSBncm91cExlZnQpIHsKICAgICAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICAgIGlmIChncm91cFRvcCA8PSBzZWxUb3AhKSB7CiAgICAgICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsKICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3AhKSA9PT0gZ3JvdXBUb3ApIHsKICAgICAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmwpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcwogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuVG9wISkgPT09IGdyb3VwVG9wKSB7CiAgICAgICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmIChjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoCiAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFswXQogICAgICApCiAgICAgIGNvbnN0IGdyb3VwTGVmdCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS5sZWZ0ISkKICAgICAgY29uc3QgZ3JvdXBUb3AgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0udG9wISkKICAgICAgY29uc3QgZ3JvdXBDb25yb2wgPSB0aGlzLmdldEdyb3VwQ29udHJvbChjdHJsU2VsWzBdKQogICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcwogICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5MZWZ0ISkgPT09IGdyb3VwTGVmdCkgewogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzCiAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCEpID09PSBncm91cFRvcCkgewogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGxlZnRBcnJheS51bnNoaWZ0KGN0cmxTZWxbMF0pCiAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsU2VsWzBdKQogICAgfQogICAgY29uc29sZS5sb2cobGVmdEFycmF5LCAnJywgcmlnaHRBcnJheSkKICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgbGVmdEFycmF5LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLkxlZnQhIC0gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLkxlZnQhCiAgICAgIH0pCiAgICAgIHJpZ2h0QXJyYXkuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuTGVmdCEgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdCEKICAgICAgfSkKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgbGVmdEFycmF5LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcCEgLSB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wIQogICAgICB9KQogICAgICByaWdodEFycmF5LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLlRvcCEgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wIQogICAgICB9KQogICAgfQogICAgY29uc29sZS5sb2cobGVmdEFycmF5LCByaWdodEFycmF5KQogICAgY29uc3QgZ3JvdXBJbmRleDogbnVtYmVyID0gZGl2c3R5bGUuZmluZEluZGV4KAogICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsWzBdCiAgICApCiAgICBjb25zdCBpc0dyb3VwID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpCiAgICBjb25zdCBjdHJsUHJvcCA9ICFpc0dyb3VwICYmIHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcwogICAgY29uc3QgbmV3T2JqZWN0ID0gewogICAgICBMZWZ0OgogICAgICAgIGlzR3JvdXAgJiYgZ3JvdXBJbmRleCAhPT0gLTEKICAgICAgICAgID8gcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0ubGVmdCEpCiAgICAgICAgICA6IGN0cmxQcm9wCiAgICAgICAgICAgID8gY3RybFByb3AuTGVmdCEKICAgICAgICAgICAgOiAwLAogICAgICBUb3A6CiAgICAgICAgaXNHcm91cCAmJiBncm91cEluZGV4ICE9PSAtMQogICAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS50b3AhKQogICAgICAgICAgOiBjdHJsUHJvcAogICAgICAgICAgICA/IGN0cmxQcm9wLlRvcCEKICAgICAgICAgICAgOiAwLAogICAgICBXaWR0aDoKICAgICAgICBpc0dyb3VwICYmIGdyb3VwSW5kZXggIT09IC0xCiAgICAgICAgICA/IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLndpZHRoISkKICAgICAgICAgIDogY3RybFByb3AKICAgICAgICAgICAgPyBjdHJsUHJvcC5XaWR0aCEKICAgICAgICAgICAgOiAwLAogICAgICBIZWlnaHQ6CiAgICAgICAgaXNHcm91cCAmJiBncm91cEluZGV4ICE9PSAtMQogICAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS5oZWlnaHQhKQogICAgICAgICAgOiBjdHJsUHJvcAogICAgICAgICAgICA/IGN0cmxQcm9wLkhlaWdodCEKICAgICAgICAgICAgOiAwCiAgICB9CiAgICBsZXQgaW5jRGVjVmFsdWUgPSAwCiAgICBsZXQgcHJvcFZhbHVlID0gMAogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGxlZnRBcnJheS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW2xlZnRBcnJheVtpbmRleF1dLnByb3BlcnRpZXMKICAgICAgbGV0IHByZXZJbmRleCA9IC0xCiAgICAgIGxldCBjb250cm9sUHJvcEluZGV4ID0gLTEKICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEID09PSAnJykgewogICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWUKICAgICAgICAgIGluY0RlY1ZhbHVlID0gY3RybFByb3AuTGVmdCEgLSBwcm9wVmFsdWUKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KHR5cGUsIE1hdGgucm91bmQoaW5jRGVjVmFsdWUgLyAxMCkgKiAxMCwgbGVmdEFycmF5W2luZGV4XSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIGNvbnRyb2xQcm9wSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFByb3AuR3JvdXBJRCkKICAgICAgICAgICAgbGV0IGluY0RlY1ZhbHVlID0gMAogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZQogICAgICAgICAgICBpbmNEZWNWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW2NvbnRyb2xQcm9wSW5kZXhdLmxlZnQhKSAtIHByb3BWYWx1ZQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgKICAgICAgICAgICAgICAndXBkYXN0ZUdyb3VwU2l6ZScsCiAgICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgICBNYXRoLnJvdW5kKGluY0RlY1ZhbHVlIC8gMTApICogMTAsCiAgICAgICAgICAgICAgY29udHJvbFByb3BJbmRleAogICAgICAgICAgICApCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7CiAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZQogICAgICAgICAgaW5jRGVjVmFsdWUgPSBjdHJsUHJvcC5Ub3AhIC0gcHJvcFZhbHVlCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBNYXRoLnJvdW5kKGluY0RlY1ZhbHVlIC8gMTApICogMTAsIGxlZnRBcnJheVtpbmRleF0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBjb250cm9sUHJvcEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KCh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQpCiAgICAgICAgICAgIGxldCBpbmNEZWNWYWx1ZSA9IDAKICAgICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWUKICAgICAgICAgICAgaW5jRGVjVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS50b3AhKSAtIHByb3BWYWx1ZQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgKICAgICAgICAgICAgICAndXBkYXN0ZUdyb3VwU2l6ZScsCiAgICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgICBNYXRoLnJvdW5kKGluY0RlY1ZhbHVlIC8gMTApICogMTAsCiAgICAgICAgICAgICAgY29udHJvbFByb3BJbmRleAogICAgICAgICAgICApCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBwcm9wVmFsdWUgPSAwCiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgcmlnaHRBcnJheS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW3JpZ2h0QXJyYXlbaW5kZXhdXS5wcm9wZXJ0aWVzCiAgICAgIGxldCBwcmV2SW5kZXggPSAtMQogICAgICBsZXQgY29udHJvbFByb3BJbmRleCA9IC0xCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IHByb3BWYWx1ZSArIHZhbHVlCiAgICAgICAgICBpbmNEZWNWYWx1ZSA9IGN0cmxQcm9wLkxlZnQhICsgcHJvcFZhbHVlCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBNYXRoLnJvdW5kKGluY0RlY1ZhbHVlIC8gMTApICogMTAsIHJpZ2h0QXJyYXlbaW5kZXhdKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgY29udHJvbFByb3BJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEKQogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZQogICAgICAgICAgICBpbmNEZWNWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW2NvbnRyb2xQcm9wSW5kZXhdLmxlZnQhKSArIHByb3BWYWx1ZQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgKICAgICAgICAgICAgICAndXBkYXN0ZUdyb3VwU2l6ZScsCiAgICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgICBNYXRoLnJvdW5kKGluY0RlY1ZhbHVlIC8gMTApICogMTAsCiAgICAgICAgICAgICAgY29udHJvbFByb3BJbmRleAogICAgICAgICAgICApCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7CiAgICAgICAgICBsZXQgaW5jRGVjVmFsdWUgPSAwCiAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZQogICAgICAgICAgaW5jRGVjVmFsdWUgPSBjdHJsUHJvcC5Ub3AhICsgcHJvcFZhbHVlCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBNYXRoLnJvdW5kKGluY0RlY1ZhbHVlIC8gMTApICogMTAsIHJpZ2h0QXJyYXlbaW5kZXhdKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgY29udHJvbFByb3BJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEKQogICAgICAgICAgICBsZXQgaW5jRGVjVmFsdWUgPSAwCiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByb3BWYWx1ZSArIHZhbHVlCiAgICAgICAgICAgIGluY0RlY1ZhbHVlID0gcGFyc2VJbnQoZGl2c3R5bGVbY29udHJvbFByb3BJbmRleF0udG9wISkgKyBwcm9wVmFsdWUKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoCiAgICAgICAgICAgICAgJ3VwZGFzdGVHcm91cFNpemUnLAogICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgTWF0aC5yb3VuZChpbmNEZWNWYWx1ZSAvIDEwKSAqIDEwLAogICAgICAgICAgICAgIGNvbnRyb2xQcm9wSW5kZXgKICAgICAgICAgICAgKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBnZXRHcm91cENvbnRyb2wgKGdyb3VwTmFtZTogc3RyaW5nKSB7CiAgICBjb25zdCBjdHJsQ29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdCiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQogICAgY29uc3QgY29udHJvbHMgPSBbXQogICAgZm9yIChjb25zdCBjb250cm9sIG9mIHVzckZybURhdGFbY3RybENvbnRhaW5lcl0uY29udHJvbHMpIHsKICAgICAgaWYgKHVzckZybURhdGFbY29udHJvbF0ucHJvcGVydGllcy5Hcm91cElEID09PSBncm91cE5hbWUpIHsKICAgICAgICBjb250cm9scy5wdXNoKGNvbnRyb2wpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBjb250cm9scwogIH0KICByZW1vdmVTcGFjZSAodHlwZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMpIHsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBjb25zdCBjdHJsU2VsID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQKICAgIGNvbnN0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0KICAgIGNvbnN0IGNvbnRyb2xzID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9scwogICAgbGV0IGRpdnN0eWxlOiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXQogICAgbGV0IGdldEdyb3VwSW5kZXggPSAtMQogICAgaWYgKGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgKGRpdnN0YXlsZUFycmF5OiBBcnJheTxJR3JvdXBTdHlsZT4pID0+IHsKICAgICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5CiAgICAgIH0pCiAgICAgIGdldEdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFswXSkKICAgIH0KICAgIGxldCBwcm9wVmFsdWUgPSAwCiAgICBjb25zdCBsZWZ0QXJyYXk6IHN0cmluZ1tdID0gW10KICAgIGNvbnN0IHJpZ2h0QXJyYXk6IHN0cmluZ1tdID0gW10KICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBzZWxMZWZ0ID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpCiAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtnZXRHcm91cEluZGV4XS5sZWZ0ISkKICAgICAgICA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5MZWZ0CiAgICAgIGNvbnN0IHNlbFRvcCA9IGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKQogICAgICAgID8gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0R3JvdXBJbmRleF0udG9wISkKICAgICAgICA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5Ub3AKICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW2N0cmxTZWxbaW5kZXhdXS5wcm9wZXJ0aWVzCiAgICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgICAgaWYgKGN0cmxQcm9wLkxlZnQhIDw9IHNlbExlZnQhKSB7CiAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5Ub3AhIDw9IHNlbFRvcCEpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCAoZGl2c3RheWxlQXJyYXk6IEFycmF5PElHcm91cFN0eWxlPikgPT4gewogICAgICAgICAgZGl2c3R5bGUgPSBkaXZzdGF5bGVBcnJheQogICAgICAgIH0pCiAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoCiAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XQogICAgICAgICkKICAgICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCEpCiAgICAgICAgY29uc3QgZ3JvdXBUb3AgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0udG9wISkKICAgICAgICBjb25zdCBncm91cENvbnJvbCA9IHRoaXMuZ2V0R3JvdXBDb250cm9sKGN0cmxTZWxbaW5kZXhdKQogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICAgIGlmIChncm91cExlZnQgPD0gc2VsTGVmdCEpIHsKICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLkxlZnQhKSA9PT0gZ3JvdXBMZWZ0KSB7CiAgICAgICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLkxlZnQhKSA9PT0gZ3JvdXBMZWZ0KSB7CiAgICAgICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgICBpZiAoZ3JvdXBUb3AgPD0gc2VsVG9wISkgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcwogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuVG9wISkgPT09IGdyb3VwVG9wKSB7CiAgICAgICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCEpID09PSBncm91cFRvcCkgewogICAgICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgIGNvbnN0IGdldEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KAogICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0KICAgICAgKQogICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCEpCiAgICAgIGNvbnN0IGdyb3VwVG9wID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLnRvcCEpCiAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFswXSkKICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsKICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMKICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCEpID09PSBncm91cExlZnQpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCkKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcwogICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3AhKSA9PT0gZ3JvdXBUb3ApIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCkKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBsZWZ0QXJyYXkudW5zaGlmdChjdHJsU2VsWzBdKQogICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFswXSkKICAgIH0KICAgIGNvbnNvbGUubG9nKGxlZnRBcnJheSwgJycsIHJpZ2h0QXJyYXkpCiAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5MZWZ0ISAtIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0IQogICAgICB9KQogICAgICByaWdodEFycmF5LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLkxlZnQhIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLkxlZnQhCiAgICAgIH0pCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5Ub3AhIC0gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLlRvcCEKICAgICAgfSkKICAgICAgcmlnaHRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5Ub3AhIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcCEKICAgICAgfSkKICAgIH0KICAgIGNvbnNvbGUubG9nKGxlZnRBcnJheSwgcmlnaHRBcnJheSkKICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBsZWZ0QXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGNvbnN0IHByZXZDdHJsUHJvcCA9IHVzckZybURhdGFbbGVmdEFycmF5W2luZGV4IC0gMV1dLnByb3BlcnRpZXMKICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW2xlZnRBcnJheVtpbmRleF1dLnByb3BlcnRpZXMKICAgICAgbGV0IHByZXZJbmRleCA9IC0xCiAgICAgIGxldCBjb250cm9sUHJvcEluZGV4ID0gLTEKICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycgJiYgY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ISAtIGN0cmxQcm9wLldpZHRoIQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBsZWZ0QXJyYXlbaW5kZXhdKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEID09PSAnJykgewogICAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0ubGVmdCEpIC0gY3RybFByb3AuV2lkdGghCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBsZWZ0QXJyYXlbaW5kZXhdKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgY29udHJvbFByb3BJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICkKICAgICAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEID09PSAnJykgewogICAgICAgICAgICAgIHByb3BWYWx1ZSA9CiAgICAgICAgICAgICAgICBwcmV2Q3RybFByb3AuTGVmdCEgLQogICAgICAgICAgICAgICAgcGFyc2VJbnQoZGl2c3R5bGVbY29udHJvbFByb3BJbmRleF0ud2lkdGghKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHByb3BWYWx1ZSA9CiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLmxlZnQhKSAtCiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS53aWR0aCEpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoCiAgICAgICAgICAgICAgJ3VwZGFzdGVHcm91cFNpemUnLAogICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgcHJvcFZhbHVlLAogICAgICAgICAgICAgIGNvbnRyb2xQcm9wSW5kZXgKICAgICAgICAgICAgKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycgJiYgY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5Ub3AhIC0gY3RybFByb3AuSGVpZ2h0IQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBsZWZ0QXJyYXlbaW5kZXhdKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEID09PSAnJykgewogICAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0udG9wISkgLSBjdHJsUHJvcC5IZWlnaHQhCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBsZWZ0QXJyYXlbaW5kZXhdKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgY29udHJvbFByb3BJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICkKICAgICAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEID09PSAnJykgewogICAgICAgICAgICAgIHByb3BWYWx1ZSA9CiAgICAgICAgICAgICAgICBwcmV2Q3RybFByb3AuVG9wISAtCiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS5oZWlnaHQhKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHByb3BWYWx1ZSA9CiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLnRvcCEpIC0KICAgICAgICAgICAgICAgIHBhcnNlSW50KGRpdnN0eWxlW2NvbnRyb2xQcm9wSW5kZXhdLmhlaWdodCEpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoCiAgICAgICAgICAgICAgJ3VwZGFzdGVHcm91cFNpemUnLAogICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgcHJvcFZhbHVlLAogICAgICAgICAgICAgIGNvbnRyb2xQcm9wSW5kZXgKICAgICAgICAgICAgKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IHJpZ2h0QXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGNvbnN0IHByZXZDdHJsUHJvcCA9IHVzckZybURhdGFbcmlnaHRBcnJheVtpbmRleCAtIDFdXS5wcm9wZXJ0aWVzCiAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtyaWdodEFycmF5W2luZGV4XV0ucHJvcGVydGllcwogICAgICBsZXQgcHJldkluZGV4ID0gLTEKICAgICAgY29uc3QgY29udHJvbFByb3BJbmRleCA9IC0xCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgPT09ICcnICYmIGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7CiAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuTGVmdCEgKyBwcmV2Q3RybFByb3AuV2lkdGghCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIHJpZ2h0QXJyYXlbaW5kZXhdKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgKICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBwcmV2Q3RybFByb3AuR3JvdXBJRAogICAgICAgICAgICApCiAgICAgICAgICAgIHByb3BWYWx1ZSA9CiAgICAgICAgICAgICAgcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS5sZWZ0ISkgKwogICAgICAgICAgICAgIHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0ud2lkdGghKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHJvcFZhbHVlID0gcHJldkN0cmxQcm9wLkxlZnQhICsgcHJldkN0cmxQcm9wLldpZHRoIQogICAgICAgICAgfQogICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIGNvbnN0IGdldEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KAogICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQKICAgICAgICAgICAgKQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsIHR5cGUsIHByb3BWYWx1ZSwgZ2V0SW5kZXgpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIHJpZ2h0QXJyYXlbaW5kZXhdKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycgJiYgY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5Ub3AhICsgcHJldkN0cmxQcm9wLkhlaWdodCEKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KHR5cGUsIHByb3BWYWx1ZSwgcmlnaHRBcnJheVtpbmRleF0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgcHJldkluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KAogICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElECiAgICAgICAgICAgICkKICAgICAgICAgICAgcHJvcFZhbHVlID0KICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLnRvcCEpICsKICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLmhlaWdodCEpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wISArIHByZXZDdHJsUHJvcC5IZWlnaHQhCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoCiAgICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFByb3AuR3JvdXBJRAogICAgICAgICAgICApCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgdHlwZSwgcHJvcFZhbHVlLCBnZXRJbmRleCkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KHR5cGUsIHByb3BWYWx1ZSwgcmlnaHRBcnJheVtpbmRleF0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIHVwZGF0ZVByb3BWYWwgKHByb3BOYW1lOiBzdHJpbmcsIHByb3BWYWx1ZTogbnVtYmVyKSB7CiAgICBjb25zdCBjdHJsU2VsID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgY29uc3QgY3VyUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXMKICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxDZW50ZXInKSB7CiAgICAgICAgICBjb25zdCBjdXJDZW50ZXIgPSBjdXJQcm9wLldpZHRoISAvIDIKICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcFZhbHVlIC0gY3VyQ2VudGVyCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSkKICAgICAgICB9CiAgICAgICAgaWYgKHByb3BOYW1lID09PSAnc2VsTWlkZGxlJykgewogICAgICAgICAgY29uc3QgY3VyTWlkZGxlID0gY3VyUHJvcC5IZWlnaHQhIC8gMgogICAgICAgICAgY29uc3QgdmFsdWUgPSBwcm9wVmFsdWUgLSBjdXJNaWRkbGUKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCB2YWx1ZSwgY3RybFNlbFtpbmRleF0pCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGxldCBkaXZzdHlsZTogQXJyYXk8SUdyb3VwU3R5bGU+ID0gW10KICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgKGRpdnN0YXlsZUFycmF5OiBBcnJheTxJR3JvdXBTdHlsZT4pID0+IHsKICAgICAgICAgIGRpdnN0eWxlID0gZGl2c3RheWxlQXJyYXkKICAgICAgICB9KQogICAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoCiAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XQogICAgICAgICkKICAgICAgICBjb25zdCBjdXJQcm9wID0gZGl2c3R5bGVbZ3JvdXBJbmRleF0KICAgICAgICBjb25zdCBsZWZ0ID0gcGFyc2VJbnQoY3VyUHJvcC5sZWZ0ISkKICAgICAgICBjb25zdCB0b3AgPSBwYXJzZUludChjdXJQcm9wLnRvcCEpCiAgICAgICAgY29uc3Qgd2lkdGggPSBwYXJzZUludChjdXJQcm9wLndpZHRoISkKICAgICAgICBjb25zdCBoZWlnaHQgPSBwYXJzZUludChjdXJQcm9wLmhlaWdodCEpCiAgICAgICAgbGV0IHZhbHVlID0gLTEKICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxDZW50ZXInKSB7CiAgICAgICAgICB2YWx1ZSA9IHByb3BWYWx1ZSAtIHdpZHRoISAvIDIKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgJ0xlZnQnLCB2YWx1ZSwgZ3JvdXBJbmRleCkKICAgICAgICB9CiAgICAgICAgaWYgKHByb3BOYW1lID09PSAnc2VsTWlkZGxlJykgewogICAgICAgICAgdmFsdWUgPSBwcm9wVmFsdWUgLSBoZWlnaHQhIC8gMgogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCAnVG9wJywgdmFsdWUsIGdyb3VwSW5kZXgpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIGNlbnRyZUluRm9ybSAodmFsdWU6IHN0cmluZykgewogICAgbGV0IGRpdnN0eWxlOiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXQogICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQogICAgY29uc3QgdXNyRnJtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0KICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVttYWluQ29udGFpbmVyXS5wcm9wZXJ0aWVzCiAgICBpZiAodmFsdWUgPT09ICdob3Jpem9udGFsJykgewogICAgICBjb25zdCBzZWxDZW50ZXIgPSBjdHJsUHJvcC5MZWZ0ISArIGN0cmxQcm9wLldpZHRoISAvIDIKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdzZWxDZW50ZXInLCBzZWxDZW50ZXIpCiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAndmVydGljYWwnKSB7CiAgICAgIGNvbnN0IHNlbE1pZGRsZSA9IGN0cmxQcm9wLlRvcCEgKyBjdHJsUHJvcC5IZWlnaHQhIC8gMgogICAgICB0aGlzLnVwZGF0ZVByb3BWYWwoJ3NlbE1pZGRsZScsIHNlbE1pZGRsZSkKICAgIH0KICB9CiAgYXJyYW5nZUJ1dHRvbiAodHlwZTogc3RyaW5nKSB7CiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkCiAgICBsZXQgY3RybENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQogICAgY3RybENvbnRhaW5lciA9CiAgICAgIHVzckZybURhdGFbY3RybENvbnRhaW5lcl0udHlwZSA9PT0gJ1BhZ2UnCiAgICAgICAgPyB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMV0KICAgICAgICA6IGN0cmxDb250YWluZXIKICAgIGNvbnN0IGJ1dHRvbkFycmF5ID0gW10KICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICBjb25zdCBjb250cm9scHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dCiAgICAgICAgaWYgKGNvbnRyb2xwcm9wLnR5cGUgPT09ICdDb21tYW5kQnV0dG9uJykgewogICAgICAgICAgYnV0dG9uQXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlID09PSAnYm90dG9tJykgewogICAgICBidXR0b25BcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0ISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5MZWZ0IQogICAgICB9KQogICAgfSBlbHNlIGlmICh0eXBlID09PSAncmlnaHQnKSB7CiAgICAgIGJ1dHRvbkFycmF5LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLlRvcCEgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wIQogICAgICB9KQogICAgfQogICAgY29uc29sZS5sb2coYnV0dG9uQXJyYXkpCiAgICBjb25zdCBjb250YWluZXJQcm9wID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5wcm9wZXJ0aWVzCiAgICBsZXQgdmFsdWU6IG51bWJlciA9IDAKICAgIGNvbnN0IGNvbnRhaW5lckhlaWdodCA9ICh1c3JGcm1EYXRhW2N0cmxDb250YWluZXJdLnR5cGUgPT09ICdVc2VyZm9ybScpCiAgICAgID8gNDcgOiB1c3JGcm1EYXRhW2N0cmxDb250YWluZXJdLnR5cGUgPT09ICdGcmFtZScgPyAyNwogICAgICAgIDogdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS50eXBlID09PSAnTXVsdGlQYWdlJyA/IDQwIDogMAogICAgY29uc3QgY29udGFpbmVyV2lkdGggPSAyMAogICAgaWYgKHR5cGUgPT09ICdib3R0b20nKSB7CiAgICAgIHZhbHVlID0gKGNvbnRhaW5lclByb3AuSGVpZ2h0ISAtIGNvbnRhaW5lckhlaWdodCkgLSB1c3JGcm1EYXRhW2J1dHRvbkFycmF5WzBdXS5wcm9wZXJ0aWVzLkhlaWdodCEKICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHZhbHVlLCBidXR0b25BcnJheVswXSkKICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0xlZnQnLCAzMCwgYnV0dG9uQXJyYXlbMF0pCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyaWdodCcpIHsKICAgICAgdmFsdWUgPSAoY29udGFpbmVyUHJvcC5XaWR0aCEgLSBjb250YWluZXJXaWR0aCkgLSB1c3JGcm1EYXRhW2J1dHRvbkFycmF5WzBdXS5wcm9wZXJ0aWVzLldpZHRoIQogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHZhbHVlLCBidXR0b25BcnJheVswXSkKICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIDIwLCBidXR0b25BcnJheVswXSkKICAgIH0KCiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgYnV0dG9uQXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGNvbnN0IHByZXZDdHJsUHJvcCA9IHVzckZybURhdGFbYnV0dG9uQXJyYXlbaW5kZXggLSAxXV0ucHJvcGVydGllcwogICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbYnV0dG9uQXJyYXlbaW5kZXhdXS5wcm9wZXJ0aWVzCiAgICAgIGlmICh0eXBlID09PSAnYm90dG9tJykgewogICAgICAgIGxldCBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuTGVmdCEgKyBwcmV2Q3RybFByb3AuV2lkdGghICsgMTAKICAgICAgICB2YWx1ZSA9CiAgICAgICAgICAoY29udGFpbmVyUHJvcC5IZWlnaHQhIC0gY29udGFpbmVySGVpZ2h0KSAtCiAgICAgICAgICB1c3JGcm1EYXRhW2J1dHRvbkFycmF5W2luZGV4XV0ucHJvcGVydGllcy5IZWlnaHQhCiAgICAgICAgaWYgKHByb3BWYWx1ZSArIGN0cmxQcm9wLldpZHRoISA8PSBjb250YWluZXJQcm9wLldpZHRoISAtIGNvbnRhaW5lcldpZHRoKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHByb3BWYWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHZhbHVlLCBidXR0b25BcnJheVtpbmRleF0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IGNvbnRhaW5lclByb3AuV2lkdGghIC0gY29udGFpbmVyV2lkdGggLSBjdHJsUHJvcC5XaWR0aCEKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdMZWZ0JywgcHJvcFZhbHVlLCBidXR0b25BcnJheVtpbmRleF0pCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVG9wJywgdmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3JpZ2h0JykgewogICAgICAgIGxldCBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wISArIHByZXZDdHJsUHJvcC5IZWlnaHQhICsgMTAKICAgICAgICB2YWx1ZSA9CiAgICAgICAgICAoY29udGFpbmVyUHJvcC5XaWR0aCEgLSBjb250YWluZXJXaWR0aCkgLQogICAgICAgICAgdXNyRnJtRGF0YVtidXR0b25BcnJheVtpbmRleF1dLnByb3BlcnRpZXMuV2lkdGghCiAgICAgICAgaWYgKHByb3BWYWx1ZSArIGN0cmxQcm9wLkhlaWdodCEgPD0gY29udGFpbmVyUHJvcC5IZWlnaHQhIC0gKGNvbnRhaW5lckhlaWdodCkpIHsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCBwcm9wVmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdMZWZ0JywgdmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcHJvcFZhbHVlID0gY29udGFpbmVyUHJvcC5IZWlnaHQhIC0gY29udGFpbmVySGVpZ2h0IC0gY3RybFByb3AuSGVpZ2h0IQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHByb3BWYWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0xlZnQnLCB2YWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICB1cGRhdGVDb250cm9sUHJvcGVydHkgKAogICAgcHJvcGVydHlOYW1lOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywKICAgIHByb3BlcnR5VmFsdWU6IGFueSwKICAgIGNvbnRyb2xJZDogc3RyaW5nCiAgKSB7CiAgICB0aGlzLnVwZGF0ZUNvbnRyb2woewogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgIGNvbnRyb2xJZDogY29udHJvbElkLAogICAgICBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSwKICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUKICAgIH0pCiAgfQogIGdldGRpc2FibGVTdHlsZSAoaWQ6IHN0cmluZykgewogICAgbGV0IGRpc2FibGVkOiBib29sZWFuID0gdHJ1ZQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZAogICAgY29uc3Qgc2VsQ29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyCiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0KICAgIGlmIChpZCA9PT0gJ3VuR3JvdXAnKSB7CiAgICAgIGxldCBncm91cElkOiBib29sZWFuID0gZmFsc2UKICAgICAgY29uc3Qgc2VsZWN0ZWRHcm91cEFycmF5ID0gc2VsZWN0ZWQuZmlsdGVyKAogICAgICAgICh2YWw6IHN0cmluZykgPT4gdmFsLnN0YXJ0c1dpdGgoJ2dyb3VwJykgJiYgdmFsCiAgICAgICkKICAgICAgaWYgKHNlbGVjdGVkR3JvdXBBcnJheS5sZW5ndGggPT09IDEgJiYgc2VsZWN0ZWQubGVuZ3RoID09PSAxKSB7CiAgICAgICAgZGlzYWJsZWQgPSBmYWxzZQogICAgICB9CiAgICB9CiAgICBpZiAoaWQgPT09ICdncm91cCcpIHsKICAgICAgZGlzYWJsZWQgPSBzZWxlY3RlZC5sZW5ndGggPD0gMQogICAgfQogICAgaWYgKGlkID09PSAnc2l6ZVRvR3JpZCcgfHwgaWQgPT09ICdjZW50cmVJbkZvcm0nKSB7CiAgICAgIGRpc2FibGVkID0gIShzZWxlY3RlZC5sZW5ndGggPj0gMSAmJiBzZWxlY3RlZFswXSAhPT0gc2VsQ29udGFpbmVyWzBdKQogICAgfQogICAgaWYgKGlkID09PSAnc2l6ZVRvRml0JykgewogICAgICBjb25zdCBzZWxTZWxlY3RlZCA9IFtdCiAgICAgIGZvciAoY29uc3QgY29udHJvbCBvZiB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZCkgewogICAgICAgIGlmICghY29udHJvbC5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgICBjb25zdCB0eXBlID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250cm9sXS50eXBlCiAgICAgICAgICBpZiAodHlwZSAhPT0gJ011bHRpUGFnZScgJiYgdHlwZSAhPT0gJ0ZyYW1lJyAmJiB0eXBlICE9PSAnTGlzdEJveCcgJiYgdHlwZSAhPT0gJ1BhZ2UnICYmIHR5cGUgIT09ICdUYWJTdHJpcCcgJiYgdHlwZSAhPT0gJ1VzZXJmb3JtJykgewogICAgICAgICAgICBzZWxTZWxlY3RlZC5wdXNoKGNvbnRyb2wpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGRpc2FibGVkID0gIShzZWxTZWxlY3RlZC5sZW5ndGggPj0gMSkKICAgIH0KICAgIGlmIChpZCA9PT0gJ29yZGVyJykgewogICAgICBkaXNhYmxlZCA9ICEoc2VsZWN0ZWQubGVuZ3RoID49IDEgJiYgdXNlckRhdGFbc2VsQ29udGFpbmVyWzBdXS5jb250cm9scy5sZW5ndGggPj0gMikKICAgIH0KICAgIGlmIChpZCA9PT0gJ21ha2VFcXVhbCcpIHsKICAgICAgZGlzYWJsZWQgPSAhKHNlbGVjdGVkLmxlbmd0aCA+PSAzKQogICAgfQogICAgaWYgKGlkID09PSAnaW5jRGVjc3BhY2luZycgfHwgaWQgPT09ICdyZW1vdmVTcGFjZScpIHsKICAgICAgZGlzYWJsZWQgPSAhKHNlbGVjdGVkLmxlbmd0aCA+PSAyKQogICAgfQogICAgaWYgKGlkID09PSAnYXJyYW5nZUJ1dHRvbicpIHsKICAgICAgY29uc3QgYnV0dG9uQXJyYXkgPSBbXQogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2VsZWN0ZWQubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKCFzZWxlY3RlZFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgICAgY29uc3QgY29udHJvbHByb3AgPSB1c2VyRGF0YVtzZWxlY3RlZFtpbmRleF1dCiAgICAgICAgICBpZiAoY29udHJvbHByb3AudHlwZSA9PT0gJ0NvbW1hbmRCdXR0b24nKSB7CiAgICAgICAgICAgIGJ1dHRvbkFycmF5LnB1c2goc2VsZWN0ZWRbaW5kZXhdKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBkaXNhYmxlZCA9ICEoYnV0dG9uQXJyYXkubGVuZ3RoID49IDEpCiAgICB9CiAgICByZXR1cm4gZGlzYWJsZWQKICB9CiAgYnJpbmdGb3J3YXJkICgpIHsKICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQogICAgY29uc3QgaGlnaFByb3JDb250cm9sID0gW10KICAgIGNvbnN0IGxvd1Byb3JDb250cm9sID0gW10KICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFbMF0pWzBdCiAgICBjb25zdCBjb250YWluZXJDb250cm9scyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9scwogICAgZm9yIChjb25zdCBpbmRleCBpbiBjb250YWluZXJDb250cm9scykgewogICAgICBjb25zdCBjbnRybERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lckNvbnRyb2xzW2luZGV4XV0KICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnTXVsdGlQYWdlJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0ZyYW1lJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0xpc3RCb3gnKSB7CiAgICAgICAgaGlnaFByb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKQogICAgICB9IGVsc2UgewogICAgICAgIGxvd1Byb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKQogICAgICB9CiAgICB9CiAgICBsZXQgbmV4dFNlbGN0ZWRTZXJpZXM6IHN0cmluZ1tdID0gW10KICAgIGxldCBuZXh0SGlnaENvbnRyb2xTZXJpZXM6IHN0cmluZ1tdID0gW10KICAgIGNvbnN0IGdldFNlbENvbnRyb2wgPSBbLi4udGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhXQogICAgZ2V0U2VsQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgfSkKICAgIGZvciAoY29uc3Qgc2VsQ29udHJvbCBvZiBnZXRTZWxDb250cm9sISkgewogICAgICBjb25zdCB0eXBlID0gdXNlckRhdGFbc2VsQ29udHJvbF0udHlwZQogICAgICBjb25zdCB0ZW1wWkluZGV4ID0gdXNlckRhdGFbc2VsQ29udHJvbF0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgICBjb25zdCBjb250cm9sSW5kZXggPSBPYmplY3Qua2V5cyh1c2VyRGF0YSkuZmluZEluZGV4KCh2YWw6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4gewogICAgICAgIHJldHVybiAnekluZGV4JyBpbiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhICYmICh1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gdGVtcFpJbmRleCArIDEpCiAgICAgIH0pCiAgICAgIGNvbnN0IG5leHRTZWxlY3RlZENvbnRyb2wgPSBjb250cm9sSW5kZXggIT09IC0xID8gT2JqZWN0LmtleXModXNlckRhdGEpW2NvbnRyb2xJbmRleF0gOiAnJwogICAgICBjb25zdCBuZXh0Q29udHJvbFR5cGUgPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS50eXBlCiAgICAgIGlmIChuZXh0U2VsZWN0ZWRDb250cm9sICE9PSAnJyAmJiAhaGlnaFByb3JDb250cm9sLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgaWYgKGdldFNlbENvbnRyb2whLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgICBpZiAoIW5leHRTZWxjdGVkU2VyaWVzLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzLnB1c2goc2VsQ29udHJvbCkKICAgICAgICAgIH0KICAgICAgICAgIGlmICghbmV4dFNlbGN0ZWRTZXJpZXMuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsKICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMucHVzaChuZXh0U2VsZWN0ZWRDb250cm9sKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV4dFNlbGN0ZWRTZXJpZXMpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbMF1dLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoIC8qICYmIHN3YXBUYWJJbmRleCA+IDAgKi8pIHsKICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KAogICAgICAgICAgICAgICAgKHZhbCkgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHN3YXBUYWJJbmRleAogICAgICAgICAgICAgICkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXModXNlckRhdGFbY29udGFpbmVyXS5jb250cm9sc1tpbmRleF0sICd6SW5kZXgnLCB0ZW1wRXhjaGFnZUluZGV4KQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsY3RlZFNlcmllc1swXSwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCAtIChuZXh0U2VsY3RlZFNlcmllcyEubGVuZ3RoIC0gMSkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0U2VsY3RlZFNlcmllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbal1dLmV4dHJhRGF0YXMhLnpJbmRleCEgKyAxCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxjdGVkU2VyaWVzW2pdLCAnekluZGV4JywgdXBkYXRlSW5kZXgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMgPSBbXQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoIC8qICYmIHN3YXBUYWJJbmRleCA+IDAgKi8pIHsKICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KAogICAgICAgICAgICAgICAgKHZhbCkgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHN3YXBUYWJJbmRleAogICAgICAgICAgICAgICkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoc2VsQ29udHJvbCwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGVjdGVkQ29udHJvbCwgJ3pJbmRleCcsIHRlbXBaSW5kZXgpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGdldFNlbENvbnRyb2whLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpICYmICh0eXBlID09PSAnRnJhbWUnIHx8IHR5cGUgPT09ICdNdWx0aVBhZ2UnIHx8IHR5cGUgPT09ICdMaXN0Qm94JykpIHsKICAgICAgICAgIGlmICghbmV4dEhpZ2hDb250cm9sU2VyaWVzLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcy5wdXNoKHNlbENvbnRyb2wpCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIW5leHRIaWdoQ29udHJvbFNlcmllcy5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgICAgICBuZXh0SGlnaENvbnRyb2xTZXJpZXMucHVzaChuZXh0U2VsZWN0ZWRDb250cm9sKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ0ZyYW1lJyB8fCB0eXBlID09PSAnTXVsdGlQYWdlJyB8fCB0eXBlID09PSAnTGlzdEJveCcpIHsKICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXh0SGlnaENvbnRyb2xTZXJpZXMpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzWzBdXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ3pJbmRleCcsIHRlbXBFeGNoYWdlSW5kZXgpCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1swXSwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCAtIChuZXh0SGlnaENvbnRyb2xTZXJpZXMhLmxlbmd0aCAtIDEpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgbmV4dEhpZ2hDb250cm9sU2VyaWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlSW5kZXggPSB1c2VyRGF0YVtuZXh0SGlnaENvbnRyb2xTZXJpZXNbal1dLmV4dHJhRGF0YXMhLnpJbmRleCEgKyAxCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1tqXSwgJ3pJbmRleCcsIHVwZGF0ZUluZGV4KQogICAgICAgICAgICB9CiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcyA9IFtdCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggLyogJiYgc3dhcFRhYkluZGV4ID4gMCAqLykgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhzZWxDb250cm9sLCAnekluZGV4Jywgc3dhcFRhYkluZGV4KQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBzZW5kQmFja3dhcmQgKCkgewogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdCiAgICBjb25zdCBoaWdoUHJvckNvbnRyb2wgPSBbXQogICAgY29uc3QgbG93UHJvckNvbnRyb2wgPSBbXQogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIVswXSlbMF0KICAgIGNvbnN0IGNvbnRhaW5lckNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJdLmNvbnRyb2xzCiAgICBmb3IgKGNvbnN0IGluZGV4IGluIGNvbnRhaW5lckNvbnRyb2xzKSB7CiAgICAgIGNvbnN0IGNudHJsRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyQ29udHJvbHNbaW5kZXhdXQogICAgICBpZiAoY250cmxEYXRhLnR5cGUgPT09ICdNdWx0aVBhZ2UnIHx8IGNudHJsRGF0YS50eXBlID09PSAnRnJhbWUnIHx8IGNudHJsRGF0YS50eXBlID09PSAnTGlzdEJveCcpIHsKICAgICAgICBoaWdoUHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG93UHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pCiAgICAgIH0KICAgIH0KICAgIGxldCBuZXh0U2VsY3RlZFNlcmllczogc3RyaW5nW10gPSBbXQogICAgbGV0IG5leHRIaWdoQ29udHJvbFNlcmllczogc3RyaW5nW10gPSBbXQogICAgY29uc3QgZ2V0U2VsQ29udHJvbCA9IFsuLi50aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFdCiAgICBnZXRTZWxDb250cm9sLnNvcnQoKGEsIGIpID0+IHsKICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghCiAgICB9KQogICAgZm9yIChjb25zdCBzZWxDb250cm9sIG9mIGdldFNlbENvbnRyb2wpIHsKICAgICAgY29uc3QgdHlwZSA9IHVzZXJEYXRhW3NlbENvbnRyb2xdLnR5cGUKICAgICAgY29uc3QgdGVtcFpJbmRleCA9IHVzZXJEYXRhW3NlbENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgICAgY29uc3QgY29udHJvbEluZGV4ID0gT2JqZWN0LmtleXModXNlckRhdGEpLmZpbmRJbmRleCgodmFsOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHsKICAgICAgICByZXR1cm4gJ3pJbmRleCcgaW4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzISAmJiAodXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHRlbXBaSW5kZXggLSAxKQogICAgICB9KQogICAgICBjb25zdCBuZXh0U2VsZWN0ZWRDb250cm9sID0gY29udHJvbEluZGV4ICE9PSAtMSA/IE9iamVjdC5rZXlzKHVzZXJEYXRhKVtjb250cm9sSW5kZXhdIDogJycKICAgICAgY29uc3QgbmV4dENvbnRyb2xUeXBlID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0udHlwZQogICAgICBpZiAobmV4dFNlbGVjdGVkQ29udHJvbCAhPT0gJycgJiYgIWhpZ2hQcm9yQ29udHJvbC5pbmNsdWRlcyhzZWxDb250cm9sKSkgewogICAgICAgIGlmIChnZXRTZWxDb250cm9sIS5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgICAgaWYgKCFuZXh0U2VsY3RlZFNlcmllcy5pbmNsdWRlcyhzZWxDb250cm9sKSkgewogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcy5wdXNoKHNlbENvbnRyb2wpCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIW5leHRTZWxjdGVkU2VyaWVzLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzLnB1c2gobmV4dFNlbGVjdGVkQ29udHJvbCkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5leHRTZWxjdGVkU2VyaWVzKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ25leHRTZWxjdGVkU2VyaWVzJywgbmV4dFNlbGN0ZWRTZXJpZXMpCiAgICAgICAgICAgIGNvbnN0IHRlbXBFeGNoYWdlSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsY3RlZFNlcmllc1swXV0uZXh0cmFEYXRhcyEuekluZGV4IQogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggJiYgc3dhcFRhYkluZGV4ID4gMCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ3pJbmRleCcsIHRlbXBFeGNoYWdlSW5kZXgpCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxjdGVkU2VyaWVzWzBdLCAnekluZGV4JywgKG5leHRTZWxjdGVkU2VyaWVzIS5sZW5ndGggKyAxKSAtIHN3YXBUYWJJbmRleCkKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IG5leHRTZWxjdGVkU2VyaWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsY3RlZFNlcmllc1tqXV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIDEKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGN0ZWRTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCkKICAgICAgICAgICAgfQogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcyA9IFtdCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggJiYgc3dhcFRhYkluZGV4ID4gMCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhzZWxDb250cm9sLCAnekluZGV4Jywgc3dhcFRhYkluZGV4KQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghbG93UHJvckNvbnRyb2wuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkgJiYgKHR5cGUgPT09ICdGcmFtZScgfHwgdHlwZSA9PT0gJ011bHRpUGFnZScgfHwgdHlwZSA9PT0gJ0xpc3RCb3gnKSkgewogICAgICAgIGlmIChnZXRTZWxDb250cm9sIS5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgICAgaWYgKCFuZXh0SGlnaENvbnRyb2xTZXJpZXMuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsKICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzLnB1c2goc2VsQ29udHJvbCkKICAgICAgICAgIH0KICAgICAgICAgIGlmICghbmV4dEhpZ2hDb250cm9sU2VyaWVzLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcy5wdXNoKG5leHRTZWxlY3RlZENvbnRyb2wpCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXh0SGlnaENvbnRyb2xTZXJpZXMpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzWzBdXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCEKICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ3pJbmRleCcsIHRlbXBFeGNoYWdlSW5kZXgpCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1swXSwgJ3pJbmRleCcsIChuZXh0SGlnaENvbnRyb2xTZXJpZXMhLmxlbmd0aCArIDEpIC0gc3dhcFRhYkluZGV4KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgbmV4dEhpZ2hDb250cm9sU2VyaWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlSW5kZXggPSB1c2VyRGF0YVtuZXh0SGlnaENvbnRyb2xTZXJpZXNbal1dLmV4dHJhRGF0YXMhLnpJbmRleCEgLSAxCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1tqXSwgJ3pJbmRleCcsIHVwZGF0ZUluZGV4KQogICAgICAgICAgICB9CiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcyA9IFtdCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggJiYgc3dhcFRhYkluZGV4ID4gMCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhzZWxDb250cm9sLCAnekluZGV4Jywgc3dhcFRhYkluZGV4KQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/organisms/FDHeader","sourcesContent":["<template>\n  <div>\n    <div class=\"firstrow\">\n      <div class=\"ui-titlebar\">\n        <div class=\"ui-titletext\">Visual Basic for Applications - Book1</div>\n        <div class=\"ui-titlecontrols\">\n          <!-- fixed svg issue -->\n          <button class=\"ui-btn minimize\">\n            <FDSVGImage name=\"minimize.svg\" />\n          </button>\n          <button class=\"ui-btn maximize\">\n            <FDSVGImage name=\"maximize.svg\" />\n          </button>\n          <button class=\"ui-btn close\">\n            <FDSVGImage name=\"close-button.svg\" />\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"secondrow\">\n      <i class=\"material-icons material-float\">&#xe5d4;</i>\n      <div class=\"menu-bar\">\n        <ul>\n          <li><u>F</u>ile</li>\n          <li><u>E</u>dit</li>\n          <li @click=\"subMenuDisplay\">\n            <u>V</u>iew\n            <div class=\"sub-menu-1\" v-if=\"displaySubMenu === true\">\n              <ul class=\"sub-menu-ul\">\n                <li class=\"sub-menu-li\">\n                  <CodeLogo class=\"fa padding\" />\n                  <span><u>C</u>ode</span>\n                </li>\n                <li class=\"sub-menu-li\">\n                  <ObjectLogo class=\"fa padding\" />\n                  <span>O<u>b</u>ject</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <ObjBrowserLogo class=\"fa padding\" />\n                  <span><u>O</u>bject Browser</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>I</u>mmediate Window</span>\n                </li>\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span>Local<u>s</u> Window</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span>Watc<u>h</u> Window</span>\n                </li>\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span>Call Stac<u>k</u></span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <PjExplorerLogo class=\"fa padding\" />\n                  <span><u>P</u>roject Explorer</span>\n                </li>\n                <li class=\"sub-menu-li\">\n                  <PjPropertyLogo class=\"fa padding\" />\n                  <span>Properties <u>W</u>indow</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <ToolBoxLogo class=\"fa padding\" />\n                  <span>ToolBo<u>x</u></span>\n                </li>\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span>T<u>a</u>b Order</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span>Microscoft Excel</span>\n                </li>\n              </ul>\n            </div>\n          </li>\n          <li @click=\"subMenuDisplay\">\n            <u>I</u>nsert\n            <div class=\"sub-menu-1\" v-if=\"displaySubMenu === true\">\n              <ul class=\"sub-menu-ul\">\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>P</u>rocedure</span>\n                </li>\n                <li class=\"sub-menu-li\" @click=\"insertUserForm()\">\n                  <UserFormLogo class=\"fa padding\" />\n                  <span><u>U</u>serform</span>\n                </li>\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>M</u>odule</span>\n                </li>\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>C</u>lass Module</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span>F<u>i</u>le</span>\n                </li>\n              </ul>\n            </div>\n          </li>\n          <li @click=\"subMenuDisplay\">\n            <u>F</u>ormat\n            <div class=\"sub-menu-1\" v-if=\"displaySubMenu === true\">\n              <ul class=\"sub-menu-ul\">\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>A</u>lign</span>\n                </li>\n                <li class=\"sub-menu-li\">\n                  <UserFormLogo class=\"fa padding\" />\n                  <span><u>M</u>ake Same Size</span>\n                </li>\n                <hr />\n                <li\n                  class=\"sub-menu-li\"\n                  :style=\"{ opacity: getdisableStyle('sizeToFit') ? 0.5 : 1 }\"\n                  @click=\"getdisableStyle('sizeToFit') ? '' : sizeToFit()\"\n                >\n                  <span></span>\n                  <span>Size to <u>F</u>it</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                 :style=\"{ opacity: getdisableStyle('sizeToGrid') ? 0.5 : 1 }\"\n                  @click=\"getdisableStyle('sizeToGrid') ? '' : sizeToGrid()\"\n                >\n                  <span></span>\n                  <span>Size to Gri<u>d</u></span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>H</u>orizontal Spacing</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('makeEqual') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('makeEqual') ? '' : makeEqual('Left')\"\n                >\n                  <span></span>\n                  <span>Make <u>E</u>qual</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('incDecspacing') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('incDecspacing') ? '' : incDecspacing('Left', 10)\"\n                >\n                  <span></span>\n                  <span><u>I</u>ncrease</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('incDecspacing') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('incDecspacing') ? '' : incDecspacing('Left', -10)\"\n                >\n                  <span></span>\n                  <span><u>D</u>ecrease</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('removeSpace') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('removeSpace') ? '' : removeSpace('Left')\"\n                >\n                  <span></span>\n                  <span><u>R</u>emove</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>V</u>ertical Spacing</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('makeEqual') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('makeEqual') ? '' : makeEqual('Top')\"\n                >\n                  <span></span>\n                  <span>Make <u>E</u>qual</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('incDecspacing') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('incDecspacing') ? '' : incDecspacing('Top', 10)\"\n                >\n                  <span></span>\n                  <span><u>I</u>ncrease</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('incDecspacing') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('incDecspacing') ? '' : incDecspacing('Top', -10)\"\n                >\n                  <span></span>\n                  <span><u>D</u>ecrease</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('removeSpace') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('removeSpace') ? '' : removeSpace('Top')\"\n                >\n                  <span></span>\n                  <span><u>R</u>emove</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>C</u>enter in Form</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('centreInForm') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('centreInForm') ? '' : centreInForm('horizontal')\"\n                >\n                  <span></span>\n                  <span><u>H</u>orizontally</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('centreInForm') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('centreInForm') ? '' : centreInForm('vertical')\"\n                >\n                  <span></span>\n                  <span><u>V</u>ertically</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span>A<u>r</u>range Buttons</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('arrangeButton') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('arrangeButton') ? '' : arrangeButton('right')\"\n                >\n                  <span></span>\n                  <span><u>R</u>ight</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('arrangeButton') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('arrangeButton') ? '' : arrangeButton('bottom')\"\n                >\n                  <span></span>\n                  <span><u>B</u>ottom</span>\n                </li>\n                <hr />\n                <li\n                  class=\"sub-menu-li\"\n                  :style=\"{ opacity: getdisableStyle('group') ? 0.5 : 1 }\"\n                  @click=\"getdisableStyle('group') ? '' : groupControl()\"\n                >\n                  <span></span>\n                  <span><u>G</u>roup</span>\n                </li>\n                <li\n                  class=\"sub-menu-li\"\n                  :style=\"{ opacity: getdisableStyle('unGroup') ? 0.5 : 1 }\"\n                  @click=\"getdisableStyle('unGroup') ? '' : unGroupControl()\"\n                >\n                  <span></span>\n                  <span><u>U</u>nGroup</span>\n                </li>\n                <hr />\n                <li class=\"sub-menu-li\">\n                  <span></span>\n                  <span><u>O</u>rder</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('order') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('order') ? '' : bringFront()\"\n                >\n                  <span></span>\n                  <span><u>B</u>ring to Front</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('order') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('order') ? '' : sendBack()\"\n                >\n                  <span></span>\n                  <span><u>S</u>end to Back</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('order') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('order') ? '' : bringForward()\"\n                >\n                  <span></span>\n                  <span><u>B</u>ring Forward</span>\n                </li>\n                <li class=\"sub-menu-li\"\n                :style=\"{ opacity: getdisableStyle('order') ? 0.5 : 1 }\"\n                @click=\"getdisableStyle('order') ? '' : sendBackward()\"\n                >\n                  <span></span>\n                  <span><u>S</u>end Backward</span>\n                </li>\n              </ul>\n            </div>\n          </li>\n          <li><u>D</u>ebug</li>\n          <li @click=\"clickChangeMode\"><u>R</u>un</li>\n          <li><u>T</u>ools</li>\n          <li><u>A</u>dd-Ins</li>\n          <li><u>W</u>indow</li>\n          <li><u>H</u>elp</li>\n        </ul>\n      </div>\n    </div>\n\n    <div class=\"thirdrow\">\n      <i class=\"material-icons\">&#xe5d4;</i>\n      <FileSaveLogo class=\"fa\" />\n      <CutLogo class=\"fa\" />\n      <CopyLogo class=\"fa\" />\n      <PasteLogo class=\"fa\" />\n      <FindLogo class=\"fa\" />\n      <UndoLogo class=\"fa\" />\n      <RedoLogo class=\"fa\" />\n      <DesignModeLogo class=\"fa\" />\n      <PjExplorerLogo class=\"fa\" />\n      <PjPropertyLogo class=\"fa\" />\n      <ObjBrowserLogo class=\"fa\" />\n      <ToolBoxLogo class=\"fa\" />\n      <HelpLogo class=\"fa\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator'\nimport { State, Action } from 'vuex-class'\nimport {\n  IaddUserform,\n  IupdateControlExtraData\n} from '@/storeModules/fd/actions'\nimport { ControlPropertyData } from '@/FormDesigner/models/ControlsTableProperties/ControlPropertyData'\nimport CutLogo from '../../../../assets/cut.svg'\nimport FileSaveLogo from '../../../../assets/file-save.svg'\nimport CopyLogo from '../../../../assets/copy.svg'\nimport PasteLogo from '../../../../assets/paste.svg'\nimport FindLogo from '../../../../assets/find.svg'\nimport UndoLogo from '../../../../assets/undo.svg'\nimport RedoLogo from '../../../../assets/redo.svg'\nimport DesignModeLogo from '../../../../assets/design-mode.svg'\nimport PjExplorerLogo from '../../../../assets/pj-explorer.svg'\nimport PjPropertyLogo from '../../../../assets/pj-property.svg'\nimport ObjBrowserLogo from '../../../../assets/obj-browser.svg'\nimport ToolBoxLogo from '../../../../assets/tool-box.svg'\nimport UserFormLogo from '../../../../assets/user-from.svg'\nimport HelpLogo from '../../../../assets/help.svg'\nimport CodeLogo from '../../../../assets/view-code.svg'\nimport ObjectLogo from '../../../../assets/view-object.svg'\nimport FDSVGImage from '@/FormDesigner/components/atoms/FDSVGImage/index.vue'\nimport { EventBus } from '@/FormDesigner/event-bus'\nimport FDCommonMethod from '@/api/abstract/FormDesigner/FDCommonMethod'\n\n@Component({\n  name: 'Header',\n  components: {\n    FileSaveLogo,\n    CutLogo,\n    CopyLogo,\n    PasteLogo,\n    FindLogo,\n    UndoLogo,\n    RedoLogo,\n    DesignModeLogo,\n    PjExplorerLogo,\n    PjPropertyLogo,\n    ObjBrowserLogo,\n    ToolBoxLogo,\n    UserFormLogo,\n    CodeLogo,\n    ObjectLogo,\n    HelpLogo,\n    FDSVGImage\n  }\n})\nexport default class Header extends FDCommonMethod {\n  displaySubMenu: boolean = false;\n  @Action('fd/addUserform') addControl!: (payload: IaddUserform) => void;\n  @Action('fd/changeRunMode') changeRunMode!: (payload: boolean) => void;\n\n  @State((state) => state.fd.selectedControls)\n  selectedControls!: fdState['selectedControls'];\n  @State((state) => state.fd.userformData) userformData!: userformData;\n  @State((state) => state.fd.isRunMode) isRunMode!: boolean;\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (\n    payload: IupdateControlExtraData\n  ) => void;\n  propControlData = {};\n  userFormId = 'ID_USERFORM1';\n  insertUserForm () {\n    this.propControlData = this.userformData\n    const userform = new ControlPropertyData()\n    const userFormId = `ID_USERFORM${\n      Object.keys(this.userformData).length + 1\n    }`\n    const Name = `UserForm${Object.keys(this.userformData).length + 1}`\n    const Caption = `UserForm${Object.keys(this.userformData).length + 1}`\n    const ID = Object.keys(this.userformData).length + 1\n    this.addControl({\n      target: this,\n      key: userFormId,\n      value: {\n        properties: {\n          ...userform.data.UserForm,\n          Name: Name,\n          ID: ID,\n          Caption: Caption\n        },\n        controls: [],\n        extraDatas: { display: 'none' },\n        type: 'Userform'\n      }\n    })\n  }\n  subMenuDisplay () {\n    this.displaySubMenu = !this.displaySubMenu\n  }\n  clickChangeMode () {\n    this.changeRunMode(!this.isRunMode)\n  }\n  makeEqual (type: keyof controlProperties) {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    const controls = usrFrmData[ctrlContainer].controls\n    let divstyle: Array<IGroupStyle> = []\n    let getGroupIndex = -1\n    EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n      divstyle = divstayleArray\n    })\n    if (ctrlSel[0].startsWith('group')) {\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\n    }\n    let propValue = 0\n    const leftArray: string[] = []\n    const rightArray: string[] = []\n    for (let index = 1; index < ctrlSel.length; index++) {\n      const selLeft = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].left!)\n        : usrFrmData[ctrlSel[0]].properties.Left\n      const selTop = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].top!)\n        : usrFrmData[ctrlSel[0]].properties.Top\n      if (!ctrlSel[index].startsWith('group')) {\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\n        if (type === 'Left') {\n          if (ctrlProp.Left! <= selLeft!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        } else if (type === 'Top') {\n          if (ctrlProp.Top! <= selTop!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        }\n      } else {\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const getIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        const groupLeft = parseInt(divstyle[getIndex].left!)\n        const groupTop = parseInt(divstyle[getIndex].top!)\n        const groupConrol = this.getGroupControl(ctrlSel[index])\n        if (type === 'Left') {\n          if (groupLeft <= selLeft!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        } else if (type === 'Top') {\n          if (groupTop <= selTop!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        }\n      }\n    }\n    if (ctrlSel[0].startsWith('group')) {\n      const getIndex = divstyle.findIndex(\n        (val) => val.groupName === ctrlSel[0]\n      )\n      const groupLeft = parseInt(divstyle[getIndex].left!)\n      const groupTop = parseInt(divstyle[getIndex].top!)\n      const groupConrol = this.getGroupControl(ctrlSel[0])\n      if (type === 'Left') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Left!) === groupLeft) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      } else if (type === 'Top') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Top!) === groupTop) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      }\n    } else {\n      leftArray.unshift(ctrlSel[0])\n      rightArray.push(ctrlSel[0])\n    }\n    console.log(leftArray, '', rightArray)\n    if (type === 'Left') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n    } else if (type === 'Top') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n    }\n    let leftControl = { ...usrFrmData[leftArray[0]].properties }\n    if (leftControl.GroupID !== '') {\n      const groupIndex = divstyle.findIndex(\n        (val) => val.groupName === leftControl.GroupID\n      )\n      const groupSize = divstyle[groupIndex]\n      leftControl = {\n        ...leftControl,\n        Width: parseInt(divstyle[groupIndex].width!),\n        Height: parseInt(divstyle[groupIndex].height!),\n        Left: parseInt(divstyle[groupIndex].left!),\n        Top: parseInt(divstyle[groupIndex].top!)\n      }\n    }\n    let rightControl = {\n      ...usrFrmData[rightArray[rightArray.length - 1]].properties\n    }\n    if (rightControl.GroupID !== '') {\n      const groupIndex = divstyle.findIndex(\n        (val) => val.groupName === rightControl.GroupID\n      )\n      const groupSize = divstyle[groupIndex]\n      rightControl = {\n        ...leftControl,\n        Width: parseInt(divstyle[groupIndex].width!),\n        Height: parseInt(divstyle[groupIndex].height!),\n        Left: parseInt(divstyle[groupIndex].left!),\n        Top: parseInt(divstyle[groupIndex].top!)\n      }\n    }\n    let totalSize = 0\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (type === 'Left') {\n        if (!ctrlSel[index].startsWith('group')) {\n          const ctrlProp = usrFrmData[ctrlSel[index]].properties\n          totalSize = totalSize + ctrlProp.Width!\n        } else {\n          const groupIndex = divstyle.findIndex(\n            (val) => val.groupName === ctrlSel[index]\n          )\n          totalSize = totalSize + parseInt(divstyle[groupIndex].width!)\n        }\n      } else if (type === 'Top') {\n        if (!ctrlSel[index].startsWith('group')) {\n          const ctrlProp = usrFrmData[ctrlSel[index]].properties\n          totalSize = totalSize + ctrlProp.Height!\n        } else {\n          const groupIndex = divstyle.findIndex(\n            (val) => val.groupName === ctrlSel[index]\n          )\n          totalSize = totalSize + parseInt(divstyle[groupIndex].height!)\n        }\n      }\n    }\n    let diffrence = 0\n    if (type === 'Left') {\n      diffrence =\n        (rightControl.Left! +\n          rightControl.Width! -\n          leftControl.Left! -\n          totalSize) /\n        (ctrlSel.length - 1)\n    } else if (type === 'Top') {\n      diffrence =\n        (rightControl.Top! +\n          rightControl.Height! -\n          leftControl.Top! -\n          totalSize) /\n        (ctrlSel.length - 1)\n    }\n    const unique = () => {\n      var a = leftArray.concat(rightArray)\n      for (var i = 0; i < a.length; ++i) {\n        for (var j = i + 1; j < a.length; ++j) {\n          if (a[i] === a[j]) {\n            a.splice(j--, 1)\n          }\n        }\n      }\n      return a\n    }\n    const combineArray = unique()\n    for (let index = 1; index < combineArray.length - 1; index++) {\n      const prevCtrlProp = usrFrmData[combineArray[index - 1]].properties\n      const ctrlProp = usrFrmData[combineArray[index]].properties\n      let prevIndex = -1\n      const controlPropIndex = -1\n      if (type === 'Left') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + diffrence\n          this.updateControlProperty(type, propValue, combineArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            prevIndex = divstyle.findIndex(\n              (val) => val.groupName === prevCtrlProp.GroupID\n            )\n            propValue =\n              parseInt(divstyle[prevIndex].left!) +\n              parseInt(divstyle[prevIndex].width!) +\n              diffrence\n          } else {\n            propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + diffrence\n          }\n          if (ctrlProp.GroupID !== '') {\n            const getIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\n          } else {\n            this.updateControlProperty(type, propValue, combineArray[index])\n          }\n        }\n      } else {\n        if (type === 'Top') {\n          if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n            propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + diffrence\n            this.updateControlProperty(type, propValue, combineArray[index])\n          } else {\n            if (prevCtrlProp.GroupID !== '') {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue =\n                parseInt(divstyle[prevIndex].top!) +\n                parseInt(divstyle[prevIndex].height!) +\n                diffrence\n            } else {\n              propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + diffrence\n            }\n            if (ctrlProp.GroupID !== '') {\n              const getIndex = divstyle.findIndex(\n                (val) => val.groupName === ctrlProp.GroupID\n              )\n              EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\n            } else {\n              this.updateControlProperty(type, propValue, combineArray[index])\n            }\n          }\n        }\n      }\n    }\n  }\n  bringFront () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl: string[] = []\n    const lowProrControl: string[] = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    lowProrControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    let getLowPropHighestIndex: string = lowProrControl[lowProrControl.length - 1]\n    highProrControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    let getHighPropHighestIndex = highProrControl[highProrControl.length - 1]\n    const lowSeriesControl: string[] = []\n    const highSeriesControl: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl) {\n      if (lowProrControl.includes(selControl)) {\n        lowSeriesControl.push(selControl)\n      } else {\n        highSeriesControl.push(selControl)\n      }\n    }\n    const setLowPropHighIndex = (control: string) => {\n      if (lowSeriesControl.length > 0 && lowSeriesControl.includes(control)) {\n        lowSeriesControl.pop()\n        const Index = lowProrControl.findIndex(val => userData[getLowPropHighestIndex!].extraDatas!.zIndex! - 1 === userData[val].extraDatas!.zIndex)\n        getLowPropHighestIndex = Index !== -1 ? lowProrControl[Index] : ''\n        if (Index !== -1) {\n          setLowPropHighIndex(getLowPropHighestIndex)\n        }\n      }\n    }\n    setLowPropHighIndex(getLowPropHighestIndex)\n    lowSeriesControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    if (lowSeriesControl.length > 0) {\n      const lowestZIndex = userData[lowSeriesControl[0]].extraDatas!.zIndex!\n      let nextSeries: string[] = []\n      let count = lowSeriesControl.length - 1\n      const diff = userData[getLowPropHighestIndex].extraDatas!.zIndex! - userData[lowSeriesControl[lowSeriesControl.length - 1]].extraDatas!.zIndex!\n      for (const ctrl of lowSeriesControl) {\n        const nextControl = lowSeriesControl.findIndex(val => 'zIndex' in userData[val].extraDatas! && (userData[ctrl].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex!))\n        if (nextControl !== -1) {\n          nextSeries.push(ctrl)\n          count = count - 1\n        } else {\n          const difference = userData[getLowPropHighestIndex].extraDatas!.zIndex! - count\n          this.updateExtraDatas(ctrl, 'zIndex', difference)\n          if (nextSeries.length > 0) {\n            for (let i = 0; i < nextSeries.length; i++) {\n              const diff = userData[ctrl].extraDatas!.zIndex! - (nextSeries.length - i)\n              this.updateExtraDatas(nextSeries[i], 'zIndex', diff)\n            }\n            nextSeries = []\n          }\n          count = count - 1\n        }\n      }\n      let counter = 0\n      for (const ctrl of lowProrControl) {\n        if (!this.getSelectedControlsDatas!.includes(ctrl)) {\n          counter = counter + 1\n          this.updateExtraDatas(ctrl, 'zIndex', counter)\n        }\n      }\n    }\n\n    const setHighPropHighIndex = (control: string) => {\n      if (highSeriesControl.length > 0 && highSeriesControl.includes(control)) {\n        highSeriesControl.pop()\n        const Index = highProrControl.findIndex(val => userData[getHighPropHighestIndex!].extraDatas!.zIndex! - 1 === userData[val].extraDatas!.zIndex)\n        getHighPropHighestIndex = Index !== -1 ? highProrControl[Index] : ''\n        if (Index !== -1) {\n          setHighPropHighIndex(getHighPropHighestIndex)\n        }\n      }\n    }\n    setHighPropHighIndex(getHighPropHighestIndex)\n    highSeriesControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    if (highSeriesControl.length > 0) {\n      const highestZIndex = userData[highSeriesControl[0]].extraDatas!.zIndex!\n      let nextSeries: string[] = []\n      let count = highSeriesControl.length - 1\n      const diff = userData[getHighPropHighestIndex].extraDatas!.zIndex! - userData[highSeriesControl[highSeriesControl.length - 1]].extraDatas!.zIndex!\n      for (const ctrl of highSeriesControl) {\n        const nextControl = highSeriesControl.findIndex(val => 'zIndex' in userData[val].extraDatas! && (userData[ctrl].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex!))\n        if (nextControl !== -1) {\n          nextSeries.push(ctrl)\n          count = count - 1\n        } else {\n          const difference = userData[getHighPropHighestIndex].extraDatas!.zIndex! - count\n          this.updateExtraDatas(ctrl, 'zIndex', difference)\n          if (nextSeries.length > 0) {\n            for (let i = 0; i < nextSeries.length; i++) {\n              const diff = userData[ctrl].extraDatas!.zIndex! - (nextSeries.length - i)\n              this.updateExtraDatas(nextSeries[i], 'zIndex', diff)\n            }\n            nextSeries = []\n          }\n          count = count - 1\n        }\n      }\n      let counter = 0\n      for (const ctrl of highProrControl) {\n        if (!this.getSelectedControlsDatas!.includes(ctrl)) {\n          counter = counter + 1\n          this.updateExtraDatas(ctrl, 'zIndex', counter)\n        }\n      }\n    }\n  }\n  sendBack () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl: string[] = []\n    const lowProrControl: string[] = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    lowProrControl.sort((a, b) => {\n      return userData[b].extraDatas!.zIndex! - userData[a].extraDatas!.zIndex!\n    })\n    let getLowPropHighestIndex: string = lowProrControl[lowProrControl.length - 1]\n    highProrControl.sort((a, b) => {\n      return userData[b].extraDatas!.zIndex! - userData[a].extraDatas!.zIndex!\n    })\n    let getHighPropHighestIndex = highProrControl[highProrControl.length - 1]\n    const lowSeriesControl: string[] = []\n    const highSeriesControl: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl) {\n      if (lowProrControl.includes(selControl)) {\n        lowSeriesControl.push(selControl)\n      } else {\n        highSeriesControl.push(selControl)\n      }\n    }\n    const setLowPropHighIndex = (control: string) => {\n      if (lowSeriesControl.length > 0 && lowSeriesControl.includes(control)) {\n        lowSeriesControl.pop()\n        const Index = lowProrControl.findIndex(val => userData[getLowPropHighestIndex!].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex)\n        getLowPropHighestIndex = Index !== -1 ? lowProrControl[Index] : ''\n        if (Index !== -1) {\n          setLowPropHighIndex(getLowPropHighestIndex)\n        }\n      }\n    }\n    setLowPropHighIndex(getLowPropHighestIndex)\n    if (lowSeriesControl.length > 0) {\n      lowSeriesControl.sort((a, b) => {\n        return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n      })\n      let count = userData[getLowPropHighestIndex].extraDatas!.zIndex!\n      for (const ctrl of lowSeriesControl) {\n        this.updateExtraDatas(ctrl, 'zIndex', count)\n        count = count + 1\n      }\n      let counter = userData[lowSeriesControl[lowSeriesControl.length - 1]].extraDatas!.zIndex!\n      for (let i = lowProrControl.length - 1; i >= 0; i--) {\n        if (!this.getSelectedControlsDatas!.includes(lowProrControl[i])) {\n          counter = counter + 1\n          this.updateExtraDatas(lowProrControl[i], 'zIndex', counter)\n        }\n      }\n    }\n\n    const setHighPropHighIndex = (control: string) => {\n      if (highSeriesControl.length > 0 && highSeriesControl.includes(control)) {\n        highSeriesControl.shift()\n        const Index = highProrControl.findIndex(val => userData[getHighPropHighestIndex!].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex)\n        getHighPropHighestIndex = Index !== -1 ? highProrControl[Index] : ''\n        if (Index !== -1) {\n          setHighPropHighIndex(getHighPropHighestIndex)\n        }\n      }\n    }\n    setHighPropHighIndex(getHighPropHighestIndex)\n    if (highSeriesControl.length > 0) {\n      highSeriesControl.sort((a, b) => {\n        return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n      })\n      let count = userData[getHighPropHighestIndex].extraDatas!.zIndex!\n      for (const ctrl of highSeriesControl) {\n        this.updateExtraDatas(ctrl, 'zIndex', count)\n        count = count + 1\n      }\n      let counter = userData[highSeriesControl[highSeriesControl.length - 1]].extraDatas!.zIndex!\n      for (let i = highProrControl.length - 1; i >= 0; i--) {\n        if (!this.getSelectedControlsDatas!.includes(highProrControl[i])) {\n          counter = counter + 1\n          this.updateExtraDatas(highProrControl[i], 'zIndex', counter)\n        }\n      }\n    }\n  }\n  groupControl () {\n    EventBus.$emit('groupControl', 'group')\n  }\n  unGroupControl () {\n    EventBus.$emit('groupControl', 'ungroup')\n  }\n  sizeToFit () {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const sizeToFitArr: string[] = []\n    const sizeToFitVal: boolean[] = []\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const controlprop = usrFrmData[ctrlSel[index]].properties\n        if ('AutoSize' in controlprop) {\n          sizeToFitArr.push(ctrlSel[index])\n          sizeToFitVal.push(controlprop.AutoSize!)\n          this.updateControlProperty('AutoSize', true, ctrlSel[index])\n        }\n      }\n    }\n    setTimeout(() => {\n      for (let index = 0; index < sizeToFitArr.length; index++) {\n        if (!sizeToFitArr[index].startsWith('group')) {\n          const controlprop = usrFrmData[sizeToFitArr[index]].properties\n          if ('AutoSize' in controlprop) {\n            this.updateControlProperty(\n              'AutoSize',\n              sizeToFitVal[index],\n              sizeToFitArr[index]\n            )\n          }\n        }\n      }\n    }, 100)\n  }\n  sizeToGrid () {\n    let divstyle: Array<IGroupStyle> = []\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    let ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const controlprop = usrFrmData[ctrlSel[index]].properties\n        this.updateControlProperty(\n          'Left',\n          Math.trunc(controlprop.Left!),\n          ctrlSel[index]\n        )\n        this.updateControlProperty(\n          'Top',\n          Math.trunc(controlprop.Top!),\n          ctrlSel[index]\n        )\n        this.updateControlProperty(\n          'Width',\n          Math.trunc(controlprop.Width!),\n          ctrlSel[index]\n        )\n        this.updateControlProperty(\n          'Height',\n          Math.trunc(controlprop.Height!),\n          ctrlSel[index]\n        )\n      } else {\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const getIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        EventBus.$emit('updasteGroupSize', 'GroupID', 0, getIndex)\n      }\n    }\n  }\n  incDecspacing (type: keyof controlProperties, value: number) {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    const controls = usrFrmData[ctrlContainer].controls\n    let divstyle: Array<IGroupStyle> = []\n    let getGroupIndex = -1\n    if (ctrlSel[0].startsWith('group')) {\n      EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n        divstyle = divstayleArray\n      })\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\n    }\n    const leftArray: string[] = []\n    const rightArray: string[] = []\n    for (let index = 1; index < ctrlSel.length; index++) {\n      const selLeft = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].left!)\n        : usrFrmData[ctrlSel[0]].properties.Left\n      const selTop = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].top!)\n        : usrFrmData[ctrlSel[0]].properties.Top\n      if (!ctrlSel[index].startsWith('group')) {\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\n        if (type === 'Left') {\n          if (ctrlProp.Left! <= selLeft!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        } else if (type === 'Top') {\n          if (ctrlProp.Top! <= selTop!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        }\n      } else {\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const getIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        const groupLeft = parseInt(divstyle[getIndex].left!)\n        const groupTop = parseInt(divstyle[getIndex].top!)\n        const groupConrol = this.getGroupControl(ctrlSel[index])\n        if (type === 'Left') {\n          if (groupLeft <= selLeft!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        } else if (type === 'Top') {\n          if (groupTop <= selTop!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        }\n      }\n    }\n    if (ctrlSel[0].startsWith('group')) {\n      const getIndex = divstyle.findIndex(\n        (val) => val.groupName === ctrlSel[0]\n      )\n      const groupLeft = parseInt(divstyle[getIndex].left!)\n      const groupTop = parseInt(divstyle[getIndex].top!)\n      const groupConrol = this.getGroupControl(ctrlSel[0])\n      if (type === 'Left') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Left!) === groupLeft) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      } else if (type === 'Top') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Top!) === groupTop) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      }\n    } else {\n      leftArray.unshift(ctrlSel[0])\n      rightArray.push(ctrlSel[0])\n    }\n    console.log(leftArray, '', rightArray)\n    if (type === 'Left') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[b].properties.Left! - usrFrmData[a].properties.Left!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n    } else if (type === 'Top') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[b].properties.Top! - usrFrmData[a].properties.Top!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n    }\n    console.log(leftArray, rightArray)\n    const groupIndex: number = divstyle.findIndex(\n      (val) => val.groupName === ctrlSel[0]\n    )\n    const isGroup = ctrlSel[0].startsWith('group')\n    const ctrlProp = !isGroup && usrFrmData[ctrlSel[0]].properties\n    const newObject = {\n      Left:\n        isGroup && groupIndex !== -1\n          ? parseInt(divstyle[groupIndex].left!)\n          : ctrlProp\n            ? ctrlProp.Left!\n            : 0,\n      Top:\n        isGroup && groupIndex !== -1\n          ? parseInt(divstyle[groupIndex].top!)\n          : ctrlProp\n            ? ctrlProp.Top!\n            : 0,\n      Width:\n        isGroup && groupIndex !== -1\n          ? parseInt(divstyle[groupIndex].width!)\n          : ctrlProp\n            ? ctrlProp.Width!\n            : 0,\n      Height:\n        isGroup && groupIndex !== -1\n          ? parseInt(divstyle[groupIndex].height!)\n          : ctrlProp\n            ? ctrlProp.Height!\n            : 0\n    }\n    let incDecValue = 0\n    let propValue = 0\n    for (let index = 1; index < leftArray.length; index++) {\n      const ctrlProp = usrFrmData[leftArray[index]].properties\n      let prevIndex = -1\n      let controlPropIndex = -1\n      if (type === 'Left') {\n        if (ctrlProp.GroupID === '') {\n          propValue = propValue + value\n          incDecValue = ctrlProp.Left! - propValue\n          this.updateControlProperty(type, Math.round(incDecValue / 10) * 10, leftArray[index])\n        } else {\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\n            let incDecValue = 0\n            propValue = propValue + value\n            incDecValue = parseInt(divstyle[controlPropIndex].left!) - propValue\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              Math.round(incDecValue / 10) * 10,\n              controlPropIndex\n            )\n          }\n        }\n      } else if (type === 'Top') {\n        if (ctrlProp.GroupID === '') {\n          propValue = propValue + value\n          incDecValue = ctrlProp.Top! - propValue\n          this.updateControlProperty(type, Math.round(incDecValue / 10) * 10, leftArray[index])\n        } else {\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\n            let incDecValue = 0\n            propValue = propValue + value\n            incDecValue = parseInt(divstyle[controlPropIndex].top!) - propValue\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              Math.round(incDecValue / 10) * 10,\n              controlPropIndex\n            )\n          }\n        }\n      }\n    }\n    propValue = 0\n    for (let index = 1; index < rightArray.length; index++) {\n      const ctrlProp = usrFrmData[rightArray[index]].properties\n      let prevIndex = -1\n      let controlPropIndex = -1\n      if (type === 'Left') {\n        if (ctrlProp.GroupID === '') {\n          propValue = propValue + value\n          incDecValue = ctrlProp.Left! + propValue\n          this.updateControlProperty(type, Math.round(incDecValue / 10) * 10, rightArray[index])\n        } else {\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\n            propValue = propValue + value\n            incDecValue = parseInt(divstyle[controlPropIndex].left!) + propValue\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              Math.round(incDecValue / 10) * 10,\n              controlPropIndex\n            )\n          }\n        }\n      } else if (type === 'Top') {\n        if (ctrlProp.GroupID === '') {\n          let incDecValue = 0\n          propValue = propValue + value\n          incDecValue = ctrlProp.Top! + propValue\n          this.updateControlProperty(type, Math.round(incDecValue / 10) * 10, rightArray[index])\n        } else {\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\n            let incDecValue = 0\n            propValue = propValue + value\n            incDecValue = parseInt(divstyle[controlPropIndex].top!) + propValue\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              Math.round(incDecValue / 10) * 10,\n              controlPropIndex\n            )\n          }\n        }\n      }\n    }\n  }\n  getGroupControl (groupName: string) {\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    const usrFrmData = this.userformData[this.userFormId]\n    const controls = []\n    for (const control of usrFrmData[ctrlContainer].controls) {\n      if (usrFrmData[control].properties.GroupID === groupName) {\n        controls.push(control)\n      }\n    }\n    return controls\n  }\n  removeSpace (type: keyof controlProperties) {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    const controls = usrFrmData[ctrlContainer].controls\n    let divstyle: Array<IGroupStyle> = []\n    let getGroupIndex = -1\n    if (ctrlSel[0].startsWith('group')) {\n      EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n        divstyle = divstayleArray\n      })\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\n    }\n    let propValue = 0\n    const leftArray: string[] = []\n    const rightArray: string[] = []\n    for (let index = 1; index < ctrlSel.length; index++) {\n      const selLeft = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].left!)\n        : usrFrmData[ctrlSel[0]].properties.Left\n      const selTop = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].top!)\n        : usrFrmData[ctrlSel[0]].properties.Top\n      if (!ctrlSel[index].startsWith('group')) {\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\n        if (type === 'Left') {\n          if (ctrlProp.Left! <= selLeft!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        } else if (type === 'Top') {\n          if (ctrlProp.Top! <= selTop!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        }\n      } else {\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const getIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        const groupLeft = parseInt(divstyle[getIndex].left!)\n        const groupTop = parseInt(divstyle[getIndex].top!)\n        const groupConrol = this.getGroupControl(ctrlSel[index])\n        if (type === 'Left') {\n          if (groupLeft <= selLeft!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        } else if (type === 'Top') {\n          if (groupTop <= selTop!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        }\n      }\n    }\n    if (ctrlSel[0].startsWith('group')) {\n      const getIndex = divstyle.findIndex(\n        (val) => val.groupName === ctrlSel[0]\n      )\n      const groupLeft = parseInt(divstyle[getIndex].left!)\n      const groupTop = parseInt(divstyle[getIndex].top!)\n      const groupConrol = this.getGroupControl(ctrlSel[0])\n      if (type === 'Left') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Left!) === groupLeft) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      } else if (type === 'Top') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Top!) === groupTop) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      }\n    } else {\n      leftArray.unshift(ctrlSel[0])\n      rightArray.push(ctrlSel[0])\n    }\n    console.log(leftArray, '', rightArray)\n    if (type === 'Left') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[b].properties.Left! - usrFrmData[a].properties.Left!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n    } else if (type === 'Top') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[b].properties.Top! - usrFrmData[a].properties.Top!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n    }\n    console.log(leftArray, rightArray)\n    for (let index = 1; index < leftArray.length; index++) {\n      const prevCtrlProp = usrFrmData[leftArray[index - 1]].properties\n      const ctrlProp = usrFrmData[leftArray[index]].properties\n      let prevIndex = -1\n      let controlPropIndex = -1\n      if (type === 'Left') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Left! - ctrlProp.Width!\n          this.updateControlProperty(type, propValue, leftArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            if (ctrlProp.GroupID === '') {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue = parseInt(divstyle[prevIndex].left!) - ctrlProp.Width!\n              this.updateControlProperty(type, propValue, leftArray[index])\n            }\n          }\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            if (prevCtrlProp.GroupID === '') {\n              propValue =\n                prevCtrlProp.Left! -\n                parseInt(divstyle[controlPropIndex].width!)\n            } else {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue =\n                parseInt(divstyle[prevIndex].left!) -\n                parseInt(divstyle[controlPropIndex].width!)\n            }\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              propValue,\n              controlPropIndex\n            )\n          }\n        }\n      } else if (type === 'Top') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Top! - ctrlProp.Height!\n          this.updateControlProperty(type, propValue, leftArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            if (ctrlProp.GroupID === '') {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue = parseInt(divstyle[prevIndex].top!) - ctrlProp.Height!\n              this.updateControlProperty(type, propValue, leftArray[index])\n            }\n          }\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            if (prevCtrlProp.GroupID === '') {\n              propValue =\n                prevCtrlProp.Top! -\n                parseInt(divstyle[controlPropIndex].height!)\n            } else {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue =\n                parseInt(divstyle[prevIndex].top!) -\n                parseInt(divstyle[controlPropIndex].height!)\n            }\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              propValue,\n              controlPropIndex\n            )\n          }\n        }\n      }\n    }\n    for (let index = 1; index < rightArray.length; index++) {\n      const prevCtrlProp = usrFrmData[rightArray[index - 1]].properties\n      const ctrlProp = usrFrmData[rightArray[index]].properties\n      let prevIndex = -1\n      const controlPropIndex = -1\n      if (type === 'Left') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Left! + prevCtrlProp.Width!\n          this.updateControlProperty(type, propValue, rightArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            prevIndex = divstyle.findIndex(\n              (val) => val.groupName === prevCtrlProp.GroupID\n            )\n            propValue =\n              parseInt(divstyle[prevIndex].left!) +\n              parseInt(divstyle[prevIndex].width!)\n          } else {\n            propValue = prevCtrlProp.Left! + prevCtrlProp.Width!\n          }\n          if (ctrlProp.GroupID !== '') {\n            const getIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\n          } else {\n            this.updateControlProperty(type, propValue, rightArray[index])\n          }\n        }\n      } else if (type === 'Top') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Top! + prevCtrlProp.Height!\n          this.updateControlProperty(type, propValue, rightArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            prevIndex = divstyle.findIndex(\n              (val) => val.groupName === prevCtrlProp.GroupID\n            )\n            propValue =\n              parseInt(divstyle[prevIndex].top!) +\n              parseInt(divstyle[prevIndex].height!)\n          } else {\n            propValue = prevCtrlProp.Top! + prevCtrlProp.Height!\n          }\n          if (ctrlProp.GroupID !== '') {\n            const getIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\n          } else {\n            this.updateControlProperty(type, propValue, rightArray[index])\n          }\n        }\n      }\n    }\n  }\n  updatePropVal (propName: string, propValue: number) {\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const usrFrmData = this.userformData[this.userFormId]\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const curProp = usrFrmData[ctrlSel[index]].properties\n        if (propName === 'selCenter') {\n          const curCenter = curProp.Width! / 2\n          const value = propValue - curCenter\n          this.updateControlProperty('Left', value, ctrlSel[index])\n        }\n        if (propName === 'selMiddle') {\n          const curMiddle = curProp.Height! / 2\n          const value = propValue - curMiddle\n          this.updateControlProperty('Top', value, ctrlSel[index])\n        }\n      } else {\n        let divstyle: Array<IGroupStyle> = []\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const groupIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        const curProp = divstyle[groupIndex]\n        const left = parseInt(curProp.left!)\n        const top = parseInt(curProp.top!)\n        const width = parseInt(curProp.width!)\n        const height = parseInt(curProp.height!)\n        let value = -1\n        if (propName === 'selCenter') {\n          value = propValue - width! / 2\n          EventBus.$emit('updasteGroupSize', 'Left', value, groupIndex)\n        }\n        if (propName === 'selMiddle') {\n          value = propValue - height! / 2\n          EventBus.$emit('updasteGroupSize', 'Top', value, groupIndex)\n        }\n      }\n    }\n  }\n  centreInForm (value: string) {\n    let divstyle: Array<IGroupStyle> = []\n    const mainContainer = this.selectedControls[this.userFormId].container[0]\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlProp = usrFrmData[mainContainer].properties\n    if (value === 'horizontal') {\n      const selCenter = ctrlProp.Left! + ctrlProp.Width! / 2\n      this.updatePropVal('selCenter', selCenter)\n    } else if (value === 'vertical') {\n      const selMiddle = ctrlProp.Top! + ctrlProp.Height! / 2\n      this.updatePropVal('selMiddle', selMiddle)\n    }\n  }\n  arrangeButton (type: string) {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    let ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    ctrlContainer =\n      usrFrmData[ctrlContainer].type === 'Page'\n        ? this.selectedControls[this.userFormId].container[1]\n        : ctrlContainer\n    const buttonArray = []\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const controlprop = usrFrmData[ctrlSel[index]]\n        if (controlprop.type === 'CommandButton') {\n          buttonArray.push(ctrlSel[index])\n        }\n      }\n    }\n    if (type === 'bottom') {\n      buttonArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n    } else if (type === 'right') {\n      buttonArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n    }\n    console.log(buttonArray)\n    const containerProp = usrFrmData[ctrlContainer].properties\n    let value: number = 0\n    const containerHeight = (usrFrmData[ctrlContainer].type === 'Userform')\n      ? 47 : usrFrmData[ctrlContainer].type === 'Frame' ? 27\n        : usrFrmData[ctrlContainer].type === 'MultiPage' ? 40 : 0\n    const containerWidth = 20\n    if (type === 'bottom') {\n      value = (containerProp.Height! - containerHeight) - usrFrmData[buttonArray[0]].properties.Height!\n      this.updateControlProperty('Top', value, buttonArray[0])\n      this.updateControlProperty('Left', 30, buttonArray[0])\n    } else if (type === 'right') {\n      value = (containerProp.Width! - containerWidth) - usrFrmData[buttonArray[0]].properties.Width!\n      this.updateControlProperty('Left', value, buttonArray[0])\n      this.updateControlProperty('Top', 20, buttonArray[0])\n    }\n\n    for (let index = 1; index < buttonArray.length; index++) {\n      const prevCtrlProp = usrFrmData[buttonArray[index - 1]].properties\n      const ctrlProp = usrFrmData[buttonArray[index]].properties\n      if (type === 'bottom') {\n        let propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + 10\n        value =\n          (containerProp.Height! - containerHeight) -\n          usrFrmData[buttonArray[index]].properties.Height!\n        if (propValue + ctrlProp.Width! <= containerProp.Width! - containerWidth) {\n          this.updateControlProperty('Left', propValue, buttonArray[index])\n          this.updateControlProperty('Top', value, buttonArray[index])\n        } else {\n          propValue = containerProp.Width! - containerWidth - ctrlProp.Width!\n          this.updateControlProperty('Left', propValue, buttonArray[index])\n          this.updateControlProperty('Top', value, buttonArray[index])\n        }\n      } else if (type === 'right') {\n        let propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + 10\n        value =\n          (containerProp.Width! - containerWidth) -\n          usrFrmData[buttonArray[index]].properties.Width!\n        if (propValue + ctrlProp.Height! <= containerProp.Height! - (containerHeight)) {\n          this.updateControlProperty('Top', propValue, buttonArray[index])\n          this.updateControlProperty('Left', value, buttonArray[index])\n        } else {\n          propValue = containerProp.Height! - containerHeight - ctrlProp.Height!\n          this.updateControlProperty('Top', propValue, buttonArray[index])\n          this.updateControlProperty('Left', value, buttonArray[index])\n        }\n      }\n    }\n  }\n  updateControlProperty (\n    propertyName: keyof controlProperties,\n    propertyValue: any,\n    controlId: string\n  ) {\n    this.updateControl({\n      userFormId: this.userFormId,\n      controlId: controlId,\n      propertyName: propertyName,\n      value: propertyValue\n    })\n  }\n  getdisableStyle (id: string) {\n    let disabled: boolean = true\n    const selected = this.selectedControls[this.userFormId].selected\n    const selContainer = this.selectedControls[this.userFormId].container\n    const userData = this.userformData[this.userFormId]\n    if (id === 'unGroup') {\n      let groupId: boolean = false\n      const selectedGroupArray = selected.filter(\n        (val: string) => val.startsWith('group') && val\n      )\n      if (selectedGroupArray.length === 1 && selected.length === 1) {\n        disabled = false\n      }\n    }\n    if (id === 'group') {\n      disabled = selected.length <= 1\n    }\n    if (id === 'sizeToGrid' || id === 'centreInForm') {\n      disabled = !(selected.length >= 1 && selected[0] !== selContainer[0])\n    }\n    if (id === 'sizeToFit') {\n      const selSelected = []\n      for (const control of this.selectedControls[this.userFormId].selected) {\n        if (!control.startsWith('group')) {\n          const type = this.userformData[this.userFormId][control].type\n          if (type !== 'MultiPage' && type !== 'Frame' && type !== 'ListBox' && type !== 'Page' && type !== 'TabStrip' && type !== 'Userform') {\n            selSelected.push(control)\n          }\n        }\n      }\n      disabled = !(selSelected.length >= 1)\n    }\n    if (id === 'order') {\n      disabled = !(selected.length >= 1 && userData[selContainer[0]].controls.length >= 2)\n    }\n    if (id === 'makeEqual') {\n      disabled = !(selected.length >= 3)\n    }\n    if (id === 'incDecspacing' || id === 'removeSpace') {\n      disabled = !(selected.length >= 2)\n    }\n    if (id === 'arrangeButton') {\n      const buttonArray = []\n      for (let index = 0; index < selected.length; index++) {\n        if (!selected[index].startsWith('group')) {\n          const controlprop = userData[selected[index]]\n          if (controlprop.type === 'CommandButton') {\n            buttonArray.push(selected[index])\n          }\n        }\n      }\n      disabled = !(buttonArray.length >= 1)\n    }\n    return disabled\n  }\n  bringForward () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl = []\n    const lowProrControl = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    let nextSelctedSeries: string[] = []\n    let nextHighControlSeries: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl!) {\n      const type = userData[selControl].type\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex + 1)\n      })\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\n      const nextControlType = userData[nextSelectedControl].type\n      if (nextSelectedControl !== '' && !highProrControl.includes(nextSelectedControl)) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextSelctedSeries.includes(selControl)) {\n            nextSelctedSeries.push(selControl)\n          }\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\n            nextSelctedSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextSelctedSeries).length !== 0) {\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', swapTabIndex - (nextSelctedSeries!.length - 1))\n            }\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! + 1\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\n            }\n            nextSelctedSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      } else {\n        if (getSelControl!.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\n          if (!nextHighControlSeries.includes(selControl)) {\n            nextHighControlSeries.push(selControl)\n          }\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\n            nextHighControlSeries.push(nextSelectedControl)\n          }\n        } else if (type === 'Frame' || type === 'MultiPage' || type === 'ListBox') {\n          if (Object.keys(nextHighControlSeries).length !== 0) {\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', swapTabIndex - (nextHighControlSeries!.length - 1))\n            }\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! + 1\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\n            }\n            nextHighControlSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      }\n    }\n  }\n  sendBackward () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl = []\n    const lowProrControl = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    let nextSelctedSeries: string[] = []\n    let nextHighControlSeries: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl) {\n      const type = userData[selControl].type\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex - 1)\n      })\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\n      const nextControlType = userData[nextSelectedControl].type\n      if (nextSelectedControl !== '' && !highProrControl.includes(selControl)) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextSelctedSeries.includes(selControl)) {\n            nextSelctedSeries.push(selControl)\n          }\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\n            nextSelctedSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextSelctedSeries).length !== 0) {\n            console.log('nextSelctedSeries', nextSelctedSeries)\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', (nextSelctedSeries!.length + 1) - swapTabIndex)\n            }\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! - 1\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\n            }\n            nextSelctedSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      } else if (!lowProrControl.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextHighControlSeries.includes(selControl)) {\n            nextHighControlSeries.push(selControl)\n          }\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\n            nextHighControlSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextHighControlSeries).length !== 0) {\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', (nextHighControlSeries!.length + 1) - swapTabIndex)\n            }\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! - 1\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\n            }\n            nextHighControlSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.body {\n  width: 100%;\n  box-shadow: box-sizing;\n}\n.tablink {\n  background-color: rgba(240, 234, 234, 0.877);\n  color: rgb(17, 17, 17);\n  padding: 5px;\n  cursor: pointer;\n  font-size: 12px;\n  border: none;\n  float: left;\n}\n.sub-menu-li {\n  display: grid;\n  grid-template-columns: 25px 1fr;\n}\n.thirdrow {\n  margin-top: 5px;\n}\n.tablink:hover {\n  background-color: #4dbce0;\n}\n\n.firstrow {\n  font-size: 15px;\n}\n.secondrow {\n  border: 1px transparent;\n  padding: 5px;\n  background-color: rgba(240, 234, 234, 0.877);\n  height: 20px;\n  display: flex;\n}\n.buttons {\n  float: right;\n  line-height: normal;\n}\n.min .max .close1 {\n  width: 40px;\n}\n.close1:hover {\n  background-color: red;\n}\n.fa {\n  margin-left: 3px;\n  margin-right: 3px;\n}\n.padding {\n  padding-top: 3px;\n}\n.material-icons {\n  size: 15px;\n}\n.material-float {\n  float: left;\n}\ni:hover {\n  background-color: #4dbce0;\n  cursor: default;\n}\n\n.ui-titlebar {\n  display: flex;\n  width: 100%;\n  height: 32px;\n  background: #0072c6;\n  user-select: none;\n  cursor: default;\n}\n.ui-titleicon {\n  flex-grow: 1;\n  max-width: 32px;\n  max-height: 32px;\n}\n.ui-titletext {\n  flex-grow: 2;\n  max-height: 32px;\n  width: auto;\n  font: 12px/32px \"Segoe UI\", Arial, sans-serif;\n  color: #fff;\n  text-indent: 10px;\n}\n.ui-titlecontrols {\n  max-width: 144px;\n  max-height: 32px;\n  flex-grow: 1;\n}\n.ui-btn {\n  margin: 0;\n  width: 48px;\n  height: 32px;\n  border: 0;\n  outline: 0;\n  background: transparent;\n}\n.ui-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n.ui-btn.close:hover {\n  background: #e81123;\n}\nhr {\n  margin: 0px;\n}\n.ui-btn svg path,\n.ui-btn svg rect,\n.ui-btn svg polygon {\n  fill: #fff;\n}\n.ui-btn svg {\n  width: 10px;\n  height: 10px;\n}\n\n.dropdown-content {\n  display: none;\n  position: absolute;\n  background-color: #f1f1f1;\n  min-width: 160px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n}\n\n.dropdown-content a {\n  color: black;\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n}\n\n.dropdown-content a:hover {\n  background-color: #ddd;\n}\n\n.tablink:hover .dropdown-content {\n  display: block;\n}\n.dropdown {\n  position: relative;\n  display: inline-block;\n}\n\n.commandbutton-element {\n  border: 1px solid gray;\n  border-radius: 3px;\n  background-color: white;\n  min-width: 50px;\n  max-width: 112px;\n  width: fit-content;\n  height: fit-content;\n  min-height: 20px;\n  padding: 0px 5px 0px 5px;\n  overflow: hidden;\n}\n.dialog-action-button {\n  background-color: #f2eded;\n  width: 79px;\n  height: 35px;\n  padding-left: 5px;\n  padding-right: 5px;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border: 1px solid gray;\n  border-radius: 3px;\n  overflow: hidden;\n}\n.btn-style {\n  border: 1px solid gray;\n  border-radius: 5px;\n  background-color: white;\n  min-width: 50px;\n  max-width: 112px;\n  width: fit-content;\n  height: fit-content;\n  min-height: 20px;\n  padding: 0px 5px 0px 5px;\n  overflow: hidden;\n  top: -3px;\n  position: relative;\n}\n:focus {\n  outline: none;\n}\n.menu-bar {\n  background: rgba(240, 234, 234);\n  line-height: 24px;\n  cursor: context-menu;\n  margin-left: 3px;\n}\n\n.menu-bar ul {\n  display: inline-flex;\n  list-style: none;\n  margin: 0px;\n}\n\n.menu-bar ul > li {\n  list-style: none;\n  text-align: center;\n  padding: 0px 6px;\n  font-size: 12px;\n}\n\n.menu-bar ul li a {\n  text-decoration: none;\n  margin-left: -15px;\n}\n.menu-bar ul li a:visited {\n  color: black;\n}\n.menu-bar ul {\n  background-color: rgba(240, 234, 234);\n  padding: 0px;\n}\n\n.active,\n.menu-bar ul li:hover {\n  background-color: white;\n  z-index: 10;\n}\n\n.sub-menu-1 {\n  display: none;\n  box-shadow: 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.menu-bar ul li:hover .sub-menu-1 {\n  display: block;\n  position: absolute;\n}\n\n.sub-menu-1 ul li {\n  text-align: left;\n  border: 0.1px solid white;\n  display: grid;\n  grid-template-columns: 30px 150px;\n  word-wrap: none;\n}\n\n.sub-menu-1 ul {\n  display: grid;\n  grid-template-columns: 1fr;\n  background-color: white;\n  width: 200px;\n  padding: 0px;\n  margin-left: -6px;\n}\n\n.sub-menu-1 ul li:hover {\n  background-color: rgb(155, 215, 255);\n  border-color: rgb(0, 153, 255);\n}\n</style>\n"]}]}