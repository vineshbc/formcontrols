{"remainingRequest":"/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/atoms/FDEditableText/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/atoms/FDEditableText/index.vue","mtime":1610544258554},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlLCBSZWYgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwoKQENvbXBvbmVudCh7CiAgbmFtZTogJ0ZERWRpdGFibGVUZXh0Jwp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBGREVkaXRhYmxlVGV4dCBleHRlbmRzIFZ1ZSB7CiAgQFByb3AoKSBwcml2YXRlIGVkaXRhYmxlISA6IGJvb2xlYW4KICBAUHJvcCgpIHByaXZhdGUgY2FwdGlvbiEgOiBzdHJpbmcKCiAgQFJlZignbGFiZWxBcmVhJykgcmVhZG9ubHkgbGFiZWxBcmVhISA6IEhUTUxTcGFuRWxlbWVudAoKICBtb3VudGVkICgpIHsKICAgIHRoaXMubGFiZWxBcmVhLmlubmVyVGV4dCA9IHRoaXMuY2FwdGlvbgogICAgdGhpcy5sYWJlbEFyZWEuZm9jdXMoKQogIH0KCiAgZXZlbnRTdG9wcGVycyAoKSB7CiAgICBjb25zdCBldmVudFN0b3AgPSAoZXZlbnQ6IEV2ZW50KSA9PiBldmVudC5zdG9wUHJvcGFnYXRpb24oKQogICAgcmV0dXJuIHRoaXMuZWRpdGFibGUgPT09IGZhbHNlID8gbnVsbCA6IHsKICAgICAgbW91c2Vkb3duOiBldmVudFN0b3AsCiAgICAgIGtleWRvd246IHRoaXMua2V5ZG93bkhhbmRsZSwKICAgICAgY2xpY2s6IGV2ZW50U3RvcAogICAgfQogIH0KCiAga2V5ZG93bkhhbmRsZSAoZTogS2V5Ym9hcmRFdmVudCkgewogICAgZS5zdG9wUHJvcGFnYXRpb24oKQogICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykgewogICAgICB0aGlzLiRlbWl0KCdyZWxlYXNlRWRpdE1vZGUnKQogICAgfQogICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgfQogIH0KCiAgb25JbnB1dCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHsKICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZUNhcHRpb24nLCB0aGlzLmxhYmVsQXJlYS5pbm5lclRleHQpCiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/atoms/FDEditableText","sourcesContent":["<template>\n  <span\n    class=\"editText\"\n    ref=\"labelArea\"\n    role=\"textbox\"\n    contenteditable=\"true\"\n    :readonly=\"editable === false\"\n    @input=\"onInput\"\n    v-on=\"eventStoppers()\">\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue, Ref } from 'vue-property-decorator'\n\n@Component({\n  name: 'FDEditableText'\n})\nexport default class FDEditableText extends Vue {\n  @Prop() private editable! : boolean\n  @Prop() private caption! : string\n\n  @Ref('labelArea') readonly labelArea! : HTMLSpanElement\n\n  mounted () {\n    this.labelArea.innerText = this.caption\n    this.labelArea.focus()\n  }\n\n  eventStoppers () {\n    const eventStop = (event: Event) => event.stopPropagation()\n    return this.editable === false ? null : {\n      mousedown: eventStop,\n      keydown: this.keydownHandle,\n      click: eventStop\n    }\n  }\n\n  keydownHandle (e: KeyboardEvent) {\n    e.stopPropagation()\n    if (e.key === 'Escape') {\n      this.$emit('releaseEditMode')\n    }\n    if (e.key === 'Enter') {\n      e.preventDefault()\n    }\n  }\n\n  onInput (event: KeyboardEvent) {\n    this.$emit('updateCaption', this.labelArea.innerText)\n  }\n}\n</script>\n\n<style scoped>\n  .editText {\n    display: block;\n    text-align: inherit;\n    background: inherit;\n    font: inherit;\n    border: none;\n    outline: none;\n    padding: 0;\n    resize: none;\n    overflow: hidden;\n    text-decoration: inherit;\n    color: inherit;\n    white-space: inherit;\n    word-break: inherit;\n  }\n</style>\n"]}]}