{"remainingRequest":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/formcontrols/src/FormDesigner/components/organisms/FDGroupControl/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/hancom/formcontrols/src/FormDesigner/components/organisms/FDGroupControl/index.vue","mtime":1610544258558},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBQcm9wLCBXYXRjaCwgUmVmIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKaW1wb3J0IHsKICBJc2VsZWN0Q29udHJvbCwKICBJdXBkYXRlQ29udHJvbCwKICBJdXBkYXRlR3JvdXAKfSBmcm9tICdAL3N0b3JlTW9kdWxlcy9mZC9hY3Rpb25zJwppbXBvcnQgeyBTdGF0ZSwgQWN0aW9uIH0gZnJvbSAndnVleC1jbGFzcycKaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICdAL0Zvcm1EZXNpZ25lci9ldmVudC1idXMnCmltcG9ydCBGRENvbW1vbk1ldGhvZCBmcm9tICdAL2FwaS9hYnN0cmFjdC9Gb3JtRGVzaWduZXIvRkRDb21tb25NZXRob2QnCkBDb21wb25lbnQoewogIG5hbWU6ICdHcm91cENvbnRyb2wnLAogIGNvbXBvbmVudHM6IHt9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdyb3VwQ29udHJvbCBleHRlbmRzIEZEQ29tbW9uTWV0aG9kIHsKICBAU3RhdGUoKHN0YXRlKSA9PiBzdGF0ZS5mZC5ncm91cGVkQ29udHJvbHMpIGdyb3VwZWRDb250cm9scyE6IGdyb3VwZWRDb250cm9sczsKICBAU3RhdGUoKHN0YXRlKSA9PiBzdGF0ZS5mZC5zZWxlY3RlZENvbnRyb2xzKQogIHNlbGVjdGVkQ29udHJvbHMhOiBmZFN0YXRlWydzZWxlY3RlZENvbnRyb2xzJ107CiAgQFN0YXRlKChzdGF0ZSkgPT4gc3RhdGUuZmQudXNlcmZvcm1EYXRhKSB1c2VyZm9ybURhdGEhOiB1c2VyZm9ybURhdGE7CgogIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6IEFycmF5IH0pIHB1YmxpYyBjdXJyZW50U2VsZWN0ZWRHcm91cCE6IHN0cmluZ1tdOwogIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6IFN0cmluZyB9KSBwdWJsaWMgdXNlckZvcm1JZCE6IHN0cmluZzsKICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSkgcHVibGljIGNvbnRhaW5lcklkITogc3RyaW5nOwogIEBQcm9wKCkgY29udHJvbFJlZjogYW55OwoKICBAQWN0aW9uKCdmZC91cGRhdGVDb250cm9sJykgdXBkYXRlQ29udHJvbCE6IChwYXlsb2FkOiBJdXBkYXRlQ29udHJvbCkgPT4gdm9pZDsKICBAQWN0aW9uKCdmZC91cGRhdGVHcm91cCcpIHVwZGF0ZUdyb3VwITogKHBheWxvYWQ6IEl1cGRhdGVHcm91cCkgPT4gdm9pZDsKICBAQWN0aW9uKCdmZC9zZWxlY3RDb250cm9sJykgc2VsZWN0Q29udHJvbCE6IChwYXlsb2FkOiBJc2VsZWN0Q29udHJvbCkgPT4gdm9pZDsKCiAgZGl2U3R5bGVBcnJheTogQXJyYXk8SUdyb3VwU3R5bGU+ID0gW107CiAgcmVzaXplRGl2OiBzdHJpbmcgPSAnJzsKCiAgcG9zaXRpb25zOiBJTW91c2VQb3NpdGlvbiA9IHsKICAgIGNsaWVudFg6IDAsCiAgICBjbGllbnRZOiAwLAogICAgbW92ZW1lbnRYOiAwLAogICAgbW92ZW1lbnRZOiAwLAogICAgb2Zmc2V0WDogMCwKICAgIG9mZnNldFk6IDAKICB9OwogIGdyb3VwTmFtZTogc3RyaW5nID0gJyc7CiAgY291bnQ6IG51bWJlciA9IDA7CiAgY3VycmVudE1vdXNlRG93bkV2ZW50OiBDdXN0b21Nb3VzZUV2ZW50IHwgbnVsbCA9IG51bGw7CiAgY29udHJvbDogc3RyaW5nID0gJycKICBjb250YWluZXI6IHN0cmluZyA9ICcnCiAgY3JlYXRlR3JvdXAgKGdyb3VwTmFtZTogc3RyaW5nKSB7CiAgICB0aGlzLmdyb3VwU3R5bGUoZ3JvdXBOYW1lKQogIH0KICB2YWx1ZSA9ICdkaWZmZXJlbnQnCiAgaXNNYWluU2VsZWN0ID0gZmFsc2U7CiAgaXNNb3ZlOiBib29sZWFuID0gZmFsc2UKICB0ZW1wRXZlbnQgPSB7fQoKICBjcmVhdGVkICgpIHsKICAgIEV2ZW50QnVzLiRvbignZ2V0R3JvdXBNb3ZlVmFsdWUnLCB0aGlzLmdldEdyb3VwTW92ZVZhbHVlKQogICAgRXZlbnRCdXMuJG9uKCdzdGFydEdyb3VwTW92ZUNvbnRyb2wnLCB0aGlzLnN0YXJ0R3JvdXBNb3ZlQ29udHJvbCkKICAgIEV2ZW50QnVzLiRvbignbW92ZUdyb3VwQ29udHJvbCcsIHRoaXMubW92ZUdyb3VwQ29udHJvbCkKICAgIEV2ZW50QnVzLiRvbignZW5kR3JvdXBNb3ZlQ29udHJvbCcsIHRoaXMuZW5kR3JvdXBNb3ZlQ29udHJvbCkKICAgIEV2ZW50QnVzLiRvbignZ2V0Q2xpZW50VmFsdWUnLCB0aGlzLmdldENsaWVudFZhbHVlKQogICAgRXZlbnRCdXMuJG9uKCd1cGRhc3RlR3JvdXBTaXplJywgdGhpcy51cGRhc3RlR3JvdXBTaXplKQogICAgRXZlbnRCdXMuJG9uKCdnZXRHcm91cFNpemUnLCB0aGlzLmdldEdyb3VwU2l6ZSkKICB9CiAgZGVzdHJveWVkICgpIHsKICAgIEV2ZW50QnVzLiRvZmYoJ2dldEdyb3VwTW92ZVZhbHVlJywgdGhpcy5nZXRHcm91cE1vdmVWYWx1ZSkKICAgIEV2ZW50QnVzLiRvZmYoJ3N0YXJ0R3JvdXBNb3ZlQ29udHJvbCcsIHRoaXMuc3RhcnRHcm91cE1vdmVDb250cm9sKQogICAgRXZlbnRCdXMuJG9mZignbW92ZUdyb3VwQ29udHJvbCcsIHRoaXMubW92ZUdyb3VwQ29udHJvbCkKICAgIEV2ZW50QnVzLiRvZmYoJ2VuZEdyb3VwTW92ZUNvbnRyb2wnLCB0aGlzLmVuZEdyb3VwTW92ZUNvbnRyb2wpCiAgICBFdmVudEJ1cy4kb2ZmKCdnZXRDbGllbnRWYWx1ZScsIHRoaXMuZ2V0Q2xpZW50VmFsdWUpCiAgICBFdmVudEJ1cy4kb2ZmKCd1cGRhc3RlR3JvdXBTaXplJywgdGhpcy51cGRhc3RlR3JvdXBTaXplKQogICAgRXZlbnRCdXMuJG9uKCdnZXRHcm91cFNpemUnLCB0aGlzLmdldEdyb3VwU2l6ZSkKICB9CiAgdXBkYXN0ZUdyb3VwU2l6ZSAocHJvcE5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzLCBwcm9wZXJ0eVZhbHVlOiBudW1iZXIsIGdyb3VwSW5kZXg6IG51bWJlcikgewogICAgaWYgKHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXSA9PT0gdGhpcy5jb250YWluZXJJZCkgewogICAgICBpZiAocHJvcE5hbWUgPT09ICdHcm91cElEJykgewogICAgICAgIHRoaXMuZGl2U3R5bGVBcnJheVtncm91cEluZGV4XS5sZWZ0ID0gYCR7TWF0aC50cnVuYyhwYXJzZUludCh0aGlzLmRpdlN0eWxlQXJyYXlbZ3JvdXBJbmRleF0ubGVmdCEpKX1weGAKICAgICAgICB0aGlzLmRpdlN0eWxlQXJyYXlbZ3JvdXBJbmRleF0uaGVpZ2h0ID0gYCR7TWF0aC50cnVuYyhwYXJzZUludCh0aGlzLmRpdlN0eWxlQXJyYXlbZ3JvdXBJbmRleF0uaGVpZ2h0ISkpfXB4YAogICAgICAgIHRoaXMuZGl2U3R5bGVBcnJheVtncm91cEluZGV4XS50b3AgPSBgJHtNYXRoLnRydW5jKHBhcnNlSW50KHRoaXMuZGl2U3R5bGVBcnJheVtncm91cEluZGV4XS50b3AhKSl9cHhgCiAgICAgICAgdGhpcy5kaXZTdHlsZUFycmF5W2dyb3VwSW5kZXhdLndpZHRoID0gYCR7TWF0aC50cnVuYyhwYXJzZUludCh0aGlzLmRpdlN0eWxlQXJyYXlbZ3JvdXBJbmRleF0ud2lkdGghKSl9cHhgCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ncm91cFN0eWxlKHRoaXMuZGl2U3R5bGVBcnJheVtncm91cEluZGV4XS5ncm91cE5hbWUhKQogICAgICAgIHRoaXMudXBkYXRlZFZhbHVlKGdyb3VwSW5kZXgsIHByb3BOYW1lLCBwcm9wZXJ0eVZhbHVlKQogICAgICAgIHRoaXMuZ3JvdXBTdHlsZSh0aGlzLmRpdlN0eWxlQXJyYXlbZ3JvdXBJbmRleF0uZ3JvdXBOYW1lISkKICAgICAgfQogICAgfQogIH0KICB1cGRhdGVkVmFsdWUgKGdyb3VwSW5kZXg6IG51bWJlciwgcHJvcE5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzLCBkaWZmOiBudW1iZXIpIHsKICAgIGZvciAoY29uc3QgaiBpbiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuY29udGFpbmVySWRdLmNvbnRyb2xzKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRhaW5lcklkXS5jb250cm9sc1tqXQogICAgICBjb25zdCBjb250cm9sUHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1baW5kZXhdLnByb3BlcnRpZXMKICAgICAgY29uc3QgZGl2U3R5bGUgPSB0aGlzLmRpdlN0eWxlQXJyYXlbZ3JvdXBJbmRleF0KICAgICAgaWYgKGNvbnRyb2xQcm9wLkdyb3VwSUQgJiYgY29udHJvbFByb3AuR3JvdXBJRCA9PT0gZGl2U3R5bGUuZ3JvdXBOYW1lKSB7CiAgICAgICAgaWYgKHByb3BOYW1lID09PSAnTGVmdCcpIHsKICAgICAgICAgIGxldCBsZWZ0OiBudW1iZXIgPSBkaWZmICsgdGhpcy5sZWZ0QXJyYXlbal0KICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEFjdGlvbihwcm9wTmFtZSwgbGVmdCwgaW5kZXgpCiAgICAgICAgfSBlbHNlIGlmIChwcm9wTmFtZSA9PT0gJ1RvcCcpIHsKICAgICAgICAgIGxldCB0b3A6IG51bWJlciA9IGRpZmYgKyB0aGlzLnRvcEFycmF5W2pdCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24ocHJvcE5hbWUsIHRvcCwgaW5kZXgpCiAgICAgICAgfSBlbHNlIGlmIChwcm9wTmFtZSA9PT0gJ1dpZHRoJykgewogICAgICAgICAgbGV0IGxlZnQgPSAoZGlmZiAqIHRoaXMubGVmdEFycmF5W2pdKSAvIHBhcnNlSW50KGRpdlN0eWxlLndpZHRoISkgKyBwYXJzZUludChkaXZTdHlsZS5sZWZ0ISkKICAgICAgICAgIGxldCB3aWR0aCA9IGRpZmYgKiB0aGlzLnBlcmN3aWR0aEFycmF5W2pdCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ0xlZnQnLCBsZWZ0LCBpbmRleCkKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEFjdGlvbihwcm9wTmFtZSwgd2lkdGgsIGluZGV4KQogICAgICAgIH0gZWxzZSBpZiAocHJvcE5hbWUgPT09ICdIZWlnaHQnKSB7CiAgICAgICAgICBsZXQgdG9wID0gKGRpZmYgKiB0aGlzLnRvcEFycmF5W2pdKSAvIHBhcnNlSW50KGRpdlN0eWxlLmhlaWdodCEpICsgcGFyc2VJbnQoZGl2U3R5bGUudG9wISkKICAgICAgICAgIGxldCBoZWlnaHQgPSBkaWZmICogdGhpcy5wZXJjaGVpZ2h0QXJyYXlbal0KICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEFjdGlvbignVG9wJywgdG9wLCBpbmRleCkKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEFjdGlvbihwcm9wTmFtZSwgaGVpZ2h0LCBpbmRleCkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgZ2V0Q2xpZW50VmFsdWUgKHZhbHVlOiBzdHJpbmcsIGNvbnRhaW5lclg6IG51bWJlciwgY29udGFpbmVyWTogbnVtYmVyLCBldmVudDogTW91c2VFdmVudCwgY29udGFpbmVyOiBzdHJpbmcsIHByZXZpb3VzRXZlbnQ6IE1vdXNlRXZlbnQpIHsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZQogICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXIKICAgIGlmIChjb250YWluZXIgPT09IHRoaXMuY29udGFpbmVySWQpIHsKICAgICAgdGhpcy5wb3NpdGlvbnMuY2xpZW50WCA9IHByZXZpb3VzRXZlbnQuY2xpZW50WAogICAgICB0aGlzLnBvc2l0aW9ucy5jbGllbnRZID0gcHJldmlvdXNFdmVudC5jbGllbnRZCiAgICAgIHRoaXMucG9zaXRpb25zLm9mZnNldFggPSBwcmV2aW91c0V2ZW50Lm9mZnNldFgKICAgICAgdGhpcy5wb3NpdGlvbnMub2Zmc2V0WSA9IHByZXZpb3VzRXZlbnQub2Zmc2V0WQogICAgICB0aGlzLmVsZW1lbnRNb3VzZURyYWcoZXZlbnQsIGNvbnRhaW5lclgsIGNvbnRhaW5lclksIHByZXZpb3VzRXZlbnQpCiAgICB9CiAgfQogIGdldEdyb3VwTW92ZVZhbHVlIChjYWxsQmFjazogRnVuY3Rpb24pIHsKICAgIGNhbGxCYWNrKAogICAgICB0aGlzLnBvc2l0aW9ucy5vZmZzZXRYLAogICAgICB0aGlzLnBvc2l0aW9ucy5vZmZzZXRZLAogICAgICB0aGlzLmNvbnRyb2wsCiAgICAgIHRoaXMudGVtcEV2ZW50CiAgICApCiAgfQogIGdldEdyb3VwU2l6ZSAoY2FsbEJhY2s6IEZ1bmN0aW9uKSB7CiAgICBpZiAodGhpcy5jb250YWluZXJJZCA9PT0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdKSB7CiAgICAgIGNhbGxCYWNrKHRoaXMuZGl2U3R5bGVBcnJheSkKICAgIH0KICB9CiAgZW5kR3JvdXBNb3ZlQ29udHJvbCAoKSB7CiAgICAvLyBpZiAodGhpcy5nZXRJc01vdmVUYXJnZXQpIHsKICAgIHRoaXMucG9zaXRpb25zLm1vdmVtZW50WCA9IDAKICAgIHRoaXMucG9zaXRpb25zLm1vdmVtZW50WSA9IDAKICAgIC8vIHRoaXMuaXNNb3ZlID0gZmFsc2UKICAgIC8vIH0KICB9CiAgdG9wQXJyYXk6IG51bWJlcltdID0gW107CiAgbGVmdEFycmF5OiBudW1iZXJbXSA9IFtdOwoKICBwZXJjd2lkdGhBcnJheTogbnVtYmVyW10gPSBbXTsKICBwZXJjaGVpZ2h0QXJyYXk6IG51bWJlcltdID0gW107CgogIGluaXRpYWxBcnJheTogQXJyYXk8SUdyb3VwU3R5bGU+ID0gW107CgogIGdldCBnZXRJc01vdmVUYXJnZXQgKCkgewogICAgY29uc3QgaXNHcm91cFByc2VudCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkLmZpbmRJbmRleCgodmFsOiBzdHJpbmcpID0+IHsKICAgICAgdmFsLnN0YXJ0c1dpdGgoJ2dyb3VwJykKICAgIH0pCiAgICByZXR1cm4gaXNHcm91cFByc2VudCA9PT0gLTEKICB9CiAgc3RhcnRHcm91cE1vdmVDb250cm9sIChldmVudDogTW91c2VFdmVudCkgewogICAgaWYgKHRoaXMuZ2V0SXNNb3ZlVGFyZ2V0KSB7CiAgICAgIHRoaXMucG9zaXRpb25zLmNsaWVudFggPSBldmVudC5jbGllbnRYCiAgICAgIHRoaXMucG9zaXRpb25zLmNsaWVudFkgPSBldmVudC5jbGllbnRZCiAgICB9CiAgfQoKICBtb3ZlR3JvdXBDb250cm9sIChldmVudDogTW91c2VFdmVudCkgewogICAgaWYgKHRoaXMuZ2V0SXNNb3ZlVGFyZ2V0KSB7CiAgICAgIC8vICAgdGhpcy5tb3ZlQm9yZGVyKGV2ZW50KQogICAgICBpZiAoZXZlbnQubW92ZW1lbnRYICE9PSAwICYmIGV2ZW50Lm1vdmVtZW50WSAhPT0gMCkgewogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdncm91cERyYWcnLCAnZ3JvdXBkcmFnJykKICAgICAgICB0aGlzLmlzTW92ZSA9IHRydWUKICAgICAgICAvLyB0aGlzLnVwZGF0ZUlzTW92ZSh0cnVlKQogICAgICB9CiAgICB9CiAgfQoKICB1cGRhdGVDb250cm9sQWN0aW9uICgKICAgIHByb3BlcnR5TmFtZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMsCiAgICBwcm9wZXJ0eVZhbHVlOiBudW1iZXIsCiAgICBjb250cm9sSWQ6IHN0cmluZwogICkgewogICAgdGhpcy51cGRhdGVDb250cm9sKHsKICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICBjb250cm9sSWQ6IGNvbnRyb2xJZCwKICAgICAgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsCiAgICAgIHZhbHVlOiBwcm9wZXJ0eVZhbHVlCiAgICB9KQogIH0KICBoYW5kbGVyU3R5bGUgKGdyb3VwTmFtZTogc3RyaW5nKSB7CiAgICBjb25zdCBpc0dyb3VwOiBzdHJpbmcgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXQogICAgcmV0dXJuIHsKICAgICAgYmFja2dyb3VuZENvbG9yOiBpc0dyb3VwID09PSBncm91cE5hbWUgPyAnd2hpdGUnIDogJ2JsYWNrJywKICAgICAgYm9yZGVyQ29sb3I6IGlzR3JvdXAgPT09IGdyb3VwTmFtZSA/ICdibGFjaycgOiAnd2hpdGUnCiAgICB9CiAgfQogIGdyb3VwU3R5bGUgKGdyb3VwTmFtZTogc3RyaW5nKSB7CiAgICB0aGlzLmNvdW50ICs9IDEKICAgIGxldCBpbmRleCA9IHRoaXMuZGl2U3R5bGVBcnJheS5maW5kSW5kZXgoCiAgICAgIChwOiBJR3JvdXBTdHlsZSkgPT4gcC5ncm91cE5hbWUgPT09IGdyb3VwTmFtZQogICAgKQogICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICB0aGlzLmRpdlN0eWxlQXJyYXkucHVzaCh7CiAgICAgICAgbGVmdDogJzBweCcsCiAgICAgICAgdG9wOiAnMHB4JywKICAgICAgICB3aWR0aDogJzBweCcsCiAgICAgICAgaGVpZ2h0OiAnMHB4JywKICAgICAgICBkaXNwbGF5OiAnbm9uZScsCiAgICAgICAgZ3JvdXBOYW1lOiBncm91cE5hbWUKICAgICAgfSkKICAgIH0KICAgIGNvbnN0IHN0eWxlTGVmdDogbnVtYmVyW10gPSBbXQogICAgY29uc3Qgc3R5bGVXaWR0aDogbnVtYmVyW10gPSBbXQogICAgY29uc3Qgc3R5bGVUb3A6IG51bWJlcltdID0gW10KICAgIGNvbnN0IHN0eWxlSGVpZ2h0OiBudW1iZXJbXSA9IFtdCiAgICBmb3IgKGNvbnN0IGNvbnRyb2wgb2YgdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRhaW5lcklkXQogICAgICAuY29udHJvbHMpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udHJvbF0ucHJvcGVydGllcy5Hcm91cElEID09PQogICAgICAgIGdyb3VwTmFtZQogICAgICApIHsKICAgICAgICBjb25zdCBjb250cm9scHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udHJvbF0KICAgICAgICAgIC5wcm9wZXJ0aWVzCiAgICAgICAgc3R5bGVMZWZ0LnB1c2goY29udHJvbHByb3AuTGVmdCEpCiAgICAgICAgc3R5bGVUb3AucHVzaChjb250cm9scHJvcC5Ub3AhKQogICAgICAgIHN0eWxlV2lkdGgucHVzaChjb250cm9scHJvcC5XaWR0aCEgKyBjb250cm9scHJvcC5MZWZ0ISkKICAgICAgICBzdHlsZUhlaWdodC5wdXNoKGNvbnRyb2xwcm9wLkhlaWdodCEgKyBjb250cm9scHJvcC5Ub3AhKQogICAgICB9CiAgICB9CiAgICBpbmRleCA9IHRoaXMuZGl2U3R5bGVBcnJheS5maW5kSW5kZXgoCiAgICAgIChwOiBJR3JvdXBTdHlsZSkgPT4gcC5ncm91cE5hbWUgPT09IGdyb3VwTmFtZQogICAgKQogICAgdGhpcy5kaXZTdHlsZUFycmF5W2luZGV4XS5sZWZ0ID0gYCR7TWF0aC5taW4oLi4uc3R5bGVMZWZ0KX1weGAKICAgIHRoaXMuZGl2U3R5bGVBcnJheVtpbmRleF0udG9wID0gYCR7TWF0aC5taW4oLi4uc3R5bGVUb3ApfXB4YAogICAgdGhpcy5kaXZTdHlsZUFycmF5W2luZGV4XS53aWR0aCA9IGAkewogICAgICBNYXRoLm1heCguLi5zdHlsZVdpZHRoKSAtIE1hdGgubWluKC4uLnN0eWxlTGVmdCkKICAgIH1weGAKICAgIHRoaXMuZGl2U3R5bGVBcnJheVtpbmRleF0uaGVpZ2h0ID0gYCR7CiAgICAgIE1hdGgubWF4KC4uLnN0eWxlSGVpZ2h0KSAtIE1hdGgubWluKC4uLnN0eWxlVG9wKQogICAgfXB4YAoKICAgIHRoaXMudG9wQXJyYXkgPSBbXQogICAgdGhpcy5sZWZ0QXJyYXkgPSBbXQoKICAgIHRoaXMucGVyY3dpZHRoQXJyYXkgPSBbXQogICAgdGhpcy5wZXJjaGVpZ2h0QXJyYXkgPSBbXQoKICAgIGZvciAoY29uc3QgY29udHJvbCBvZiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuY29udGFpbmVySWRdLmNvbnRyb2xzKSB7CiAgICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250cm9sXS5wcm9wZXJ0aWVzCiAgICAgIGlmICh0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRyb2xdLnR5cGUgIT09ICdVc2Vmb3JtJykgewogICAgICAgIGlmIChjb250cm9sUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgZm9yIChjb25zdCBkaXZTdHlsZSBvZiB0aGlzLmRpdlN0eWxlQXJyYXkpIHsKICAgICAgICAgICAgaWYgKGNvbnRyb2xQcm9wLkdyb3VwSUQgPT09IGRpdlN0eWxlLmdyb3VwTmFtZSkgewogICAgICAgICAgICAgIHRoaXMudG9wQXJyYXkucHVzaChjb250cm9sUHJvcC5Ub3AhIC0gcGFyc2VJbnQoZGl2U3R5bGUudG9wISkpCgogICAgICAgICAgICAgIHRoaXMubGVmdEFycmF5LnB1c2goY29udHJvbFByb3AuTGVmdCEgLSBwYXJzZUludChkaXZTdHlsZS5sZWZ0ISkpCgogICAgICAgICAgICAgIHRoaXMucGVyY2hlaWdodEFycmF5LnB1c2goCiAgICAgICAgICAgICAgY29udHJvbFByb3AuSGVpZ2h0ISAvIHBhcnNlSW50KGRpdlN0eWxlLmhlaWdodCEpCiAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICB0aGlzLnBlcmN3aWR0aEFycmF5LnB1c2goCiAgICAgICAgICAgICAgY29udHJvbFByb3AuV2lkdGghIC8gcGFyc2VJbnQoZGl2U3R5bGUud2lkdGghKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnRvcEFycmF5LnB1c2goY29udHJvbFByb3AuVG9wISkKCiAgICAgICAgICB0aGlzLmxlZnRBcnJheS5wdXNoKGNvbnRyb2xQcm9wLkxlZnQhKQoKICAgICAgICAgIHRoaXMucGVyY2hlaWdodEFycmF5LnB1c2goY29udHJvbFByb3AuSGVpZ2h0ISkKCiAgICAgICAgICB0aGlzLnBlcmN3aWR0aEFycmF5LnB1c2goY29udHJvbFByb3AuV2lkdGghKQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgdGhpcy5pbml0aWFsQXJyYXkgPSBbXQogICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLmRpdlN0eWxlQXJyYXkubGVuZ3RoOyBrKyspIHsKICAgICAgdGhpcy5pbml0aWFsQXJyYXkucHVzaChPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRpdlN0eWxlQXJyYXlba10pKQogICAgfQogIH0KCiAgZGVBY3RHcm91cENvbnRyb2wgKCkgewogICAgY29uc3Qgc2VsQ29udHJvbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkCiAgICBpZiAoCiAgICAgIHRoaXMuY3VycmVudFNlbGVjdGVkR3JvdXAubGVuZ3RoID09PSAxICYmCiAgICAgIHNlbENvbnRyb2wubGVuZ3RoID09PSAxICYmCiAgICAgICFzZWxDb250cm9sWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykKICAgICkgewogICAgICBjb25zdCBjb250cm9sSWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXQogICAgICBpZiAoCiAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0ZWRHcm91cFswXSA9PT0KICAgICAgICB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRyb2xJZF0ucHJvcGVydGllcy5Hcm91cElEIQogICAgICApIHsKICAgICAgICB0aGlzLnNlbGVjdENvbnRyb2woewogICAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICAgICAgc2VsZWN0OiB7CiAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuY3VycmVudFNlbGVjdGVkR3JvdXBbMF0pLAogICAgICAgICAgICBzZWxlY3RlZDogW3RoaXMuY3VycmVudFNlbGVjdGVkR3JvdXBbMF1dCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0KCiAgaGFuZGxlTW91c2VEb3duIChldmVudDogQ3VzdG9tTW91c2VFdmVudCwgaGFuZGxlcjogc3RyaW5nKSB7CiAgICB0aGlzLnRlbXBFdmVudCA9IGV2ZW50CiAgICBFdmVudEJ1cy4kZW1pdCgnZ3JvdXBEcmFnJywgJ05vdERyYWcnKQogICAgdGhpcy5pc01vdmUgPSBmYWxzZQogICAgdGhpcy5kZUFjdEdyb3VwQ29udHJvbCgpCiAgICB0aGlzLnJlc2l6ZURpdiA9IGhhbmRsZXIKICAgIHRoaXMucG9zaXRpb25zLmNsaWVudFggPSBldmVudC5jbGllbnRYCiAgICB0aGlzLnBvc2l0aW9ucy5jbGllbnRZID0gZXZlbnQuY2xpZW50WQogICAgdGhpcy5jdXJyZW50TW91c2VEb3duRXZlbnQgPSBldmVudAogICAgaWYgKGhhbmRsZXIgIT09ICdkcmFnJykgewogICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IHRoaXMuZWxlbWVudERyYWcKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucG9zaXRpb25zLm9mZnNldFggPSBldmVudC5vZmZzZXRYCiAgICAgIHRoaXMucG9zaXRpb25zLm9mZnNldFkgPSBldmVudC5vZmZzZXRZCiAgICAgIHRoaXMuaXNNYWluU2VsZWN0ID0gdHJ1ZQogICAgICBFdmVudEJ1cy4kZW1pdCgnc3RhcnRHcm91cE1vdmVDb250cm9sJywgZXZlbnQpCiAgICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7CiAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ21vdmVHcm91cENvbnRyb2wnLCBldmVudCkKICAgICAgfQogICAgfQogICAgZG9jdW1lbnQub25tb3VzZXVwID0gKGV2ZW50KSA9PiB7CiAgICAgIHRoaXMuY2xvc2VEcmFnRWxlbWVudChldmVudCwgaGFuZGxlcikKICAgIH0KICB9CiAgZWxlbWVudE1vdXNlRHJhZyAoZXZlbnQ6IE1vdXNlRXZlbnQsIGNvbnRhaW5lclg6IG51bWJlciwgY29udGFpbmVyWTogbnVtYmVyLCBwcmV2aW91c0V2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICBpZiAodGhpcy5jb250YWluZXIgPT09IHRoaXMuY29udGFpbmVySWQpIHsKICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkKSB7CiAgICAgICAgaWYgKGkuc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRpdlN0eWxlQXJyYXkuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBpKQogICAgICAgICAgdGhpcy5kaXZTdHlsZUFycmF5W2luZGV4XS5kaXNwbGF5ID0gJ2Jsb2NrJwogICAgICAgICAgdGhpcy5ncm91cFN0eWxlKHRoaXMuZGl2U3R5bGVBcnJheVtpbmRleF0uZ3JvdXBOYW1lISkKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5yZXNpemVEaXYgPSAnZHJhZycKICAgICAgbGV0IHRhcmdldExlZnQgPSAtMQogICAgICBsZXQgdGFyZ2V0VG9wID0gLTEKICAgICAgY29uc3QgbWFpbiA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdCiAgICAgIGNvbnN0IGlzR3JvdXAgPSBtYWluLnN0YXJ0c1dpdGgoJ2dyb3VwJykgPyB0aGlzLmRpdlN0eWxlQXJyYXkuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBtYWluKSA6IC0xCiAgICAgIGlmIChpc0dyb3VwID09PSAtMSkgewogICAgICAgIGNvbnN0IHRhcmdldERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW21haW5dLnByb3BlcnRpZXMKICAgICAgICB0YXJnZXRMZWZ0ID0gdGFyZ2V0RGF0YS5MZWZ0IQogICAgICAgIHRhcmdldFRvcCA9IHRhcmdldERhdGEuVG9wIQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHRhcmdldERhdGEgPSB0aGlzLmRpdlN0eWxlQXJyYXlbaXNHcm91cF0KICAgICAgICB0YXJnZXRMZWZ0ID0gcGFyc2VJbnQodGFyZ2V0RGF0YS5sZWZ0ISkKICAgICAgICB0YXJnZXRUb3AgPSBwYXJzZUludCh0YXJnZXREYXRhLnRvcCEpCiAgICAgIH0KICAgICAgdGhpcy5wb3NpdGlvbnMubW92ZW1lbnRYID0gKHRhcmdldExlZnQpIC0gKGNvbnRhaW5lclggLSAodGhpcy5wb3NpdGlvbnMub2Zmc2V0WCEpKQogICAgICB0aGlzLnBvc2l0aW9ucy5tb3ZlbWVudFkgPSAodGFyZ2V0VG9wKSAtIChjb250YWluZXJZIC0gKHRoaXMucG9zaXRpb25zLm9mZnNldFkhKSkKICAgICAgY29uc3Qgc2NhbGU6IG51bWJlciA9IDEKICAgICAgY29uc3QgZ3JpZDogQXJyYXk8bnVtYmVyPiA9IFsxMCwgMTBdCiAgICAgIGNvbnN0IHg6IG51bWJlciA9CiAgICAgIE1hdGgucm91bmQodGhpcy5wb3NpdGlvbnMubW92ZW1lbnRYIC8gc2NhbGUgLyBncmlkWzBdKSAqIGdyaWRbMF0KICAgICAgY29uc3QgeTogbnVtYmVyID0KICAgICAgTWF0aC5yb3VuZCh0aGlzLnBvc2l0aW9ucy5tb3ZlbWVudFkgLyBzY2FsZSAvIGdyaWRbMV0pICogZ3JpZFsxXQoKICAgICAgaWYgKHRoaXMuY3VycmVudE1vdXNlRG93bkV2ZW50ICYmICh4ICE9PSAwIHx8IHkgIT09IDApKSB7CiAgICAgICAgdGhpcy5jdXJyZW50TW91c2VEb3duRXZlbnQuY3VzdG9tQ2FsbEJhY2sgJiYKICAgICAgICB0aGlzLmN1cnJlbnRNb3VzZURvd25FdmVudC5jdXN0b21DYWxsQmFjaygpCiAgICAgIH0KICAgICAgbGV0IGRyYWdSZXNpemVDb250cm9sOiBJR3JvdXBTdHlsZSA9IHt9CiAgICAgIGxldCBkcmFnUmVzaXplQ29udHJvbDE6IGNvbnRyb2xQcm9wZXJ0aWVzID0geyBJRDogJycgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRpdlN0eWxlQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmdyb3VwTmFtZSA9IHRoaXMuZGl2U3R5bGVBcnJheVtpXS5ncm91cE5hbWUhCiAgICAgICAgZHJhZ1Jlc2l6ZUNvbnRyb2wgPSB0aGlzLmRpdlN0eWxlQXJyYXlbaV0KICAgICAgICBpZiAoZHJhZ1Jlc2l6ZUNvbnRyb2wuZGlzcGxheSA9PT0gJ2Jsb2NrJykgewogICAgICAgICAgbGV0IHRvcDogbnVtYmVyID0gLTEKICAgICAgICAgIGxldCBsZWZ0OiBudW1iZXIgPSAtMQogICAgICAgICAgbGV0IGRlY0hlaWdodDogbnVtYmVyID0gLTEKICAgICAgICAgIHRvcCA9IHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLnRvcCEpIC0geQogICAgICAgICAgbGVmdCA9IHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLmxlZnQhKSAtIHgKCiAgICAgICAgICBpZiAodGhpcy5yZXNpemVEaXYgPT09ICdkcmFnJykgewogICAgICAgICAgICBkcmFnUmVzaXplQ29udHJvbC50b3AgPSBgJHt0b3B9cHhgCiAgICAgICAgICAgIGRyYWdSZXNpemVDb250cm9sLmxlZnQgPSBgJHtsZWZ0fXB4YAogICAgICAgICAgfQogICAgICAgICAgZm9yIChjb25zdCBqIGluIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250YWluZXJJZF0KICAgICAgICAgICAgLmNvbnRyb2xzKSB7CiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRhaW5lcklkXQogICAgICAgICAgICAgIC5jb250cm9sc1tqXQogICAgICAgICAgICBjb25zdCBjb250cm9sUHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1baW5kZXhdCiAgICAgICAgICAgICAgLnByb3BlcnRpZXMKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGNvbnRyb2xQcm9wLkdyb3VwSUQgPT09IHRoaXMuZGl2U3R5bGVBcnJheVtpXS5ncm91cE5hbWUgJiYKICAgICAgICAgICAgdGhpcy5kaXZTdHlsZUFycmF5W2ldLmRpc3BsYXkgPT09ICdibG9jaycKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgZHJhZ1Jlc2l6ZUNvbnRyb2wxID0gY29udHJvbFByb3AKICAgICAgICAgICAgICBpZiAodGhpcy5yZXNpemVEaXYgPT09ICdkcmFnJykgewogICAgICAgICAgICAgICAgdG9wID0gZHJhZ1Jlc2l6ZUNvbnRyb2wxLlRvcCEgLSB5CiAgICAgICAgICAgICAgICBsZWZ0ID0gZHJhZ1Jlc2l6ZUNvbnRyb2wxLkxlZnQhIC0geAogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sQWN0aW9uKCdUb3AnLCB0b3AsIGluZGV4KQogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sQWN0aW9uKCdMZWZ0JywgbGVmdCwgaW5kZXgpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGZvciAobGV0IGsgb2YgdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQpIHsKICAgICAgICBpZiAoIWsuc3RhcnRzV2l0aCgnSURfVVNFUkZPUk0nKSAmJiAhay5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgICBsZXQgZHJhZ1Jlc2l6ZVJlZmZlcjogSWRyYWdSZXNpemVSZWZTdHlsZSA9IHt9CiAgICAgICAgICBjb25zdCBjb250cm9sOiBjb250cm9sUHJvcGVydGllcyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1ba10KICAgICAgICAgICAgLnByb3BlcnRpZXMKICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuY29udHJvbFJlZi5yZXNpemVDb250cm9sKSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xSZWYucmVzaXplQ29udHJvbFtrZXldLiRyZWZzWydkcmFSZWYnLmNvbmNhdChjb250cm9sLklEKV0gIT09IHVuZGVmaW5lZAogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBkcmFnUmVzaXplUmVmZmVyID0gdGhpcy5jb250cm9sUmVmLnJlc2l6ZUNvbnRyb2xba2V5XS4kcmVmc1snZHJhUmVmJy5jb25jYXQoY29udHJvbC5JRCldCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHRvcCA9IGNvbnRyb2wuVG9wISAtIHkKICAgICAgICAgIGNvbnN0IGxlZnQgPSBjb250cm9sLkxlZnQhIC0geAoKICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZURpdiA9PT0gJ2RyYWcnKSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEFjdGlvbignVG9wJywgdG9wLCBrKQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ0xlZnQnLCBsZWZ0LCBrKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZWxlbWVudERyYWcgKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICB0aGlzLnBvc2l0aW9ucy5tb3ZlbWVudFggPSB0aGlzLnBvc2l0aW9ucy5jbGllbnRYIC0gZXZlbnQuY2xpZW50WAogICAgdGhpcy5wb3NpdGlvbnMubW92ZW1lbnRZID0gdGhpcy5wb3NpdGlvbnMuY2xpZW50WSAtIGV2ZW50LmNsaWVudFkKICAgIGNvbnN0IHNjYWxlOiBudW1iZXIgPSAxCiAgICBjb25zdCBncmlkOiBBcnJheTxudW1iZXI+ID0gWzEwLCAxMF0KICAgIGNvbnN0IHg6IG51bWJlciA9CiAgICAgIE1hdGgucm91bmQodGhpcy5wb3NpdGlvbnMubW92ZW1lbnRYIC8gc2NhbGUgLyBncmlkWzBdKSAqIGdyaWRbMF0KICAgIGNvbnN0IHk6IG51bWJlciA9CiAgICAgIE1hdGgucm91bmQodGhpcy5wb3NpdGlvbnMubW92ZW1lbnRZIC8gc2NhbGUgLyBncmlkWzFdKSAqIGdyaWRbMV0KCiAgICBpZiAodGhpcy5jdXJyZW50TW91c2VEb3duRXZlbnQgJiYgKHggIT09IDAgfHwgeSAhPT0gMCkpIHsKICAgICAgdGhpcy5jdXJyZW50TW91c2VEb3duRXZlbnQuY3VzdG9tQ2FsbEJhY2sgJiYKICAgICAgICB0aGlzLmN1cnJlbnRNb3VzZURvd25FdmVudC5jdXN0b21DYWxsQmFjaygpCiAgICB9CiAgICBjb25zdCBkaWZmR3JpZFg6IG51bWJlciA9IHggLSB0aGlzLnBvc2l0aW9ucy5tb3ZlbWVudFgKICAgIGNvbnN0IGRpZmZHcmlkWTogbnVtYmVyID0geSAtIHRoaXMucG9zaXRpb25zLm1vdmVtZW50WQoKICAgIHRoaXMucG9zaXRpb25zLmNsaWVudFggPSBldmVudC5jbGllbnRYIC0gZGlmZkdyaWRYCiAgICB0aGlzLnBvc2l0aW9ucy5jbGllbnRZID0gZXZlbnQuY2xpZW50WSAtIGRpZmZHcmlkWQoKICAgIGxldCBkcmFnUmVzaXplQ29udHJvbDogSUdyb3VwU3R5bGUgPSB7fQogICAgbGV0IGRyYWdSZXNpemVDb250cm9sMTogY29udHJvbFByb3BlcnRpZXMgPSB7IElEOiAnJyB9CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRpdlN0eWxlQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy5ncm91cE5hbWUgPSB0aGlzLmRpdlN0eWxlQXJyYXlbaV0uZ3JvdXBOYW1lIQogICAgICBkcmFnUmVzaXplQ29udHJvbCA9IHRoaXMuZGl2U3R5bGVBcnJheVtpXQogICAgICBpZiAoZHJhZ1Jlc2l6ZUNvbnRyb2wuZGlzcGxheSA9PT0gJ2Jsb2NrJykgewogICAgICAgIGxldCB0b3A6IG51bWJlciA9IC0xCiAgICAgICAgbGV0IGxlZnQ6IG51bWJlciA9IC0xCiAgICAgICAgbGV0IGluY1dpZHRoOiBudW1iZXIgPSAtMQogICAgICAgIGxldCBpbmNIZWlnaHQ6IG51bWJlciA9IC0xCiAgICAgICAgbGV0IGRlY1dpZHRoOiBudW1iZXIgPSAtMQogICAgICAgIGxldCBkZWNIZWlnaHQ6IG51bWJlciA9IC0xCiAgICAgICAgdG9wID0gcGFyc2VJbnQoZHJhZ1Jlc2l6ZUNvbnRyb2wudG9wISkgLSB5CiAgICAgICAgbGVmdCA9IHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLmxlZnQhKSAtIHgKICAgICAgICBpbmNXaWR0aCA9CiAgICAgICAgICBwYXJzZUludChkcmFnUmVzaXplQ29udHJvbC53aWR0aCEpICsgeCA+IDAKICAgICAgICAgICAgPyBwYXJzZUludChkcmFnUmVzaXplQ29udHJvbC53aWR0aCEpICsgeAogICAgICAgICAgICA6IDAKICAgICAgICBpbmNIZWlnaHQgPQogICAgICAgICAgcGFyc2VJbnQoZHJhZ1Jlc2l6ZUNvbnRyb2wuaGVpZ2h0ISkgKyB5ID4gMAogICAgICAgICAgICA/IHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLmhlaWdodCEpICsgeQogICAgICAgICAgICA6IDAKICAgICAgICBkZWNXaWR0aCA9CiAgICAgICAgICBwYXJzZUludChkcmFnUmVzaXplQ29udHJvbC53aWR0aCEpIC0geCA+IDAKICAgICAgICAgICAgPyBwYXJzZUludChkcmFnUmVzaXplQ29udHJvbC53aWR0aCEpIC0geAogICAgICAgICAgICA6IDAKICAgICAgICBkZWNIZWlnaHQgPQogICAgICAgICAgcGFyc2VJbnQoZHJhZ1Jlc2l6ZUNvbnRyb2wuaGVpZ2h0ISkgLSB5ID4gMAogICAgICAgICAgICA/IHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLmhlaWdodCEpIC0geQogICAgICAgICAgICA6IDAKCiAgICAgICAgaWYgKHRoaXMucmVzaXplRGl2ID09PSAnZHJhZycpIHsKICAgICAgICAgIGRyYWdSZXNpemVDb250cm9sLnRvcCA9IGAke3RvcH1weGAKICAgICAgICAgIGRyYWdSZXNpemVDb250cm9sLmxlZnQgPSBgJHtsZWZ0fXB4YAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy5yZXNpemVEaXYuaW5jbHVkZXMoJ3QnKSkgewogICAgICAgICAgICBpZiAoaW5jSGVpZ2h0ID4gMCkgewogICAgICAgICAgICAgIGRyYWdSZXNpemVDb250cm9sLnRvcCA9IGAke3RvcH1weGAKICAgICAgICAgICAgfQogICAgICAgICAgICBkcmFnUmVzaXplQ29udHJvbC5oZWlnaHQgPSBgJHtpbmNIZWlnaHR9cHhgCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVzaXplRGl2LmluY2x1ZGVzKCdiJykpIHsKICAgICAgICAgICAgZHJhZ1Jlc2l6ZUNvbnRyb2wuaGVpZ2h0ID0gYCR7ZGVjSGVpZ2h0fXB4YAogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZURpdi5pbmNsdWRlcygnbCcpKSB7CiAgICAgICAgICAgIGlmIChpbmNXaWR0aCA+IDApIHsKICAgICAgICAgICAgICBkcmFnUmVzaXplQ29udHJvbC5sZWZ0ID0gYCR7bGVmdH1weGAKICAgICAgICAgICAgfQogICAgICAgICAgICBkcmFnUmVzaXplQ29udHJvbC53aWR0aCA9IGAke2luY1dpZHRofXB4YAogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlc2l6ZURpdi5pbmNsdWRlcygncicpKSB7CiAgICAgICAgICAgIGRyYWdSZXNpemVDb250cm9sLndpZHRoID0gYCR7ZGVjV2lkdGh9cHhgCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3QgaiBpbiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuY29udGFpbmVySWRdCiAgICAgICAgICAuY29udHJvbHMpIHsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRhaW5lcklkXQogICAgICAgICAgICAuY29udHJvbHNbal0KICAgICAgICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtpbmRleF0KICAgICAgICAgICAgLnByb3BlcnRpZXMKCiAgICAgICAgICBsZXQgdG9wOiBudW1iZXIgPQogICAgICAgICAgICAocGFyc2VJbnQoZHJhZ1Jlc2l6ZUNvbnRyb2wuaGVpZ2h0ISkgKiB0aGlzLnRvcEFycmF5W2pdKSAvCiAgICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5pbml0aWFsQXJyYXlbaV0uaGVpZ2h0ISkgKwogICAgICAgICAgICBwYXJzZUludCh0aGlzLmluaXRpYWxBcnJheVtpXS50b3AhKQoKICAgICAgICAgIGxldCBoZWlnaHQ6IG51bWJlciA9CiAgICAgICAgICAgIHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLmhlaWdodCEpICogdGhpcy5wZXJjaGVpZ2h0QXJyYXlbal0KCiAgICAgICAgICBsZXQgbGVmdDogbnVtYmVyID0KICAgICAgICAgICAgKHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLndpZHRoISkgKiB0aGlzLmxlZnRBcnJheVtqXSkgLwogICAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuaW5pdGlhbEFycmF5W2ldLndpZHRoISkgKwogICAgICAgICAgICBwYXJzZUludCh0aGlzLmluaXRpYWxBcnJheVtpXS5sZWZ0ISkKCiAgICAgICAgICBsZXQgd2lkdGg6IG51bWJlciA9CiAgICAgICAgICAgIHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLndpZHRoISkgKiB0aGlzLnBlcmN3aWR0aEFycmF5W2pdCgogICAgICAgICAgbGV0IHJpZ2h0OiBudW1iZXIgPQogICAgICAgICAgICAocGFyc2VJbnQoZHJhZ1Jlc2l6ZUNvbnRyb2wud2lkdGghKSAqIHRoaXMubGVmdEFycmF5W2pdKSAvCiAgICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5pbml0aWFsQXJyYXlbaV0ud2lkdGghKSArCiAgICAgICAgICAgIHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLmxlZnQhKQoKICAgICAgICAgIGxldCBib3R0b206IG51bWJlciA9CiAgICAgICAgICAgIChwYXJzZUludChkcmFnUmVzaXplQ29udHJvbC5oZWlnaHQhKSAqIHRoaXMudG9wQXJyYXlbal0pIC8KICAgICAgICAgICAgICBwYXJzZUludCh0aGlzLmluaXRpYWxBcnJheVtpXS5oZWlnaHQhKSArCiAgICAgICAgICAgIHBhcnNlSW50KGRyYWdSZXNpemVDb250cm9sLnRvcCEpCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGNvbnRyb2xQcm9wLkdyb3VwSUQgPT09IHRoaXMuZGl2U3R5bGVBcnJheVtpXS5ncm91cE5hbWUgJiYKICAgICAgICAgICAgdGhpcy5kaXZTdHlsZUFycmF5W2ldLmRpc3BsYXkgPT09ICdibG9jaycKICAgICAgICAgICkgewogICAgICAgICAgICBkcmFnUmVzaXplQ29udHJvbDEgPSBjb250cm9sUHJvcAogICAgICAgICAgICBpZiAodGhpcy5yZXNpemVEaXYgPT09ICdkcmFnJykgewogICAgICAgICAgICAgIHRvcCA9IGRyYWdSZXNpemVDb250cm9sMS5Ub3AhIC0geQogICAgICAgICAgICAgIGxlZnQgPSBkcmFnUmVzaXplQ29udHJvbDEuTGVmdCEgLSB4CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sQWN0aW9uKCdUb3AnLCB0b3AsIGluZGV4KQogICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEFjdGlvbignTGVmdCcsIGxlZnQsIGluZGV4KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZURpdi5pbmNsdWRlcygndCcpKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ1RvcCcsIGJvdHRvbSwgaW5kZXgpCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ0hlaWdodCcsIGhlaWdodCwgaW5kZXgpCiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlc2l6ZURpdi5pbmNsdWRlcygnYicpKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ1RvcCcsIHRvcCwgaW5kZXgpCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ0hlaWdodCcsIGhlaWdodCwgaW5kZXgpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZURpdi5pbmNsdWRlcygnbCcpKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ0xlZnQnLCByaWdodCwgaW5kZXgpCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ1dpZHRoJywgd2lkdGgsIGluZGV4KQogICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXNpemVEaXYuaW5jbHVkZXMoJ3InKSkgewogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sQWN0aW9uKCdMZWZ0JywgbGVmdCwgaW5kZXgpCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ1dpZHRoJywgd2lkdGgsIGluZGV4KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgZm9yIChsZXQgayBvZiB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZCkgewogICAgICBpZiAoIWsuc3RhcnRzV2l0aCgnSURfVVNFUkZPUk0nKSAmJiAhay5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgbGV0IGRyYWdSZXNpemVSZWZmZXI6IElkcmFnUmVzaXplUmVmU3R5bGUgPSB7fQogICAgICAgIGNvbnN0IGNvbnRyb2w6IGNvbnRyb2xQcm9wZXJ0aWVzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtrXQogICAgICAgICAgLnByb3BlcnRpZXMKICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNvbnRyb2xSZWYucmVzaXplQ29udHJvbCkgewogICAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLmNvbnRyb2xSZWYucmVzaXplQ29udHJvbFtrZXldLiRyZWZzWydkcmFSZWYnLmNvbmNhdChjb250cm9sLklEKV0gIT09IHVuZGVmaW5lZAogICAgICAgICAgKSB7CiAgICAgICAgICAgIGRyYWdSZXNpemVSZWZmZXIgPSB0aGlzLmNvbnRyb2xSZWYucmVzaXplQ29udHJvbFtrZXldLiRyZWZzWydkcmFSZWYnLmNvbmNhdChjb250cm9sLklEKV0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY29uc3QgdG9wID0gZHJhZ1Jlc2l6ZVJlZmZlci5vZmZzZXRUb3AhIC0geQogICAgICAgIGNvbnN0IGxlZnQgPSBkcmFnUmVzaXplUmVmZmVyLm9mZnNldExlZnQhIC0geAogICAgICAgIGNvbnN0IGluY1dpZHRoID0gY29udHJvbC5XaWR0aCEgKyB4ID4gMCA/IGNvbnRyb2wuV2lkdGghICsgeCA6IDAKICAgICAgICBjb25zdCBpbmNIZWlnaHQgPSBjb250cm9sLkhlaWdodCEgKyB5ID4gMCA/IGNvbnRyb2wuSGVpZ2h0ISArIHkgOiAwCiAgICAgICAgY29uc3QgZGVjV2lkdGggPSBjb250cm9sLldpZHRoISAtIHggPiAwID8gY29udHJvbC5XaWR0aCEgLSB4IDogMAogICAgICAgIGNvbnN0IGRlY0hlaWdodCA9IGNvbnRyb2wuSGVpZ2h0ISAtIHkgPiAwID8gY29udHJvbC5IZWlnaHQhIC0geSA6IDAKCiAgICAgICAgaWYgKHRoaXMucmVzaXplRGl2ID09PSAnZHJhZycpIHsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEFjdGlvbignVG9wJywgdG9wLCBrKQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sQWN0aW9uKCdMZWZ0JywgbGVmdCwgaykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHRoaXMucmVzaXplRGl2LmluY2x1ZGVzKCd0JykpIHsKICAgICAgICAgICAgaWYgKGluY0hlaWdodCA+IDApIHsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ1RvcCcsIHRvcCwgaykKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ0hlaWdodCcsIGluY0hlaWdodCwgaykKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXNpemVEaXYuaW5jbHVkZXMoJ2InKSkgewogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ0hlaWdodCcsIGRlY0hlaWdodCwgaykKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZURpdi5pbmNsdWRlcygnbCcpKSB7CiAgICAgICAgICAgIGlmIChpbmNXaWR0aCA+IDApIHsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ0xlZnQnLCBsZWZ0LCBrKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEFjdGlvbignV2lkdGgnLCBpbmNXaWR0aCwgaykKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXNpemVEaXYuaW5jbHVkZXMoJ3InKSkgewogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xBY3Rpb24oJ1dpZHRoJywgZGVjV2lkdGgsIGspCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIG9wZW5Db250ZXh0TWVudSAoZTogTW91c2VFdmVudCwgcGFyZW50SUQ6IHN0cmluZywgY29udHJvbElEOiBzdHJpbmcsIHR5cGU6IHN0cmluZykgewogICAgdGhpcy4kZW1pdCgnb3Blbk1lbnUnLCBlLCBwYXJlbnRJRCwgY29udHJvbElELCB0eXBlKQogIH0KICBvcGVuTWVudSAoZXZlbnQ6IE1vdXNlRXZlbnQsIHR5cGU6IHN0cmluZykgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKQogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQogICAgbGV0IGNvbnRyb2xJZCA9IGNvbnRhaW5lcgogICAgaWYgKHR5cGUgPT09ICdjb250cm9sJykgewogICAgICBjb250cm9sSWQgPSB0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFbMF0KICAgIH0KICAgIHRoaXMub3BlbkNvbnRleHRNZW51KGV2ZW50LCBjb250YWluZXIsIGNvbnRyb2xJZCwgdHlwZSkKICB9CgogIGNsb3NlRHJhZ0VsZW1lbnQgKGV2ZW50Ok1vdXNlRXZlbnQsIGhhbmRsZXI6IHN0cmluZyk6IHZvaWQgewogICAgaWYgKHRoaXMudmFsdWUgPT09ICdzYW1lJykgewogICAgICB0aGlzLmVsZW1lbnREcmFnKGV2ZW50KQogICAgfSBlbHNlIHsKICAgICAgdGhpcy52YWx1ZSA9ICdkaWZmZXJlbnQnCiAgICB9CiAgICBFdmVudEJ1cy4kZW1pdCgnZ3JvdXBEcmFnJywgJ05vdERyYWcnKQogICAgRXZlbnRCdXMuJGVtaXQoJ2VuZEdyb3VwTW92ZUNvbnRyb2wnKQogICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbAogICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBudWxsCiAgICBpZiAoaGFuZGxlciA9PT0gJ2RyYWcnKSB7CiAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQKICAgICAgZm9yIChjb25zdCBncnBuYW1lIGluIHNlbGVjdGVkKSB7CiAgICAgICAgaWYgKHNlbGVjdGVkW2dycG5hbWVdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICAgIHRoaXMuZ3JvdXBTdHlsZShzZWxlY3RlZFtncnBuYW1lXSkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGZvciAoY29uc3QgY29udHJvbEdyb3VwIGluIHRoaXMuZGl2U3R5bGVBcnJheSkgewogICAgICBjb25zdCBncm91cE5hbWUgPSB0aGlzLmRpdlN0eWxlQXJyYXlbY29udHJvbEdyb3VwXS5ncm91cE5hbWUhCiAgICAgIGlmIChncm91cE5hbWUuc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgIHRoaXMuZ3JvdXBTdHlsZShncm91cE5hbWUpCiAgICAgIH0KICAgIH0KICB9CiAgZ2V0R3JvdXBFZGl0U3R5bGUgKGdyb3VwTmFtZTogc3RyaW5nKSB7CiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkCiAgICBjb25zdCBpc1NlbGVjdGVkID0KICAgICAgc2VsZWN0ZWQubGVuZ3RoID09PSAxICYmCiAgICAgICFzZWxlY3RlZFswXS5zdGFydHNXaXRoKCdncm91cCcpICYmCiAgICAgIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bc2VsZWN0ZWRbMF1dLnByb3BlcnRpZXMuR3JvdXBJRCA9PT0KICAgICAgICBncm91cE5hbWUKICAgIHJldHVybiBpc1NlbGVjdGVkID8gJ21haW5FZGl0RGl2JyA6ICdtYWluRGl2JwogIH0KICBnZXRHcm91cFN0eWxlIChncm91cE5hbWU6IHN0cmluZykgewogICAgcmV0dXJuIHRoaXMuZGl2U3R5bGVBcnJheVt0aGlzLmRpdlN0eWxlQXJyYXkuZmluZEluZGV4KChwKSA9PiBwLmdyb3VwTmFtZSA9PT0gZ3JvdXBOYW1lKV0KICB9CgogIEBXYXRjaCgnc2VsZWN0ZWRDb250cm9scycsIHsgZGVlcDogdHJ1ZSB9KQogIHVwZGF0ZUdyb3VwU3R5bGUgKCkgewogICAgY29uc3Qgc2VsZWN0ZWRDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0KICAgIGlmIChzZWxlY3RlZENvbnRhaW5lciAhPT0gdGhpcy5jb250YWluZXJJZCAmJiB0aGlzLmlzTW92ZSkgewogICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkCiAgICAgIGZvciAoY29uc3QgZ3JwbmFtZSBpbiBzZWxlY3RlZCkgewogICAgICAgIGlmIChzZWxlY3RlZFtncnBuYW1lXS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgICBjb25zdCBmaW5nR3JvdXBJbmRleCA9IHRoaXMuZGl2U3R5bGVBcnJheS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IHNlbGVjdGVkW2dycG5hbWVdKQogICAgICAgICAgdGhpcy5kaXZTdHlsZUFycmF5LnNwbGljZShmaW5nR3JvdXBJbmRleCwgMSkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICh0aGlzLmRpdlN0eWxlQXJyYXkubGVuZ3RoID4gMCAmJiBzZWxlY3RlZENvbnRhaW5lciA9PT0gdGhpcy5jb250YWluZXJJZCkgewogICAgICBmb3IgKGNvbnN0IGluZGV4IGluIHRoaXMuZGl2U3R5bGVBcnJheSkgewogICAgICAgIHRoaXMuZGl2U3R5bGVBcnJheVtpbmRleF0uZGlzcGxheSA9ICdub25lJwogICAgICB9CiAgICAgIGNvbnN0IHNlbENvbnRyb2wgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZAogICAgICBpZiAoc2VsQ29udHJvbC5sZW5ndGggPj0gMSkgewogICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzISkgewogICAgICAgICAgY29uc3QgZ3JvdXBJZCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdmFsXS5wcm9wZXJ0aWVzLkdyb3VwSUQhCiAgICAgICAgICBpZiAoZ3JvdXBJZCkgewogICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGl2U3R5bGVBcnJheS5maW5kSW5kZXgoCiAgICAgICAgICAgICAgKHApID0+IHAuZ3JvdXBOYW1lID09PSBncm91cElkCiAgICAgICAgICAgICkKICAgICAgICAgICAgdGhpcy5kaXZTdHlsZUFycmF5W2luZGV4XS5kaXNwbGF5ID0gJ2Jsb2NrJwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoCiAgICAgICAgICBzZWxDb250cm9sWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykgfHwKICAgICAgICAgICghc2VsQ29udHJvbFswXS5zdGFydHNXaXRoKCdncm91cCcpICYmCiAgICAgICAgICAgIHNlbENvbnRyb2wuaW5jbHVkZXMoCiAgICAgICAgICAgICAgdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxDb250cm9sWzBdXS5wcm9wZXJ0aWVzCiAgICAgICAgICAgICAgICAuR3JvdXBJRCEKICAgICAgICAgICAgKSkKICAgICAgICApIHsKICAgICAgICAgIGlmIChzZWxDb250cm9sWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRpdlN0eWxlQXJyYXkuZmluZEluZGV4KAogICAgICAgICAgICAgIChwKSA9PiBwLmdyb3VwTmFtZSA9PT0gc2VsQ29udHJvbFswXQogICAgICAgICAgICApCiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICB0aGlzLmRpdlN0eWxlQXJyYXlbaW5kZXhdLmRpc3BsYXkgPSAnYmxvY2snCiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5kaXZTdHlsZUFycmF5LmZpbmRJbmRleCgKICAgICAgICAgICAgICAocCkgPT4KICAgICAgICAgICAgICAgIHAuZ3JvdXBOYW1lID09PQogICAgICAgICAgICAgICAgdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxDb250cm9sWzBdXS5wcm9wZXJ0aWVzCiAgICAgICAgICAgICAgICAgIC5Hcm91cElEIQogICAgICAgICAgICApCiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICB0aGlzLmRpdlN0eWxlQXJyYXlbaW5kZXhdLmRpc3BsYXkgPSAnYmxvY2snCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGZvciAoY29uc3QgaW5kZXggaW4gdGhpcy5kaXZTdHlsZUFycmF5KSB7CiAgICAgICAgdGhpcy5kaXZTdHlsZUFycmF5W2luZGV4XS5kaXNwbGF5ID0gJ25vbmUnCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/organisms/FDGroupControl","sourcesContent":["<template>\n  <div v-if=\"groupedControls[userFormId].groupArray.length!==0\">\n   <div\n      v-for=\"(groupName, index) in groupedControls[userFormId].groupArray\"\n      :class=\"getGroupEditStyle(groupName)\"\n      :key=\"groupName.concat(index)\"\n      :style=\"getGroupStyle(groupName)\"\n      :id=\"groupName\"\n      @mousedown.stop=\"handleMouseDown($event,'drag')\"\n      @contextmenu.self.stop=\"openMenu($event,'control')\"\n    >\n    <div\n    :style=\"getGroupStyle(groupName)\"\n    class=\"innerGroupStyle\"\n    :id=\"groupName\"\n    @contextmenu=\"openMenu($event,'container')\"\n    >\n    <div class=\"handle handle-tl\" :style=\"handlerStyle(groupName)\" @mousedown.stop=\"handleMouseDown($event,'tl')\"></div>\n      <div class=\"handle handle-tr\" :style=\"handlerStyle(groupName)\" @mousedown.stop=\"handleMouseDown($event,'tr')\"></div>\n      <div class=\"handle handle-tm\" :style=\"handlerStyle(groupName)\" @mousedown.stop=\"handleMouseDown($event,'tm')\"></div>\n      <div class=\"handle handle-ml\" :style=\"handlerStyle(groupName)\" @mousedown.stop=\"handleMouseDown($event,'ml')\"></div>\n      <div class=\"handle handle-mr\" :style=\"handlerStyle(groupName)\" @mousedown.stop=\"handleMouseDown($event,'mr')\"></div>\n      <div class=\"handle handle-bl\" :style=\"handlerStyle(groupName)\" @mousedown.stop=\"handleMouseDown($event,'bl')\"></div>\n      <div class=\"handle handle-br\" :style=\"handlerStyle(groupName)\" @mousedown.stop=\"handleMouseDown($event,'br')\"></div>\n      <div class=\"handle handle-bm\" :style=\"handlerStyle(groupName)\" @mousedown.stop=\"handleMouseDown($event,'bm')\"></div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Prop, Watch, Ref } from 'vue-property-decorator'\nimport {\n  IselectControl,\n  IupdateControl,\n  IupdateGroup\n} from '@/storeModules/fd/actions'\nimport { State, Action } from 'vuex-class'\nimport { EventBus } from '@/FormDesigner/event-bus'\nimport FDCommonMethod from '@/api/abstract/FormDesigner/FDCommonMethod'\n@Component({\n  name: 'GroupControl',\n  components: {}\n})\nexport default class GroupControl extends FDCommonMethod {\n  @State((state) => state.fd.groupedControls) groupedControls!: groupedControls;\n  @State((state) => state.fd.selectedControls)\n  selectedControls!: fdState['selectedControls'];\n  @State((state) => state.fd.userformData) userformData!: userformData;\n\n  @Prop({ required: true, type: Array }) public currentSelectedGroup!: string[];\n  @Prop({ required: true, type: String }) public userFormId!: string;\n  @Prop({ required: true, type: String }) public containerId!: string;\n  @Prop() controlRef: any;\n\n  @Action('fd/updateControl') updateControl!: (payload: IupdateControl) => void;\n  @Action('fd/updateGroup') updateGroup!: (payload: IupdateGroup) => void;\n  @Action('fd/selectControl') selectControl!: (payload: IselectControl) => void;\n\n  divStyleArray: Array<IGroupStyle> = [];\n  resizeDiv: string = '';\n\n  positions: IMousePosition = {\n    clientX: 0,\n    clientY: 0,\n    movementX: 0,\n    movementY: 0,\n    offsetX: 0,\n    offsetY: 0\n  };\n  groupName: string = '';\n  count: number = 0;\n  currentMouseDownEvent: CustomMouseEvent | null = null;\n  control: string = ''\n  container: string = ''\n  createGroup (groupName: string) {\n    this.groupStyle(groupName)\n  }\n  value = 'different'\n  isMainSelect = false;\n  isMove: boolean = false\n  tempEvent = {}\n\n  created () {\n    EventBus.$on('getGroupMoveValue', this.getGroupMoveValue)\n    EventBus.$on('startGroupMoveControl', this.startGroupMoveControl)\n    EventBus.$on('moveGroupControl', this.moveGroupControl)\n    EventBus.$on('endGroupMoveControl', this.endGroupMoveControl)\n    EventBus.$on('getClientValue', this.getClientValue)\n    EventBus.$on('updasteGroupSize', this.updasteGroupSize)\n    EventBus.$on('getGroupSize', this.getGroupSize)\n  }\n  destroyed () {\n    EventBus.$off('getGroupMoveValue', this.getGroupMoveValue)\n    EventBus.$off('startGroupMoveControl', this.startGroupMoveControl)\n    EventBus.$off('moveGroupControl', this.moveGroupControl)\n    EventBus.$off('endGroupMoveControl', this.endGroupMoveControl)\n    EventBus.$off('getClientValue', this.getClientValue)\n    EventBus.$off('updasteGroupSize', this.updasteGroupSize)\n    EventBus.$on('getGroupSize', this.getGroupSize)\n  }\n  updasteGroupSize (propName: keyof controlProperties, propertyValue: number, groupIndex: number) {\n    if (this.selectedControls[this.userFormId].container[0] === this.containerId) {\n      if (propName === 'GroupID') {\n        this.divStyleArray[groupIndex].left = `${Math.trunc(parseInt(this.divStyleArray[groupIndex].left!))}px`\n        this.divStyleArray[groupIndex].height = `${Math.trunc(parseInt(this.divStyleArray[groupIndex].height!))}px`\n        this.divStyleArray[groupIndex].top = `${Math.trunc(parseInt(this.divStyleArray[groupIndex].top!))}px`\n        this.divStyleArray[groupIndex].width = `${Math.trunc(parseInt(this.divStyleArray[groupIndex].width!))}px`\n      } else {\n        this.groupStyle(this.divStyleArray[groupIndex].groupName!)\n        this.updatedValue(groupIndex, propName, propertyValue)\n        this.groupStyle(this.divStyleArray[groupIndex].groupName!)\n      }\n    }\n  }\n  updatedValue (groupIndex: number, propName: keyof controlProperties, diff: number) {\n    for (const j in this.userformData[this.userFormId][this.containerId].controls) {\n      const index = this.userformData[this.userFormId][this.containerId].controls[j]\n      const controlProp = this.userformData[this.userFormId][index].properties\n      const divStyle = this.divStyleArray[groupIndex]\n      if (controlProp.GroupID && controlProp.GroupID === divStyle.groupName) {\n        if (propName === 'Left') {\n          let left: number = diff + this.leftArray[j]\n          this.updateControlAction(propName, left, index)\n        } else if (propName === 'Top') {\n          let top: number = diff + this.topArray[j]\n          this.updateControlAction(propName, top, index)\n        } else if (propName === 'Width') {\n          let left = (diff * this.leftArray[j]) / parseInt(divStyle.width!) + parseInt(divStyle.left!)\n          let width = diff * this.percwidthArray[j]\n          this.updateControlAction('Left', left, index)\n          this.updateControlAction(propName, width, index)\n        } else if (propName === 'Height') {\n          let top = (diff * this.topArray[j]) / parseInt(divStyle.height!) + parseInt(divStyle.top!)\n          let height = diff * this.percheightArray[j]\n          this.updateControlAction('Top', top, index)\n          this.updateControlAction(propName, height, index)\n        }\n      }\n    }\n  }\n  getClientValue (value: string, containerX: number, containerY: number, event: MouseEvent, container: string, previousEvent: MouseEvent) {\n    this.value = value\n    this.container = container\n    if (container === this.containerId) {\n      this.positions.clientX = previousEvent.clientX\n      this.positions.clientY = previousEvent.clientY\n      this.positions.offsetX = previousEvent.offsetX\n      this.positions.offsetY = previousEvent.offsetY\n      this.elementMouseDrag(event, containerX, containerY, previousEvent)\n    }\n  }\n  getGroupMoveValue (callBack: Function) {\n    callBack(\n      this.positions.offsetX,\n      this.positions.offsetY,\n      this.control,\n      this.tempEvent\n    )\n  }\n  getGroupSize (callBack: Function) {\n    if (this.containerId === this.selectedControls[this.userFormId].container[0]) {\n      callBack(this.divStyleArray)\n    }\n  }\n  endGroupMoveControl () {\n    // if (this.getIsMoveTarget) {\n    this.positions.movementX = 0\n    this.positions.movementY = 0\n    // this.isMove = false\n    // }\n  }\n  topArray: number[] = [];\n  leftArray: number[] = [];\n\n  percwidthArray: number[] = [];\n  percheightArray: number[] = [];\n\n  initialArray: Array<IGroupStyle> = [];\n\n  get getIsMoveTarget () {\n    const isGroupPrsent = this.selectedControls[this.userFormId].selected.findIndex((val: string) => {\n      val.startsWith('group')\n    })\n    return isGroupPrsent === -1\n  }\n  startGroupMoveControl (event: MouseEvent) {\n    if (this.getIsMoveTarget) {\n      this.positions.clientX = event.clientX\n      this.positions.clientY = event.clientY\n    }\n  }\n\n  moveGroupControl (event: MouseEvent) {\n    if (this.getIsMoveTarget) {\n      //   this.moveBorder(event)\n      if (event.movementX !== 0 && event.movementY !== 0) {\n        EventBus.$emit('groupDrag', 'groupdrag')\n        this.isMove = true\n        // this.updateIsMove(true)\n      }\n    }\n  }\n\n  updateControlAction (\n    propertyName: keyof controlProperties,\n    propertyValue: number,\n    controlId: string\n  ) {\n    this.updateControl({\n      userFormId: this.userFormId,\n      controlId: controlId,\n      propertyName: propertyName,\n      value: propertyValue\n    })\n  }\n  handlerStyle (groupName: string) {\n    const isGroup: string = this.selectedControls[this.userFormId].selected[0]\n    return {\n      backgroundColor: isGroup === groupName ? 'white' : 'black',\n      borderColor: isGroup === groupName ? 'black' : 'white'\n    }\n  }\n  groupStyle (groupName: string) {\n    this.count += 1\n    let index = this.divStyleArray.findIndex(\n      (p: IGroupStyle) => p.groupName === groupName\n    )\n    if (index === -1) {\n      this.divStyleArray.push({\n        left: '0px',\n        top: '0px',\n        width: '0px',\n        height: '0px',\n        display: 'none',\n        groupName: groupName\n      })\n    }\n    const styleLeft: number[] = []\n    const styleWidth: number[] = []\n    const styleTop: number[] = []\n    const styleHeight: number[] = []\n    for (const control of this.userformData[this.userFormId][this.containerId]\n      .controls) {\n      if (\n        this.userformData[this.userFormId][control].properties.GroupID ===\n        groupName\n      ) {\n        const controlprop = this.userformData[this.userFormId][control]\n          .properties\n        styleLeft.push(controlprop.Left!)\n        styleTop.push(controlprop.Top!)\n        styleWidth.push(controlprop.Width! + controlprop.Left!)\n        styleHeight.push(controlprop.Height! + controlprop.Top!)\n      }\n    }\n    index = this.divStyleArray.findIndex(\n      (p: IGroupStyle) => p.groupName === groupName\n    )\n    this.divStyleArray[index].left = `${Math.min(...styleLeft)}px`\n    this.divStyleArray[index].top = `${Math.min(...styleTop)}px`\n    this.divStyleArray[index].width = `${\n      Math.max(...styleWidth) - Math.min(...styleLeft)\n    }px`\n    this.divStyleArray[index].height = `${\n      Math.max(...styleHeight) - Math.min(...styleTop)\n    }px`\n\n    this.topArray = []\n    this.leftArray = []\n\n    this.percwidthArray = []\n    this.percheightArray = []\n\n    for (const control of this.userformData[this.userFormId][this.containerId].controls) {\n      const controlProp = this.userformData[this.userFormId][control].properties\n      if (this.userformData[this.userFormId][control].type !== 'Useform') {\n        if (controlProp.GroupID !== '') {\n          for (const divStyle of this.divStyleArray) {\n            if (controlProp.GroupID === divStyle.groupName) {\n              this.topArray.push(controlProp.Top! - parseInt(divStyle.top!))\n\n              this.leftArray.push(controlProp.Left! - parseInt(divStyle.left!))\n\n              this.percheightArray.push(\n              controlProp.Height! / parseInt(divStyle.height!)\n              )\n\n              this.percwidthArray.push(\n              controlProp.Width! / parseInt(divStyle.width!)\n              )\n            }\n          }\n        } else {\n          this.topArray.push(controlProp.Top!)\n\n          this.leftArray.push(controlProp.Left!)\n\n          this.percheightArray.push(controlProp.Height!)\n\n          this.percwidthArray.push(controlProp.Width!)\n        }\n      }\n    }\n    this.initialArray = []\n    for (let k = 0; k < this.divStyleArray.length; k++) {\n      this.initialArray.push(Object.assign({}, this.divStyleArray[k]))\n    }\n  }\n\n  deActGroupControl () {\n    const selControl = this.selectedControls[this.userFormId].selected\n    if (\n      this.currentSelectedGroup.length === 1 &&\n      selControl.length === 1 &&\n      !selControl[0].startsWith('group')\n    ) {\n      const controlId = this.selectedControls[this.userFormId].selected[0]\n      if (\n        this.currentSelectedGroup[0] ===\n        this.userformData[this.userFormId][controlId].properties.GroupID!\n      ) {\n        this.selectControl({\n          userFormId: this.userFormId,\n          select: {\n            container: this.getContainerList(this.currentSelectedGroup[0]),\n            selected: [this.currentSelectedGroup[0]]\n          }\n        })\n      }\n    }\n  }\n\n  handleMouseDown (event: CustomMouseEvent, handler: string) {\n    this.tempEvent = event\n    EventBus.$emit('groupDrag', 'NotDrag')\n    this.isMove = false\n    this.deActGroupControl()\n    this.resizeDiv = handler\n    this.positions.clientX = event.clientX\n    this.positions.clientY = event.clientY\n    this.currentMouseDownEvent = event\n    if (handler !== 'drag') {\n      document.onmousemove = this.elementDrag\n    } else {\n      this.positions.offsetX = event.offsetX\n      this.positions.offsetY = event.offsetY\n      this.isMainSelect = true\n      EventBus.$emit('startGroupMoveControl', event)\n      document.onmousemove = (event: MouseEvent) => {\n        EventBus.$emit('moveGroupControl', event)\n      }\n    }\n    document.onmouseup = (event) => {\n      this.closeDragElement(event, handler)\n    }\n  }\n  elementMouseDrag (event: MouseEvent, containerX: number, containerY: number, previousEvent: MouseEvent): void {\n    event.preventDefault()\n    if (this.container === this.containerId) {\n      for (const i of this.selectedControls[this.userFormId].selected) {\n        if (i.startsWith('group')) {\n          const index = this.divStyleArray.findIndex(val => val.groupName === i)\n          this.divStyleArray[index].display = 'block'\n          this.groupStyle(this.divStyleArray[index].groupName!)\n        }\n      }\n      this.resizeDiv = 'drag'\n      let targetLeft = -1\n      let targetTop = -1\n      const main = this.selectedControls[this.userFormId].selected[0]\n      const isGroup = main.startsWith('group') ? this.divStyleArray.findIndex(val => val.groupName === main) : -1\n      if (isGroup === -1) {\n        const targetData = this.userformData[this.userFormId][main].properties\n        targetLeft = targetData.Left!\n        targetTop = targetData.Top!\n      } else {\n        const targetData = this.divStyleArray[isGroup]\n        targetLeft = parseInt(targetData.left!)\n        targetTop = parseInt(targetData.top!)\n      }\n      this.positions.movementX = (targetLeft) - (containerX - (this.positions.offsetX!))\n      this.positions.movementY = (targetTop) - (containerY - (this.positions.offsetY!))\n      const scale: number = 1\n      const grid: Array<number> = [10, 10]\n      const x: number =\n      Math.round(this.positions.movementX / scale / grid[0]) * grid[0]\n      const y: number =\n      Math.round(this.positions.movementY / scale / grid[1]) * grid[1]\n\n      if (this.currentMouseDownEvent && (x !== 0 || y !== 0)) {\n        this.currentMouseDownEvent.customCallBack &&\n        this.currentMouseDownEvent.customCallBack()\n      }\n      let dragResizeControl: IGroupStyle = {}\n      let dragResizeControl1: controlProperties = { ID: '' }\n\n      for (let i = 0; i < this.divStyleArray.length; i++) {\n        this.groupName = this.divStyleArray[i].groupName!\n        dragResizeControl = this.divStyleArray[i]\n        if (dragResizeControl.display === 'block') {\n          let top: number = -1\n          let left: number = -1\n          let decHeight: number = -1\n          top = parseInt(dragResizeControl.top!) - y\n          left = parseInt(dragResizeControl.left!) - x\n\n          if (this.resizeDiv === 'drag') {\n            dragResizeControl.top = `${top}px`\n            dragResizeControl.left = `${left}px`\n          }\n          for (const j in this.userformData[this.userFormId][this.containerId]\n            .controls) {\n            const index = this.userformData[this.userFormId][this.containerId]\n              .controls[j]\n            const controlProp = this.userformData[this.userFormId][index]\n              .properties\n            if (\n              controlProp.GroupID === this.divStyleArray[i].groupName &&\n            this.divStyleArray[i].display === 'block'\n            ) {\n              dragResizeControl1 = controlProp\n              if (this.resizeDiv === 'drag') {\n                top = dragResizeControl1.Top! - y\n                left = dragResizeControl1.Left! - x\n                this.updateControlAction('Top', top, index)\n                this.updateControlAction('Left', left, index)\n              }\n            }\n          }\n        }\n      }\n      for (let k of this.selectedControls[this.userFormId].selected) {\n        if (!k.startsWith('ID_USERFORM') && !k.startsWith('group')) {\n          let dragResizeReffer: IdragResizeRefStyle = {}\n          const control: controlProperties = this.userformData[this.userFormId][k]\n            .properties\n          for (const key in this.controlRef.resizeControl) {\n            if (\n              this.controlRef.resizeControl[key].$refs['draRef'.concat(control.ID)] !== undefined\n            ) {\n              dragResizeReffer = this.controlRef.resizeControl[key].$refs['draRef'.concat(control.ID)]\n            }\n          }\n          const top = control.Top! - y\n          const left = control.Left! - x\n\n          if (this.resizeDiv === 'drag') {\n            this.updateControlAction('Top', top, k)\n            this.updateControlAction('Left', left, k)\n          }\n        }\n      }\n    }\n  }\n\n  elementDrag (event: MouseEvent): void {\n    event.preventDefault()\n    this.positions.movementX = this.positions.clientX - event.clientX\n    this.positions.movementY = this.positions.clientY - event.clientY\n    const scale: number = 1\n    const grid: Array<number> = [10, 10]\n    const x: number =\n      Math.round(this.positions.movementX / scale / grid[0]) * grid[0]\n    const y: number =\n      Math.round(this.positions.movementY / scale / grid[1]) * grid[1]\n\n    if (this.currentMouseDownEvent && (x !== 0 || y !== 0)) {\n      this.currentMouseDownEvent.customCallBack &&\n        this.currentMouseDownEvent.customCallBack()\n    }\n    const diffGridX: number = x - this.positions.movementX\n    const diffGridY: number = y - this.positions.movementY\n\n    this.positions.clientX = event.clientX - diffGridX\n    this.positions.clientY = event.clientY - diffGridY\n\n    let dragResizeControl: IGroupStyle = {}\n    let dragResizeControl1: controlProperties = { ID: '' }\n\n    for (let i = 0; i < this.divStyleArray.length; i++) {\n      this.groupName = this.divStyleArray[i].groupName!\n      dragResizeControl = this.divStyleArray[i]\n      if (dragResizeControl.display === 'block') {\n        let top: number = -1\n        let left: number = -1\n        let incWidth: number = -1\n        let incHeight: number = -1\n        let decWidth: number = -1\n        let decHeight: number = -1\n        top = parseInt(dragResizeControl.top!) - y\n        left = parseInt(dragResizeControl.left!) - x\n        incWidth =\n          parseInt(dragResizeControl.width!) + x > 0\n            ? parseInt(dragResizeControl.width!) + x\n            : 0\n        incHeight =\n          parseInt(dragResizeControl.height!) + y > 0\n            ? parseInt(dragResizeControl.height!) + y\n            : 0\n        decWidth =\n          parseInt(dragResizeControl.width!) - x > 0\n            ? parseInt(dragResizeControl.width!) - x\n            : 0\n        decHeight =\n          parseInt(dragResizeControl.height!) - y > 0\n            ? parseInt(dragResizeControl.height!) - y\n            : 0\n\n        if (this.resizeDiv === 'drag') {\n          dragResizeControl.top = `${top}px`\n          dragResizeControl.left = `${left}px`\n        } else {\n          if (this.resizeDiv.includes('t')) {\n            if (incHeight > 0) {\n              dragResizeControl.top = `${top}px`\n            }\n            dragResizeControl.height = `${incHeight}px`\n          } else if (this.resizeDiv.includes('b')) {\n            dragResizeControl.height = `${decHeight}px`\n          }\n\n          if (this.resizeDiv.includes('l')) {\n            if (incWidth > 0) {\n              dragResizeControl.left = `${left}px`\n            }\n            dragResizeControl.width = `${incWidth}px`\n          } else if (this.resizeDiv.includes('r')) {\n            dragResizeControl.width = `${decWidth}px`\n          }\n        }\n        for (const j in this.userformData[this.userFormId][this.containerId]\n          .controls) {\n          const index = this.userformData[this.userFormId][this.containerId]\n            .controls[j]\n          const controlProp = this.userformData[this.userFormId][index]\n            .properties\n\n          let top: number =\n            (parseInt(dragResizeControl.height!) * this.topArray[j]) /\n              parseInt(this.initialArray[i].height!) +\n            parseInt(this.initialArray[i].top!)\n\n          let height: number =\n            parseInt(dragResizeControl.height!) * this.percheightArray[j]\n\n          let left: number =\n            (parseInt(dragResizeControl.width!) * this.leftArray[j]) /\n              parseInt(this.initialArray[i].width!) +\n            parseInt(this.initialArray[i].left!)\n\n          let width: number =\n            parseInt(dragResizeControl.width!) * this.percwidthArray[j]\n\n          let right: number =\n            (parseInt(dragResizeControl.width!) * this.leftArray[j]) /\n              parseInt(this.initialArray[i].width!) +\n            parseInt(dragResizeControl.left!)\n\n          let bottom: number =\n            (parseInt(dragResizeControl.height!) * this.topArray[j]) /\n              parseInt(this.initialArray[i].height!) +\n            parseInt(dragResizeControl.top!)\n          if (\n            controlProp.GroupID === this.divStyleArray[i].groupName &&\n            this.divStyleArray[i].display === 'block'\n          ) {\n            dragResizeControl1 = controlProp\n            if (this.resizeDiv === 'drag') {\n              top = dragResizeControl1.Top! - y\n              left = dragResizeControl1.Left! - x\n              this.updateControlAction('Top', top, index)\n              this.updateControlAction('Left', left, index)\n            } else {\n              if (this.resizeDiv.includes('t')) {\n                this.updateControlAction('Top', bottom, index)\n                this.updateControlAction('Height', height, index)\n              } else if (this.resizeDiv.includes('b')) {\n                this.updateControlAction('Top', top, index)\n                this.updateControlAction('Height', height, index)\n              }\n              if (this.resizeDiv.includes('l')) {\n                this.updateControlAction('Left', right, index)\n                this.updateControlAction('Width', width, index)\n              } else if (this.resizeDiv.includes('r')) {\n                this.updateControlAction('Left', left, index)\n                this.updateControlAction('Width', width, index)\n              }\n            }\n          }\n        }\n      }\n    }\n    for (let k of this.selectedControls[this.userFormId].selected) {\n      if (!k.startsWith('ID_USERFORM') && !k.startsWith('group')) {\n        let dragResizeReffer: IdragResizeRefStyle = {}\n        const control: controlProperties = this.userformData[this.userFormId][k]\n          .properties\n        for (const key in this.controlRef.resizeControl) {\n          if (\n            this.controlRef.resizeControl[key].$refs['draRef'.concat(control.ID)] !== undefined\n          ) {\n            dragResizeReffer = this.controlRef.resizeControl[key].$refs['draRef'.concat(control.ID)]\n          }\n        }\n        const top = dragResizeReffer.offsetTop! - y\n        const left = dragResizeReffer.offsetLeft! - x\n        const incWidth = control.Width! + x > 0 ? control.Width! + x : 0\n        const incHeight = control.Height! + y > 0 ? control.Height! + y : 0\n        const decWidth = control.Width! - x > 0 ? control.Width! - x : 0\n        const decHeight = control.Height! - y > 0 ? control.Height! - y : 0\n\n        if (this.resizeDiv === 'drag') {\n          this.updateControlAction('Top', top, k)\n          this.updateControlAction('Left', left, k)\n        } else {\n          if (this.resizeDiv.includes('t')) {\n            if (incHeight > 0) {\n              this.updateControlAction('Top', top, k)\n            }\n            this.updateControlAction('Height', incHeight, k)\n          } else if (this.resizeDiv.includes('b')) {\n            this.updateControlAction('Height', decHeight, k)\n          }\n          if (this.resizeDiv.includes('l')) {\n            if (incWidth > 0) {\n              this.updateControlAction('Left', left, k)\n            }\n            this.updateControlAction('Width', incWidth, k)\n          } else if (this.resizeDiv.includes('r')) {\n            this.updateControlAction('Width', decWidth, k)\n          }\n        }\n      }\n    }\n  }\n  openContextMenu (e: MouseEvent, parentID: string, controlID: string, type: string) {\n    this.$emit('openMenu', e, parentID, controlID, type)\n  }\n  openMenu (event: MouseEvent, type: string) {\n    event.preventDefault()\n    event.stopPropagation()\n    const container = this.selectedControls[this.userFormId].container[0]\n    let controlId = container\n    if (type === 'control') {\n      controlId = this.getSelectedControlsDatas![0]\n    }\n    this.openContextMenu(event, container, controlId, type)\n  }\n\n  closeDragElement (event:MouseEvent, handler: string): void {\n    if (this.value === 'same') {\n      this.elementDrag(event)\n    } else {\n      this.value = 'different'\n    }\n    EventBus.$emit('groupDrag', 'NotDrag')\n    EventBus.$emit('endGroupMoveControl')\n    document.onmouseup = null\n    document.onmousemove = null\n    if (handler === 'drag') {\n      const selected = this.selectedControls[this.userFormId].selected\n      for (const grpname in selected) {\n        if (selected[grpname].startsWith('group')) {\n          this.groupStyle(selected[grpname])\n        }\n      }\n    }\n    for (const controlGroup in this.divStyleArray) {\n      const groupName = this.divStyleArray[controlGroup].groupName!\n      if (groupName.startsWith('group')) {\n        this.groupStyle(groupName)\n      }\n    }\n  }\n  getGroupEditStyle (groupName: string) {\n    const selected = this.selectedControls[this.userFormId].selected\n    const isSelected =\n      selected.length === 1 &&\n      !selected[0].startsWith('group') &&\n      this.userformData[this.userFormId][selected[0]].properties.GroupID ===\n        groupName\n    return isSelected ? 'mainEditDiv' : 'mainDiv'\n  }\n  getGroupStyle (groupName: string) {\n    return this.divStyleArray[this.divStyleArray.findIndex((p) => p.groupName === groupName)]\n  }\n\n  @Watch('selectedControls', { deep: true })\n  updateGroupStyle () {\n    const selectedContainer = this.selectedControls[this.userFormId].container[0]\n    if (selectedContainer !== this.containerId && this.isMove) {\n      const selected = this.selectedControls[this.userFormId].selected\n      for (const grpname in selected) {\n        if (selected[grpname].startsWith('group')) {\n          const fingGroupIndex = this.divStyleArray.findIndex(val => val.groupName === selected[grpname])\n          this.divStyleArray.splice(fingGroupIndex, 1)\n        }\n      }\n    }\n    if (this.divStyleArray.length > 0 && selectedContainer === this.containerId) {\n      for (const index in this.divStyleArray) {\n        this.divStyleArray[index].display = 'none'\n      }\n      const selControl = this.selectedControls[this.userFormId].selected\n      if (selControl.length >= 1) {\n        for (const val of this.getSelectedControlsDatas!) {\n          const groupId = this.userformData[this.userFormId][val].properties.GroupID!\n          if (groupId) {\n            const index = this.divStyleArray.findIndex(\n              (p) => p.groupName === groupId\n            )\n            this.divStyleArray[index].display = 'block'\n          }\n        }\n      } else {\n        if (\n          selControl[0].startsWith('group') ||\n          (!selControl[0].startsWith('group') &&\n            selControl.includes(\n              this.userformData[this.userFormId][selControl[0]].properties\n                .GroupID!\n            ))\n        ) {\n          if (selControl[0].startsWith('group')) {\n            const index = this.divStyleArray.findIndex(\n              (p) => p.groupName === selControl[0]\n            )\n            if (index !== -1) {\n              this.divStyleArray[index].display = 'block'\n            }\n          } else {\n            const index = this.divStyleArray.findIndex(\n              (p) =>\n                p.groupName ===\n                this.userformData[this.userFormId][selControl[0]].properties\n                  .GroupID!\n            )\n            if (index !== -1) {\n              this.divStyleArray[index].display = 'block'\n            }\n          }\n        }\n      }\n    } else {\n      for (const index in this.divStyleArray) {\n        this.divStyleArray[index].display = 'none'\n      }\n    }\n  }\n}\n</script>\n\n<style  scoped>\n.move-border {\n  z-index: 9999;\n  position: absolute;\n  border: 1px rgb(59, 58, 58) dashed;\n}\n.m-top-b,\n.m-bottom-b {\n  width: 100%;\n}\n.m-left-b,\n.m-right-b {\n  height: 100%;\n}\n.handle {\n  box-sizing: border-box;\n  position: absolute;\n  width: 6px;\n  height: 6px;\n  background: white;\n  border: 1px solid #333;\n}\n.handleActivate {\n  box-sizing: border-box;\n  position: absolute;\n  width: 6px;\n  height: 6px;\n\n  background: black;\n  border: 1px solid white;\n}\n.handle-tl {\n  top: -5px;\n  left: -5px;\n  cursor: nw-resize;\n}\n.handle-tm {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n  cursor: n-resize;\n}\n.handle-tr {\n  top: -5px;\n  right: -5px;\n  cursor: ne-resize;\n}\n.handle-ml {\n  top: 50%;\n  margin-top: -5px;\n  left: -5px;\n  cursor: w-resize;\n}\n.handle-mr {\n  top: 50%;\n  margin-top: -5px;\n  right: -5px;\n  cursor: e-resize;\n}\n.handle-bl {\n  bottom: -5px;\n  left: -5px;\n  cursor: sw-resize;\n}\n.handle-bm {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n  cursor: s-resize;\n}\n.handle-br {\n  bottom: -5px;\n  right: -5px;\n  cursor: se-resize;\n}\n.mainDiv {\n  cursor: move;\n  position: absolute;\n  --border-width: 5;\n  --stripe-distance: 2px;\n  border: calc(var(--border-width) * 1px) solid transparent;\n  border-image: repeating-linear-gradient(\n      -110deg,\n      black,\n      transparent 1px,\n      transparent var(--stripe-distance),\n      black calc(var(--stripe-distance) + 0.2px)\n    )\n    var(--border-width);\n  padding: 5px;\n  margin-top: -5px;\n  margin-left: -5px;\n  display: none;\n}\n.mainEditDiv {\n  position: absolute;\n  cursor: move;\n  --border-width: 5;\n  --stripe-distance: 2px;\n  border: calc(var(--border-width) * 1px) solid transparent;\n  border-image: repeating-linear-gradient(\n      -45deg,\n      black,\n      transparent 2px,\n      transparent var(--stripe-distance),\n      black calc(var(--stripe-distance) + 0.2px)\n    )\n    var(--border-width);\n  padding: 5px;\n  margin-top: -5px;\n  margin-left: -5px;\n  display: none;\n}\n.innerGroupStyle {\n    margin-top: -5px;\n    margin-left: -5px;\n    padding-right: 10px;\n    padding-bottom: 10px;\n}\n.handle {\n  box-sizing: border-box;\n  position: absolute;\n  width: 6px;\n  height: 6px;\n  background: white;\n  border: 1px solid #333;\n}\n.handle-tl {\n  top: -5px;\n  left: -5px;\n  cursor: nw-resize;\n}\n.handle-tm {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n  cursor: n-resize;\n}\n.handle-tr {\n  top: -5px;\n  right: -5px;\n  cursor: ne-resize;\n}\n.handle-ml {\n  top: 50%;\n  margin-top: -5px;\n  left: -5px;\n  cursor: w-resize;\n}\n.handle-mr {\n  top: 50%;\n  margin-top: -5px;\n  right: -5px;\n  cursor: e-resize;\n}\n.handle-bl {\n  bottom: -5px;\n  left: -5px;\n  cursor: sw-resize;\n}\n.handle-bm {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n  cursor: s-resize;\n}\n.handle-br {\n  bottom: -5px;\n  right: -5px;\n  cursor: se-resize;\n}\n</style>\n"]}]}