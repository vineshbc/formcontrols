{"remainingRequest":"/home/mobiotics/Projects/formcontrols/node_modules/babel-loader/lib/index.js!/home/mobiotics/Projects/formcontrols/node_modules/ts-loader/index.js??ref--14-2!/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/atoms/FDContextMenu/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/atoms/FDContextMenu/index.vue","mtime":1610544258554},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBFbWl0IH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCBGRFNWR0ltYWdlIGZyb20gJ0AvRm9ybURlc2lnbmVyL2NvbXBvbmVudHMvYXRvbXMvRkRTVkdJbWFnZS9pbmRleC52dWUnOwppbXBvcnQgeyBDb250cm9sUHJvcGVydHlEYXRhIH0gZnJvbSAnQC9Gb3JtRGVzaWduZXIvbW9kZWxzL0NvbnRyb2xzVGFibGVQcm9wZXJ0aWVzL0NvbnRyb2xQcm9wZXJ0eURhdGEudHMnOwppbXBvcnQgeyBBY3Rpb24sIFN0YXRlIH0gZnJvbSAndnVleC1jbGFzcyc7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnQC9Gb3JtRGVzaWduZXIvZXZlbnQtYnVzJzsKaW1wb3J0IEZEQ29tbW9uTWV0aG9kIGZyb20gJ0AvYXBpL2Fic3RyYWN0L0Zvcm1EZXNpZ25lci9GRENvbW1vbk1ldGhvZCc7CmxldCBDb250ZXh0TWVudSA9IGNsYXNzIENvbnRleHRNZW51IGV4dGVuZHMgRkRDb21tb25NZXRob2QgewogIGNvbnRyb2xBY3Rpb24oY29udHJvbEFjdGlvbk5hbWUsIHN1YlZhbCkgewogICAgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfQ09QWScpIHsKICAgICAgdGhpcy5jb3B5Q29udHJvbCgnY29weScpOwogICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX0RFTEVURScpIHsKICAgICAgdGhpcy5jbGlja0RlbGV0ZSgpOwogICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX1BBU1RFJykgewogICAgICB0aGlzLnBhc3RlQ29udHJvbCgpOwogICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX0NVVCcpIHsKICAgICAgdGhpcy5jdXRDb250cm9sKCk7CiAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfU0VMRUNUQUxMJykgewogICAgICB0aGlzLnNlbGVjdEFsbCgpOwogICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX0dST1VQJykgewogICAgICB0aGlzLmdyb3VwQ29udHJvbCgpOwogICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX1VOR1JPVVAnKSB7CiAgICAgIHRoaXMudW5Hcm91cENvbnRyb2woKTsKICAgIH0gZWxzZSBpZiAoY29udHJvbEFjdGlvbk5hbWUgPT09ICdJRF9ORVdQQUdFJykgewogICAgICB0aGlzLmFkZE5ld1BhZ2UoKTsKICAgIH0gZWxzZSBpZiAoY29udHJvbEFjdGlvbk5hbWUgPT09ICdJRF9ERUxFVEVQQUdFJykgewogICAgICB0aGlzLmRlbGV0ZUN1cnJlbnRQYWdlKCk7CiAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfQ09OVFJPTEZPUldBUkQnKSB7CiAgICAgIHRoaXMuYnJpbmdGb3J3YXJkKCk7CiAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfQ09OVFJPTEJBQ0tXQVJEJykgewogICAgICB0aGlzLmJyaW5nQmFja3dhcmQoKTsKICAgIH0gZWxzZSBpZiAoY29udHJvbEFjdGlvbk5hbWUgPT09ICdJRF9PQkpFQ1RQUk9QJykgewogICAgICB0aGlzLmRpc3BsYXlQcm9wKCk7CiAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfUkVOQU1FJykgewogICAgICBjb25zdCBzZWxlY3RlZFBhZ2VJRCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdOwogICAgICBFdmVudEJ1cy4kZW1pdCgncmVuYW1lUGFnZScsIHRoaXMudXNlckZvcm1JZCwgc2VsZWN0ZWRQYWdlSUQsIHRoaXMuc2VsZWN0ZWRUYWIsIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bc2VsZWN0ZWRQYWdlSURdLnR5cGUpOwogICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX01PVkUnKSB7CiAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuY29udHJvbElkXS50eXBlOwoKICAgICAgaWYgKHR5cGUgPT09ICdNdWx0aVBhZ2UnKSB7CiAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VzZXJGb3JtVGFiT3JkZXInLCB0aGlzLnVzZXJGb3JtSWQsIHRoaXMuY29udHJvbElkLCB0eXBlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBFdmVudEJ1cy4kZW1pdCgndGFiU3RyaXBUYWJPcmRlcicsIHRoaXMudXNlckZvcm1JZCwgdGhpcy5jb250cm9sSWQsIHR5cGUpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfVEFCT1JERVInKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCd1c2VyRm9ybVRhYk9yZGVyJywgdGhpcy51c2VyRm9ybUlkLCB0aGlzLmNvbnRhaW5lcklkLCAnJyk7CiAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfQUxJR04nIHx8IGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfTUFLRVNBTUVTSVpFJykgewogICAgICB0aGlzLmNvbnRyb2xBbGlnbk1lbnQoc3ViVmFsKTsKICAgIH0KCiAgICB0aGlzLmNsb3NlTWVudSgpOwogIH0KCiAgY3JlYXRlZCgpIHsKICAgIEV2ZW50QnVzLiRvbignZ3JvdXBDb250cm9sJywgdmFsdWUgPT4gewogICAgICBpZiAodGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdID09PSB0aGlzLmNvbnRhaW5lcklkKSB7CiAgICAgICAgaWYgKHZhbHVlID09PSAnZ3JvdXAnKSB7CiAgICAgICAgICB0aGlzLmdyb3VwQ29udHJvbCgpOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICd1bmdyb3VwJykgewogICAgICAgICAgdGhpcy51bkdyb3VwQ29udHJvbCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICBkZXN0cm95ZWQoKSB7CiAgICBFdmVudEJ1cy4kb2ZmKCdncm91cENvbnRyb2wnKTsKICB9CgogIGNsb3NlTWVudSgpIHsKICAgIHJldHVybiAwOwogIH0KCiAgZGlzcGxheVByb3AoKSB7CiAgICBFdmVudEJ1cy4kZW1pdCgnZGlzcFByb3AnLCBmYWxzZSk7CiAgfQoKICBhZGROZXdQYWdlKCkgewogICAgY29uc3QgdHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250cm9sSWRdLnR5cGU7CgogICAgaWYgKHR5cGUgPT09ICdUYWJTdHJpcCcpIHsKICAgICAgY29uc3QgdGFiQ29udHJvbERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250cm9sSWRdKSkuZXh0cmFEYXRhcy5UYWJzOwogICAgICBsZXQgcHJldlRhYklkID0gLTE7CiAgICAgIGNvbnN0IGluaXRpYWxUYWJEYXRhID0gewogICAgICAgIE5hbWU6ICcnLAogICAgICAgIENhcHRpb246ICcnLAogICAgICAgIFRvb2xUaXA6ICcnLAogICAgICAgIEFjY2VsZXJhdG9yOiAnJwogICAgICB9OwoKICAgICAgaWYgKHRhYkNvbnRyb2xEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYkNvbnRyb2xEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjb25zdCBpZCA9IHRhYkNvbnRyb2xEYXRhW2ldLk5hbWUuc3BsaXQoJ1RhYicpLnBvcCgpIHx8ICctMSc7CiAgICAgICAgICBjb25zdCBwYXJzZUlkID0gcGFyc2VJbnQoaWQsIDEwKTsKCiAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSWQpICYmIHByZXZUYWJJZCA8IHBhcnNlSWQpIHsKICAgICAgICAgICAgcHJldlRhYklkID0gcGFyc2VJZDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHByZXZUYWJJZCArPSAxOwogICAgICAgIGluaXRpYWxUYWJEYXRhLk5hbWUgPSBgVGFiJHtwcmV2VGFiSWR9YDsKICAgICAgICBpbml0aWFsVGFiRGF0YS5DYXB0aW9uID0gYFRhYiR7cHJldlRhYklkfWA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5pdGlhbFRhYkRhdGEuTmFtZSA9IGBUYWIkezF9YDsKICAgICAgICBpbml0aWFsVGFiRGF0YS5DYXB0aW9uID0gYFRhYiR7MX1gOwogICAgICB9CgogICAgICB0YWJDb250cm9sRGF0YS5wdXNoKGluaXRpYWxUYWJEYXRhKTsKICAgICAgdGhpcy51cGRhdGVDb250cm9sRXh0cmFEYXRhKHsKICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgY29udHJvbElkOiB0aGlzLmNvbnRyb2xJZCwKICAgICAgICBwcm9wZXJ0eU5hbWU6ICdUYWJzJywKICAgICAgICB2YWx1ZTogdGFiQ29udHJvbERhdGEKICAgICAgfSk7CiAgICAgIHRoaXMudXBkYXRlQ29udHJvbCh7CiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICAgIGNvbnRyb2xJZDogdGhpcy5jb250cm9sSWQsCiAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiBwcmV2VGFiSWQgLSAxCiAgICAgIH0pOwogICAgfSBlbHNlIGlmICh0eXBlID09PSAnTXVsdGlQYWdlJykgewogICAgICBjb25zdCBwYXJlbnRJZCA9IHRoaXMuY29udHJvbElkLnNwbGl0KCdNdWx0aVBhZ2UnKS5wb3AoKTsKICAgICAgY29uc3QgY29udHJvbE5hbWUgPSBgUGFnZSR7cGFyZW50SWR9X2A7CiAgICAgIGxldCBsYXN0Q29udHJvbElkID0gMDsKICAgICAgY29uc3QgdXNlcmZvcm1Db250cm9sSWRzID0gT2JqZWN0LmtleXModGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVzZXJmb3JtQ29udHJvbElkcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh1c2VyZm9ybUNvbnRyb2xJZHNbaV0uaW5kZXhPZihjb250cm9sTmFtZSkgIT09IC0xKSB7CiAgICAgICAgICBjb25zdCBJZE51bSA9IHVzZXJmb3JtQ29udHJvbElkc1tpXS5zcGxpdChjb250cm9sTmFtZSkucG9wKCkgfHwgJy0xJzsKICAgICAgICAgIGNvbnN0IHBhc3JlSWQgPSBwYXJzZUludChJZE51bSwgMTApOwoKICAgICAgICAgIGlmICghaXNOYU4ocGFzcmVJZCkgJiYgbGFzdENvbnRyb2xJZCA8IHBhc3JlSWQpIHsKICAgICAgICAgICAgbGFzdENvbnRyb2xJZCA9IHBhc3JlSWQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBjb250cm9sUHJvcERhdGEgPSBuZXcgQ29udHJvbFByb3BlcnR5RGF0YSgpOwogICAgICBsZXQgY29udHJvbE9iaiA9IGNvbnRyb2xQcm9wRGF0YS5kYXRhWydQYWdlJ107CiAgICAgIGNvbnN0IGl0ZW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnRyb2xPYmopKTsKICAgICAgbGFzdENvbnRyb2xJZCArPSAxOwogICAgICBpdGVtLnByb3BlcnRpZXMuSUQgPSBgSURfJHtjb250cm9sTmFtZX0ke2xhc3RDb250cm9sSWR9YDsKICAgICAgaXRlbS5wcm9wZXJ0aWVzLkNhcHRpb24gPSBgUGFnZSR7bGFzdENvbnRyb2xJZH1gOwogICAgICBpdGVtLnByb3BlcnRpZXMuTmFtZSA9IGBQYWdlJHtsYXN0Q29udHJvbElkfWA7CiAgICAgIGl0ZW0ucHJvcGVydGllcy5JbmRleCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250cm9sSWRdLmNvbnRyb2xzLmxlbmd0aDsKICAgICAgdGhpcy5hZGRDb250cm9sKHsKICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgY29udHJvbElkOiB0aGlzLmNvbnRyb2xJZCwKICAgICAgICBhZGRJZDogaXRlbS5wcm9wZXJ0aWVzLklELAogICAgICAgIGl0ZW06IGl0ZW0KICAgICAgfSk7CiAgICAgIHRoaXMudXBkYXRlQ29udHJvbCh7CiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICAgIGNvbnRyb2xJZDogdGhpcy5jb250cm9sSWQsCiAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiBpdGVtLnByb3BlcnRpZXMuSW5kZXgKICAgICAgfSk7CiAgICAgIHRoaXMuc2VsZWN0Q29udHJvbCh7CiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICAgIHNlbGVjdDogewogICAgICAgICAgY29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lckxpc3QoaXRlbS5wcm9wZXJ0aWVzLklEKSwKICAgICAgICAgIHNlbGVjdGVkOiBbaXRlbS5wcm9wZXJ0aWVzLklEXQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhdGVNdWx0aVBhZ2VWYWx1ZScpOwogICAgfQogIH0KCiAgYnJpbmdGb3J3YXJkKCkgewogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgY29uc3QgaGlnaFByb3JDb250cm9sID0gW107CiAgICBjb25zdCBsb3dQcm9yQ29udHJvbCA9IFtdOwogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzWzBdKVswXTsKICAgIGNvbnN0IGNvbnRhaW5lckNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJdLmNvbnRyb2xzOwoKICAgIGZvciAoY29uc3QgaW5kZXggaW4gY29udGFpbmVyQ29udHJvbHMpIHsKICAgICAgY29uc3QgY250cmxEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJDb250cm9sc1tpbmRleF1dOwoKICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnTXVsdGlQYWdlJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0ZyYW1lJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0xpc3RCb3gnKSB7CiAgICAgICAgaGlnaFByb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsb3dQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSk7CiAgICAgIH0KICAgIH0KCiAgICBsZXQgbmV4dFNlbGN0ZWRTZXJpZXMgPSBbXTsKICAgIGxldCBuZXh0SGlnaENvbnRyb2xTZXJpZXMgPSBbXTsKICAgIGNvbnN0IGdldFNlbENvbnRyb2wgPSBbLi4udGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNdOwogICAgZ2V0U2VsQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzLnpJbmRleCAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMuekluZGV4OwogICAgfSk7CgogICAgZm9yIChjb25zdCBzZWxDb250cm9sIG9mIGdldFNlbENvbnRyb2wpIHsKICAgICAgY29uc3QgdHlwZSA9IHVzZXJEYXRhW3NlbENvbnRyb2xdLnR5cGU7CiAgICAgIGNvbnN0IHRlbXBaSW5kZXggPSB1c2VyRGF0YVtzZWxDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKICAgICAgY29uc3QgY29udHJvbEluZGV4ID0gT2JqZWN0LmtleXModXNlckRhdGEpLmZpbmRJbmRleCgodmFsLCBpbmRleCkgPT4gewogICAgICAgIHJldHVybiAnekluZGV4JyBpbiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMgJiYgdXNlckRhdGFbdmFsXS5leHRyYURhdGFzLnpJbmRleCA9PT0gdGVtcFpJbmRleCArIDE7CiAgICAgIH0pOwogICAgICBjb25zdCBuZXh0U2VsZWN0ZWRDb250cm9sID0gY29udHJvbEluZGV4ICE9PSAtMSA/IE9iamVjdC5rZXlzKHVzZXJEYXRhKVtjb250cm9sSW5kZXhdIDogJyc7CiAgICAgIGNvbnN0IG5leHRDb250cm9sVHlwZSA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLnR5cGU7CgogICAgICBpZiAobmV4dFNlbGVjdGVkQ29udHJvbCAhPT0gJycgJiYgIWhpZ2hQcm9yQ29udHJvbC5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgIGlmIChnZXRTZWxDb250cm9sLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgICBpZiAoIW5leHRTZWxjdGVkU2VyaWVzLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzLnB1c2goc2VsQ29udHJvbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFuZXh0U2VsY3RlZFNlcmllcy5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcy5wdXNoKG5leHRTZWxlY3RlZENvbnRyb2wpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV4dFNlbGN0ZWRTZXJpZXMpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbMF1dLmV4dHJhRGF0YXMuekluZGV4OwogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGgKICAgICAgICAgICAgLyogJiYgc3dhcFRhYkluZGV4ID4gMCAqLwogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXModXNlckRhdGFbY29udGFpbmVyXS5jb250cm9sc1tpbmRleF0sICd6SW5kZXgnLCB0ZW1wRXhjaGFnZUluZGV4KTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsY3RlZFNlcmllc1swXSwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCAtIChuZXh0U2VsY3RlZFNlcmllcy5sZW5ndGggLSAxKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0U2VsY3RlZFNlcmllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbal1dLmV4dHJhRGF0YXMuekluZGV4ICsgMTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGN0ZWRTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzID0gW107CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGgKICAgICAgICAgICAgLyogJiYgc3dhcFRhYkluZGV4ID4gMCAqLwogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoc2VsQ29udHJvbCwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGVjdGVkQ29udHJvbCwgJ3pJbmRleCcsIHRlbXBaSW5kZXgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGdldFNlbENvbnRyb2wuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkgJiYgKHR5cGUgPT09ICdGcmFtZScgfHwgdHlwZSA9PT0gJ011bHRpUGFnZScgfHwgdHlwZSA9PT0gJ0xpc3RCb3gnKSkgewogICAgICAgICAgaWYgKCFuZXh0SGlnaENvbnRyb2xTZXJpZXMuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsKICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzLnB1c2goc2VsQ29udHJvbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFuZXh0SGlnaENvbnRyb2xTZXJpZXMuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsKICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzLnB1c2gobmV4dFNlbGVjdGVkQ29udHJvbCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnRnJhbWUnIHx8IHR5cGUgPT09ICdNdWx0aVBhZ2UnIHx8IHR5cGUgPT09ICdMaXN0Qm94JykgewogICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5leHRIaWdoQ29udHJvbFNlcmllcykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgIGNvbnN0IHRlbXBFeGNoYWdlSW5kZXggPSB1c2VyRGF0YVtuZXh0SGlnaENvbnRyb2xTZXJpZXNbMF1dLmV4dHJhRGF0YXMuekluZGV4OwogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGgpIHsKICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMuekluZGV4ID09PSBzd2FwVGFiSW5kZXgpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ3pJbmRleCcsIHRlbXBFeGNoYWdlSW5kZXgpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0SGlnaENvbnRyb2xTZXJpZXNbMF0sICd6SW5kZXgnLCBzd2FwVGFiSW5kZXggLSAobmV4dEhpZ2hDb250cm9sU2VyaWVzLmxlbmd0aCAtIDEpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0SGlnaENvbnRyb2xTZXJpZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBjb25zdCB1cGRhdGVJbmRleCA9IHVzZXJEYXRhW25leHRIaWdoQ29udHJvbFNlcmllc1tqXV0uZXh0cmFEYXRhcy56SW5kZXggKyAxOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0SGlnaENvbnRyb2xTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcyA9IFtdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcy56SW5kZXg7CgogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoCiAgICAgICAgICAgIC8qICYmIHN3YXBUYWJJbmRleCA+IDAgKi8KICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMuekluZGV4ID09PSBzd2FwVGFiSW5kZXgpOwogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHNlbENvbnRyb2wsICd6SW5kZXgnLCBzd2FwVGFiSW5kZXgpOwogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxlY3RlZENvbnRyb2wsICd6SW5kZXgnLCB0ZW1wWkluZGV4KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBicmluZ0JhY2t3YXJkKCkgewogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgY29uc3QgaGlnaFByb3JDb250cm9sID0gW107CiAgICBjb25zdCBsb3dQcm9yQ29udHJvbCA9IFtdOwogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzWzBdKVswXTsKICAgIGNvbnN0IGNvbnRhaW5lckNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJdLmNvbnRyb2xzOwoKICAgIGZvciAoY29uc3QgaW5kZXggaW4gY29udGFpbmVyQ29udHJvbHMpIHsKICAgICAgY29uc3QgY250cmxEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJDb250cm9sc1tpbmRleF1dOwoKICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnTXVsdGlQYWdlJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0ZyYW1lJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0xpc3RCb3gnKSB7CiAgICAgICAgaGlnaFByb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsb3dQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSk7CiAgICAgIH0KICAgIH0KCiAgICBsZXQgbmV4dFNlbGN0ZWRTZXJpZXMgPSBbXTsKICAgIGxldCBuZXh0SGlnaENvbnRyb2xTZXJpZXMgPSBbXTsKICAgIGNvbnN0IGdldFNlbENvbnRyb2wgPSBbLi4udGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNdOwogICAgZ2V0U2VsQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzLnpJbmRleCAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMuekluZGV4OwogICAgfSk7CgogICAgZm9yIChjb25zdCBzZWxDb250cm9sIG9mIGdldFNlbENvbnRyb2wpIHsKICAgICAgY29uc3QgdHlwZSA9IHVzZXJEYXRhW3NlbENvbnRyb2xdLnR5cGU7CiAgICAgIGNvbnN0IHRlbXBaSW5kZXggPSB1c2VyRGF0YVtzZWxDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKICAgICAgY29uc3QgY29udHJvbEluZGV4ID0gT2JqZWN0LmtleXModXNlckRhdGEpLmZpbmRJbmRleCgodmFsLCBpbmRleCkgPT4gewogICAgICAgIHJldHVybiAnekluZGV4JyBpbiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMgJiYgdXNlckRhdGFbdmFsXS5leHRyYURhdGFzLnpJbmRleCA9PT0gdGVtcFpJbmRleCAtIDE7CiAgICAgIH0pOwogICAgICBjb25zdCBuZXh0U2VsZWN0ZWRDb250cm9sID0gY29udHJvbEluZGV4ICE9PSAtMSA/IE9iamVjdC5rZXlzKHVzZXJEYXRhKVtjb250cm9sSW5kZXhdIDogJyc7CiAgICAgIGNvbnN0IG5leHRDb250cm9sVHlwZSA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLnR5cGU7CgogICAgICBpZiAobmV4dFNlbGVjdGVkQ29udHJvbCAhPT0gJycgJiYgIWhpZ2hQcm9yQ29udHJvbC5pbmNsdWRlcyhzZWxDb250cm9sKSkgewogICAgICAgIGlmIChnZXRTZWxDb250cm9sLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgICBpZiAoIW5leHRTZWxjdGVkU2VyaWVzLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzLnB1c2goc2VsQ29udHJvbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFuZXh0U2VsY3RlZFNlcmllcy5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcy5wdXNoKG5leHRTZWxlY3RlZENvbnRyb2wpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV4dFNlbGN0ZWRTZXJpZXMpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnbmV4dFNlbGN0ZWRTZXJpZXMnLCBuZXh0U2VsY3RlZFNlcmllcyk7CiAgICAgICAgICAgIGNvbnN0IHRlbXBFeGNoYWdlSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsY3RlZFNlcmllc1swXV0uZXh0cmFEYXRhcy56SW5kZXg7CiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMuekluZGV4OwoKICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCAmJiBzd2FwVGFiSW5kZXggPiAwKSB7CiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCh2YWwgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXModXNlckRhdGFbY29udGFpbmVyXS5jb250cm9sc1tpbmRleF0sICd6SW5kZXgnLCB0ZW1wRXhjaGFnZUluZGV4KTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGN0ZWRTZXJpZXNbMF0sICd6SW5kZXgnLCBuZXh0U2VsY3RlZFNlcmllcy5sZW5ndGggKyAxIC0gc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0U2VsY3RlZFNlcmllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbal1dLmV4dHJhRGF0YXMuekluZGV4IC0gMTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGN0ZWRTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzID0gW107CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggJiYgc3dhcFRhYkluZGV4ID4gMCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHNlbENvbnRyb2wsICd6SW5kZXgnLCBzd2FwVGFiSW5kZXgpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoIWxvd1Byb3JDb250cm9sLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpICYmICh0eXBlID09PSAnRnJhbWUnIHx8IHR5cGUgPT09ICdNdWx0aVBhZ2UnIHx8IHR5cGUgPT09ICdMaXN0Qm94JykpIHsKICAgICAgICBpZiAoZ2V0U2VsQ29udHJvbC5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgICAgaWYgKCFuZXh0SGlnaENvbnRyb2xTZXJpZXMuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsKICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzLnB1c2goc2VsQ29udHJvbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFuZXh0SGlnaENvbnRyb2xTZXJpZXMuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsKICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzLnB1c2gobmV4dFNlbGVjdGVkQ29udHJvbCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXh0SGlnaENvbnRyb2xTZXJpZXMpLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzWzBdXS5leHRyYURhdGFzLnpJbmRleDsKICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcy56SW5kZXg7CgogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCh2YWwgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXModXNlckRhdGFbY29udGFpbmVyXS5jb250cm9sc1tpbmRleF0sICd6SW5kZXgnLCB0ZW1wRXhjaGFnZUluZGV4KTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dEhpZ2hDb250cm9sU2VyaWVzWzBdLCAnekluZGV4JywgbmV4dEhpZ2hDb250cm9sU2VyaWVzLmxlbmd0aCArIDEgLSBzd2FwVGFiSW5kZXgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IG5leHRIaWdoQ29udHJvbFNlcmllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzW2pdXS5leHRyYURhdGFzLnpJbmRleCAtIDE7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1tqXSwgJ3pJbmRleCcsIHVwZGF0ZUluZGV4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzID0gW107CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggJiYgc3dhcFRhYkluZGV4ID4gMCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHNlbENvbnRyb2wsICd6SW5kZXgnLCBzd2FwVGFiSW5kZXgpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGRlbGV0ZVBhZ2VJbmRleChpZCkgewogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdOwogICAgY29uc3QgdGVtcEluZGV4ID0gdXNlckRhdGFbaWRdLnByb3BlcnRpZXMuSW5kZXg7CgogICAgZm9yIChjb25zdCBrZXkgaW4gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scykgewogICAgICBjb25zdCBjb250cm9sWkluZGV4ID0gdXNlckRhdGFbdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9sc1trZXldXS5wcm9wZXJ0aWVzLkluZGV4OwoKICAgICAgaWYgKGNvbnRyb2xaSW5kZXggPiB0ZW1wSW5kZXgpIHsKICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2woewogICAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICAgICAgY29udHJvbElkOiB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2tleV0sCiAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdJbmRleCcsCiAgICAgICAgICB2YWx1ZTogY29udHJvbFpJbmRleCAtIDEKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KCiAgZGVsZXRlQ3VycmVudFBhZ2UoKSB7CiAgICBjb25zdCB0eXBlID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRyb2xJZF0udHlwZTsKCiAgICBpZiAodHlwZSA9PT0gJ1RhYlN0cmlwJykgewogICAgICBjb25zdCB0YWJDb250cm9sRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRyb2xJZF0pKS5leHRyYURhdGFzLlRhYnM7CgogICAgICBpZiAodGFiQ29udHJvbERhdGEgJiYgdGFiQ29udHJvbERhdGEubGVuZ3RoID4gMCkgewogICAgICAgIHRhYkNvbnRyb2xEYXRhLnNwbGljZSh0aGlzLnNlbGVjdGVkVGFiLCAxKTsKICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xFeHRyYURhdGEoewogICAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICAgICAgY29udHJvbElkOiB0aGlzLmNvbnRyb2xJZCwKICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1RhYnMnLAogICAgICAgICAgdmFsdWU6IHRhYkNvbnRyb2xEYXRhCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy51cGRhdGVUYWJTdHJpcFZhbHVlKHRoaXMuc2VsZWN0ZWRUYWIgLSAxKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlID09PSAnTXVsdGlQYWdlJykgewogICAgICBjb25zdCBjb250cm9scyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250cm9sSWRdLmNvbnRyb2xzOwoKICAgICAgaWYgKGNvbnRyb2xzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmRlbGV0ZVBhZ2VJbmRleCh0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXSk7CiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdXS5wcm9wZXJ0aWVzLkluZGV4OwogICAgICAgIHRoaXMuZGVsZXRlQ29udHJvbCh7CiAgICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgICBwYXJlbnRJZDogdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdLAogICAgICAgICAgdGFyZ2V0SWQ6IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy51cGRhdGVJbmRleChpbmRleCAtIDEpOwogICAgICB9CgogICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXRlTXVsdGlQYWdlVmFsdWUnKTsKICAgIH0KICB9CgogIHVwZGF0ZVRhYlN0cmlwVmFsdWUoaW5kZXgpIHsKICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKICAgIGNvbnN0IHRhYnMgPSB1c2VyRGF0YVt0aGlzLmNvbnRyb2xJZF0uZXh0cmFEYXRhcy5UYWJzOwogICAgY29uc3QgdGFiSW5kZXggPSB0YWJzLmZpbmRJbmRleCgodmFsLCBrZXkpID0+IGtleSA9PT0gaW5kZXggKyAxKTsKCiAgICBpZiAodGFiSW5kZXggIT09IC0xKSB7CiAgICAgIGNvbnN0IHZhbHVlID0gaW5kZXggKyAxOwogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVmFsdWUnLCB2YWx1ZSwgdGhpcy5jb250cm9sSWQpOwogICAgfSBlbHNlIGlmICh0YWJJbmRleCA9PT0gLTEgJiYgaW5kZXggIT09IC0xKSB7CiAgICAgIGNvbnN0IHZhbHVlID0gaW5kZXg7CiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdWYWx1ZScsIHZhbHVlLCB0aGlzLmNvbnRyb2xJZCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVmFsdWUnLCAtMSwgdGhpcy5jb250cm9sSWQpOwogICAgfQogIH0KCiAgY2hhbmdlU2VsZWN0KGNvbnRyb2wpIHsKICAgIHRoaXMuc2VsZWN0Q29udHJvbCh7CiAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgc2VsZWN0OiB7CiAgICAgICAgY29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lckxpc3QoY29udHJvbCksCiAgICAgICAgc2VsZWN0ZWQ6IFtjb250cm9sXQogICAgICB9CiAgICB9KTsKICB9CgogIHVwZGF0ZUluZGV4KGluZGV4KSB7CiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF07CiAgICBjb25zdCBjb250cm9scyA9IHVzZXJEYXRhW3RoaXMuY29udHJvbElkXS5jb250cm9sczsKICAgIGNvbnN0IHBhZ2VJbmRleCA9IGNvbnRyb2xzLmZpbmRJbmRleCh2YWwgPT4gdXNlckRhdGFbdmFsXS5wcm9wZXJ0aWVzLkluZGV4ID09PSBpbmRleCArIDEpOwoKICAgIGlmIChwYWdlSW5kZXggIT09IC0xKSB7CiAgICAgIGNvbnN0IHZhbHVlID0gdXNlckRhdGFbY29udHJvbHNbcGFnZUluZGV4XV0ucHJvcGVydGllcy5JbmRleDsKICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1ZhbHVlJywgdmFsdWUsIHRoaXMuY29udHJvbElkKTsKICAgICAgdGhpcy5jaGFuZ2VTZWxlY3QoY29udHJvbHNbcGFnZUluZGV4XSk7CiAgICB9IGVsc2UgaWYgKHBhZ2VJbmRleCA9PT0gLTEgJiYgaW5kZXggIT09IC0xKSB7CiAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gY29udHJvbHMuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVt2YWxdLnByb3BlcnRpZXMuSW5kZXggPT09IGluZGV4KTsKICAgICAgY29uc3QgdmFsdWUgPSB1c2VyRGF0YVtjb250cm9sc1t1cGRhdGVJbmRleF1dLnByb3BlcnRpZXMuSW5kZXg7CiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdWYWx1ZScsIHZhbHVlLCB0aGlzLmNvbnRyb2xJZCk7CiAgICAgIHRoaXMuY2hhbmdlU2VsZWN0KGNvbnRyb2xzW3VwZGF0ZUluZGV4XSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVmFsdWUnLCAtMSwgdGhpcy5jb250cm9sSWQpOwogICAgICB0aGlzLmNoYW5nZVNlbGVjdCh0aGlzLmNvbnRyb2xJZCk7CiAgICB9CiAgfQoKICB1cGRhdGVDb250cm9sUHJvcGVydHkocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlLCBjb250cm9sSWQpIHsKICAgIHRoaXMudXBkYXRlQ29udHJvbCh7CiAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgY29udHJvbElkOiBjb250cm9sSWQsCiAgICAgIHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLAogICAgICB2YWx1ZTogcHJvcGVydHlWYWx1ZQogICAgfSk7CiAgfQoKICB1bkdyb3VwQ29udHJvbCgpIHsKICAgIGNvbnN0IGlzR3JvdXAgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXS5zdGFydHNXaXRoKCdncm91cCcpOwogICAgY29uc3Qgc2VsQ29udHJvbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdOwogICAgY29uc3Qgc2VsZWN0ZWQgPSBpc0dyb3VwID8gc2VsQ29udHJvbCA6IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bc2VsQ29udHJvbF0ucHJvcGVydGllcy5Hcm91cElEOwogICAgY29uc3QgY29udHJvbExpc3QgPSBbXTsKCiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdKSB7CiAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2tleV0udHlwZTsKCiAgICAgIGlmICh0eXBlICE9PSAnVXNlcmZvcm0nICYmIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1ba2V5XS5wcm9wZXJ0aWVzLkdyb3VwSUQgPT09IHNlbGVjdGVkKSB7CiAgICAgICAgY29udHJvbExpc3QucHVzaChrZXkpOwogICAgICB9CiAgICB9CgogICAgY29uc3QgZ3JvdXBBcnJheSA9IFsuLi50aGlzLmdyb3VwZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmdyb3VwQXJyYXldOwogICAgdGhpcy51cGRhdGVDb250cm9sR3JvdXBJRChzZWxlY3RlZCwgJycpOwogICAgY29uc3QgaW5kZXggPSB0aGlzLmdyb3VwZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmdyb3VwQXJyYXkuZmluZEluZGV4KHZhbCA9PiB2YWwgPT09IHNlbGVjdGVkKTsKICAgIGdyb3VwQXJyYXkuc3BsaWNlKGluZGV4LCAxKTsKICAgIHRoaXMudXBkYXRlR3JvdXAoewogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgIGdyb3VwQXJyYXk6IGdyb3VwQXJyYXkKICAgIH0pOwogICAgdGhpcy5zZWxlY3RDb250cm9sKHsKICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICBzZWxlY3Q6IHsKICAgICAgICBjb250YWluZXI6IGlzR3JvdXAgPyB0aGlzLmdldENvbnRhaW5lckxpc3QoY29udHJvbExpc3RbMF0pIDogdGhpcy5nZXRDb250YWluZXJMaXN0KHNlbENvbnRyb2xbMF0pLAogICAgICAgIHNlbGVjdGVkOiBpc0dyb3VwID8gY29udHJvbExpc3QgOiBbc2VsQ29udHJvbF0KICAgICAgfQogICAgfSk7CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBUbyBnZW5lcmF0ZSBuZXcgR3JvdXBJRAogICAqIEBmdW5jdGlvbiBjcmVhdGVHcm91cElkCiAgICovCgoKICBjcmVhdGVHcm91cElkKCkgewogICAgbGV0IGxhc3RDb250cm9sSWQgPSAwOwoKICAgIGZvciAobGV0IGkgb2YgdGhpcy5ncm91cGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5ncm91cEFycmF5KSB7CiAgICAgIGlmIChpLmluZGV4T2YoJ2dyb3VwJykgIT09IC0xKSB7CiAgICAgICAgY29uc3QgSWROdW0gPSBpLnNwbGl0KCdncm91cCcpLnBvcCgpIHx8ICctMSc7CiAgICAgICAgY29uc3QgcGFzcmVJZCA9IHBhcnNlSW50KElkTnVtLCAxMCk7CgogICAgICAgIGlmICghaXNOYU4ocGFzcmVJZCkgJiYgbGFzdENvbnRyb2xJZCA8IHBhc3JlSWQpIHsKICAgICAgICAgIGxhc3RDb250cm9sSWQgPSBwYXNyZUlkOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiBgZ3JvdXAke2xhc3RDb250cm9sSWQgKyAxfWA7CiAgfQoKICBjcmVhdGVHcm91cChncm91cElkKSB7CiAgICByZXR1cm4gZ3JvdXBJZDsKICB9CgogIHVwZGF0ZUNvbnRyb2xHcm91cElEKGdyb3VwTmFtZSwgdXBkYXRlR3JvdXBJZCkgewogICAgZm9yIChjb25zdCB2YWwgaW4gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXSkgewogICAgICBpZiAoIXZhbC5zdGFydHNXaXRoKCdJRF9VU0VSRk9STScpKSB7CiAgICAgICAgY29uc3QgY29udHJvbEdycElkID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt2YWxdLnByb3BlcnRpZXMuR3JvdXBJRDsKCiAgICAgICAgaWYgKGNvbnRyb2xHcnBJZCA9PT0gZ3JvdXBOYW1lKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnR3JvdXBJRCcsIHVwZGF0ZUdyb3VwSWQsIHZhbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBUbyB1cGRhdGUgdGhlIGdyb3VwIEluZm9ybWF0aW9uIGluIG1haW4gZGF0YQogICAqIEBmdW5jdGlvbiBncm91cENvbnRyb2wKICAgKi8KCgogIGdyb3VwQ29udHJvbCgpIHsKICAgIGxldCB1cGRhdGVHcm91cElkID0gJyc7CiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkOwogICAgY29uc3Qgc2VsZWN0ZWRHcm91cEFycmF5ID0gc2VsZWN0ZWQuZmlsdGVyKHZhbCA9PiB2YWwuc3RhcnRzV2l0aCgnZ3JvdXAnKSAmJiB2YWwpOwogICAgdXBkYXRlR3JvdXBJZCA9IHNlbGVjdGVkR3JvdXBBcnJheVswXTsKCiAgICBpZiAoc2VsZWN0ZWRHcm91cEFycmF5Lmxlbmd0aCA+PSAyKSB7CiAgICAgIGNvbnN0IGdyb3VwQXJyYXkgPSBbLi4udGhpcy5ncm91cGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5ncm91cEFycmF5XTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBBcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2VsZWN0ZWRHcm91cEFycmF5Lmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAoc2VsZWN0ZWRHcm91cEFycmF5W2pdID09PSBncm91cEFycmF5W2ldKSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbEdyb3VwSUQoZ3JvdXBBcnJheVtpXSwgc2VsZWN0ZWRHcm91cEFycmF5WzBdKTsKICAgICAgICAgICAgZ3JvdXBBcnJheS5zcGxpY2UoaSwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUdyb3VwKHsKICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgZ3JvdXBBcnJheTogWy4uLmdyb3VwQXJyYXksIHNlbGVjdGVkR3JvdXBBcnJheVswXV0KICAgICAgfSk7CiAgICAgIHVwZGF0ZUdyb3VwSWQgPSBzZWxlY3RlZEdyb3VwQXJyYXlbMF07CiAgICB9IGVsc2UgaWYgKHNlbGVjdGVkR3JvdXBBcnJheS5sZW5ndGggPT09IDApIHsKICAgICAgdXBkYXRlR3JvdXBJZCA9IHRoaXMuY3JlYXRlR3JvdXBJZCgpOwogICAgICBjb25zdCBncm91cEFycmF5ID0gWy4uLnRoaXMuZ3JvdXBlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uZ3JvdXBBcnJheSwgdXBkYXRlR3JvdXBJZF07CiAgICAgIHRoaXMudXBkYXRlR3JvdXAoewogICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgICBncm91cEFycmF5OiBncm91cEFycmF5CiAgICAgIH0pOwogICAgfQoKICAgIGZvciAobGV0IHZhbCBvZiBzZWxlY3RlZCkgewogICAgICBpZiAoIXZhbC5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0dyb3VwSUQnLCB1cGRhdGVHcm91cElkLCB2YWwpOwogICAgICB9CiAgICB9CgogICAgdGhpcy5jcmVhdGVHcm91cCh1cGRhdGVHcm91cElkKTsKICAgIHRoaXMuc2VsZWN0Q29udHJvbCh7CiAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgc2VsZWN0OiB7CiAgICAgICAgY29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lckxpc3QodXBkYXRlR3JvdXBJZCksCiAgICAgICAgc2VsZWN0ZWQ6IFt1cGRhdGVHcm91cElkXQogICAgICB9CiAgICB9KTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIFRvIHNlbGVjdCBhbGwgdGhlIGNvbnRyb2xzIGluIHJlc3BlY3RpdmUgY29udGFpbmVyIHByZXNlbnQgaW4gcmVzcGVjdGl2ZSB1c2VyZm9ybQogICAqIEBmdW5jdGlvbiBzZWxlY3RBbGwKICAgKi8KCgogIHNlbGVjdEFsbCgpIHsKICAgIGNvbnN0IGNvbnRyb2xPYmplY3RMaXN0ID0gWy4uLnRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250YWluZXJJZF0uY29udHJvbHNdOwogICAgY29uc3Qgc2VsZWNlZEdyb3VwID0gW107CgogICAgZm9yIChjb25zdCB2YWwgb2YgY29udHJvbE9iamVjdExpc3QpIHsKICAgICAgY29uc3QgY29udHJvbEdyb3VwSWQgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3ZhbF0ucHJvcGVydGllcy5Hcm91cElEOwoKICAgICAgaWYgKGNvbnRyb2xHcm91cElkICYmIGNvbnRyb2xHcm91cElkICE9PSAnJykgewogICAgICAgICFzZWxlY2VkR3JvdXAuaW5jbHVkZXMoY29udHJvbEdyb3VwSWQpICYmIHNlbGVjZWRHcm91cC5wdXNoKGNvbnRyb2xHcm91cElkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZWxlY2VkR3JvdXAucHVzaCh2YWwpOwogICAgICB9CiAgICB9CgogICAgaWYgKGNvbnRyb2xPYmplY3RMaXN0Lmxlbmd0aCAhPT0gMCkgewogICAgICB0aGlzLnNlbGVjdENvbnRyb2woewogICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgICBzZWxlY3Q6IHsKICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRDb250YWluZXJMaXN0KHNlbGVjZWRHcm91cFswXSksCiAgICAgICAgICBzZWxlY3RlZDogWy4uLnNlbGVjZWRHcm91cF0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gVG8gdXBkYXRlIHRoZSBjdXR0ZWQgY29udHJvbHMgaW4gcmVzcGVjdGl2ZSBjb250YWluZXIgcHJlc2VudCBpbiByZXNwZWN0aXZlIHVzZXJmb3JtCiAgICogQGZ1bmN0aW9uIGN1dENvbnRyb2wKICAgKi8KCgogIGN1dENvbnRyb2woKSB7CiAgICB0aGlzLmNvcHlDb250cm9sKCdjdXQnKTsKICAgIHRoaXMuY2xpY2tEZWxldGUoKTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIFRvIHVwZGF0ZSB0aGUgY29waWVkIGNvbnRyb2xzIGluIHJlc3BlY3RpdmUgY29udGFpbmVyIHByZXNlbnQgaW4gcmVzcGVjdGl2ZSB1c2VyZm9ybQogICAqIEBmdW5jdGlvbiBjb3B5Q29udHJvbAogICAqLwoKCiAgY29weUNvbnRyb2wodHlwZSkgewogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvcGllZENvbnRyb2xbdGhpcy51c2VyRm9ybUlkXVt0aGlzLnVzZXJGb3JtSWRdLmNvbnRyb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMuZGVsZXRlQ29waWVkQ29udHJvbCh7CiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICAgIHBhcmVudElkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgdGFyZ2V0SWQ6IHRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdW3RoaXMudXNlckZvcm1JZF0uY29udHJvbHNbaV0KICAgICAgfSk7CiAgICB9CgogICAgY29uc3QgdXNlckZvcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKICAgIGNvbnN0IHNlbENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXTsKICAgIGNvbnN0IHNlbFNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQ7CiAgICBjb25zdCB1cGRhdGVTZWxlY3RlZCA9IFtdOwoKICAgIGZvciAobGV0IGNvbnRyb2wgb2Ygc2VsU2VsZWN0ZWQpIHsKICAgICAgaWYgKCFjb250cm9sLnN0YXJ0c1dpdGgoJ2dyb3VwJykgJiYgdXNlckZvcm1EYXRhW2NvbnRyb2xdLnR5cGUgPT09ICdQYWdlJykgewogICAgICAgIGNvbnRyb2wgPSB0aGlzLmdldENvbnRhaW5lckxpc3QoY29udHJvbClbMF07CiAgICAgIH0KCiAgICAgIHVwZGF0ZVNlbGVjdGVkLnB1c2goY29udHJvbCk7CiAgICB9CgogICAgdGhpcy51cGRhdGVDb3B5Q29udHJvbExpc3QoewogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgIHBhcmVudElkOiBzZWxDb250YWluZXIsCiAgICAgIHRhcmdldElkOiB1cGRhdGVTZWxlY3RlZCwKICAgICAgdHlwZTogdHlwZQogICAgfSk7CgogICAgY29uc3QgcmVjQ29weUNvbnRyb2wgPSBkYVRhcmdldCA9PiB7CiAgICAgIGNvbnN0IGRhVGFyZ2V0Q29udHJvbHMgPSB1c2VyRm9ybURhdGFbZGFUYXJnZXRdLmNvbnRyb2xzOwoKICAgICAgaWYgKGRhVGFyZ2V0Q29udHJvbHMubGVuZ3RoID4gMCkgewogICAgICAgIGZvciAobGV0IGkgaW4gZGFUYXJnZXRDb250cm9scykgewogICAgICAgICAgY29uc3QgY29udHJvbE9iamVjdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodXNlckZvcm1EYXRhW2RhVGFyZ2V0Q29udHJvbHNbaV1dKSk7CiAgICAgICAgICBjb25zdCBjb250cm9sQXJyYXkgPSBbXTsKICAgICAgICAgIGNvbnN0IGN0cmxPYmogPSB7IC4uLmNvbnRyb2xPYmplY3QsCiAgICAgICAgICAgIGNvbnRyb2xzOiBbXQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuYWRkQ29waWVkQ29udHJvbCh7CiAgICAgICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgICAgICAgY29udHJvbElkOiBkYVRhcmdldCwKICAgICAgICAgICAgYWRkSWQ6IGRhVGFyZ2V0Q29udHJvbHNbaV0sCiAgICAgICAgICAgIGl0ZW06IGN0cmxPYmoKICAgICAgICAgIH0pOwogICAgICAgICAgcmVjQ29weUNvbnRyb2woZGFUYXJnZXRDb250cm9sc1tpXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIGZvciAobGV0IGtleSBvZiBzZWxTZWxlY3RlZCkgewogICAgICBpZiAoIWtleS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgaWYgKHVzZXJGb3JtRGF0YVtrZXldLnR5cGUgPT09ICdQYWdlJykgewogICAgICAgICAga2V5ID0gdGhpcy5nZXRDb250YWluZXJMaXN0KGtleSlbMF07CiAgICAgICAgfQoKICAgICAgICBjb25zdCBjb250cm9sT2JqZWN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VyRm9ybURhdGFba2V5XSkpOwogICAgICAgIGNvbnN0IGN0cmxPYmogPSB7IC4uLmNvbnRyb2xPYmplY3QsCiAgICAgICAgICBjb250cm9sczogW10KICAgICAgICB9OwogICAgICAgIHRoaXMuYWRkQ29waWVkQ29udHJvbCh7CiAgICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgICBjb250cm9sSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgICAgIGFkZElkOiBrZXksCiAgICAgICAgICBpdGVtOiBjdHJsT2JqCiAgICAgICAgfSk7CiAgICAgICAgcmVjQ29weUNvbnRyb2woa2V5KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKGxldCBjdHJsSWQgaW4gdXNlckZvcm1EYXRhKSB7CiAgICAgICAgICBjb25zdCBjb250cm9sUHJvcCA9IHVzZXJGb3JtRGF0YVtjdHJsSWRdLnByb3BlcnRpZXMuR3JvdXBJRDsKCiAgICAgICAgICBpZiAoY29udHJvbFByb3ApIHsKICAgICAgICAgICAgaWYgKGNvbnRyb2xQcm9wID09PSBrZXkpIHsKICAgICAgICAgICAgICBjb25zdCBjb250cm9sT2JqZWN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VyRm9ybURhdGFbY3RybElkXSkpOwogICAgICAgICAgICAgIGNvbnN0IGN0cmxPYmogPSB7IC4uLmNvbnRyb2xPYmplY3QsCiAgICAgICAgICAgICAgICBjb250cm9sczogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHRoaXMuYWRkQ29waWVkQ29udHJvbCh7CiAgICAgICAgICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgICAgICAgICBjb250cm9sSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgICAgICAgICAgIGFkZElkOiBjdHJsSWQsCiAgICAgICAgICAgICAgICBpdGVtOiBjdHJsT2JqCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmVjQ29weUNvbnRyb2woY3RybElkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgdXBkYXRlTmV3Q29udHJvbChwYXJlbnRJZCwgY3RybElkLCBjdHJsT2JqLCBpc1BhcmVudCkgewogICAgdGhpcy5hZGRDb250cm9sKHsKICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICBjb250cm9sSWQ6IHBhcmVudElkLAogICAgICBhZGRJZDogY3RybElkLAogICAgICBpdGVtOiBjdHJsT2JqCiAgICB9KTsKCiAgICBpZiAoaXNQYXJlbnQpIHsKICAgICAgY29uc3QgbmV3VGFiSW5kZXggPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3BhcmVudElkXS5jb250cm9scy5sZW5ndGg7CiAgICAgIHRoaXMudXBkYXRlVGFiSW5kZXhWYWx1ZShjdHJsSWQpOwogICAgICB0aGlzLnVwZGF0ZVpJbmRleFZhbHVlKGN0cmxJZCk7CiAgICB9CiAgfQoKICBuZXdQYXN0ZUNvbnRyb2xJZChrZXksIHBhcmVudElkKSB7CiAgICBjb25zdCB1c2VyRm9ybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgbGV0IGxhc3RDb250cm9sSWQgPSAwOwogICAgY29uc3QgdHlwZSA9IGtleSBpbiB1c2VyRm9ybURhdGEgPyB1c2VyRm9ybURhdGFba2V5XS50eXBlIDogJyc7CiAgICBjb25zdCBwYXJlbnROYW1lID0gcGFyZW50SWQgIT09ICcnID8gcGFyZW50SWQuc3BsaXQoJ011bHRpUGFnZScpLnBvcCgpIDogLTE7CiAgICBjb25zdCBzZWxlY3RlZENvbnRyb2xOYW1lID0gdHlwZSA9PT0gJ1BhZ2UnID8gYFBhZ2Uke3BhcmVudE5hbWV9X2AgOiBrZXkucmVwbGFjZSgvWzAtOV0vZywgJycpLnNwbGl0KCdfJykucG9wKCk7CiAgICBjb25zdCB1c2VyZm9ybUNvbnRyb2xJZHMgPSBPYmplY3Qua2V5cyh1c2VyRm9ybURhdGEpOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlcmZvcm1Db250cm9sSWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmICh1c2VyZm9ybUNvbnRyb2xJZHNbaV0uaW5kZXhPZihzZWxlY3RlZENvbnRyb2xOYW1lKSAhPT0gLTEpIHsKICAgICAgICBjb25zdCBJZE51bSA9IHVzZXJmb3JtQ29udHJvbElkc1tpXS5zcGxpdChzZWxlY3RlZENvbnRyb2xOYW1lKS5wb3AoKSB8fCAnLTEnOwogICAgICAgIGNvbnN0IHBhc3JlSWQgPSBwYXJzZUludChJZE51bSwgMTApOwoKICAgICAgICBpZiAoIWlzTmFOKHBhc3JlSWQpICYmIGxhc3RDb250cm9sSWQgPCBwYXNyZUlkKSB7CiAgICAgICAgICBsYXN0Q29udHJvbElkID0gcGFzcmVJZDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBsYXN0Q29udHJvbElkICs9IDE7CiAgICBjb25zdCBOYW1lID0gYCR7c2VsZWN0ZWRDb250cm9sTmFtZX0ke2xhc3RDb250cm9sSWR9YDsKICAgIHJldHVybiBOYW1lOwogIH0KCiAgcmVtb3ZlQ2hpbGRDb250cm9sKGRhVGFyZ2V0LCBkZWxldGVDb250cm9sKSB7CiAgICBjb25zdCByZW1vdmVDb250cm9sID0gWy4uLnRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bZGFUYXJnZXRdLmNvbnRyb2xzXTsKICAgIGNvbnN0IHJlbW92ZUluZGV4ID0gcmVtb3ZlQ29udHJvbC5maW5kSW5kZXgodmFsID0+IHZhbCA9PT0gZGVsZXRlQ29udHJvbCk7CiAgICByZW1vdmVDb250cm9sLnNwbGljZShyZW1vdmVJbmRleCwgMSk7CiAgICB0aGlzLnNldENoaWxkQ29udHJvbHMoewogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgIGNvbnRhaW5lcklkOiBkYVRhcmdldCwKICAgICAgdGFyZ2V0Q29udHJvbHM6IHJlbW92ZUNvbnRyb2wKICAgIH0pOwogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gVG8gcGFzdGUgY29udHJvbHMgaW4gcmVzcGVjdGl2ZSBjb250YWluZXIgcHJlc2VudCBpbiByZXNwZWN0aXZlIHVzZXJmb3JtCiAgICogQGZ1bmN0aW9uIHBhc3RlQ29udHJvbAogICAqLwoKCiAgcGFzdGVDb250cm9sKCkgewogICAgaWYgKHRoaXMuY29weUNvbnRyb2xMaXN0LnR5cGUgPT09ICdjb3B5JykgewogICAgICBjb25zdCBzZWxDb250YWluZXIgPSB0aGlzLmNvcHlDb250cm9sTGlzdC5wYXJlbnRJZDsKICAgICAgY29uc3Qgc2VsU2VsZWN0ZWQgPSB0aGlzLmNvcHlDb250cm9sTGlzdC50YXJnZXRJZDsKICAgICAgY29uc3QgdXNlckZvcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKICAgICAgY29uc3QgcHJlc2VudEdyb3VwSWQgPSBbXTsKICAgICAgY29uc3QgbmV3R3JvdXBJZCA9IFtdOwogICAgICBjb25zdCBvbGRDb250cm9sSWQgPSBbXTsKICAgICAgY29uc3QgbmV3Q29udHJvbElkID0gW107CgogICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNvcGllZENvbnRyb2xbdGhpcy51c2VyRm9ybUlkXSkgewogICAgICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1ba2V5XS5wcm9wZXJ0aWVzLkdyb3VwSUQ7CgogICAgICAgIGlmIChjb250cm9sUHJvcCAmJiAhcHJlc2VudEdyb3VwSWQuaW5jbHVkZXMoY29udHJvbFByb3ApKSB7CiAgICAgICAgICBwcmVzZW50R3JvdXBJZC5wdXNoKGNvbnRyb2xQcm9wKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGogaW4gcHJlc2VudEdyb3VwSWQpIHsKICAgICAgICBjb25zdCBuZXdJZCA9IHRoaXMuY3JlYXRlR3JvdXBJZCgpOwogICAgICAgIG5ld0dyb3VwSWQucHVzaChuZXdJZCk7CiAgICAgICAgbGV0IGdyb3VwQXJyYXkgPSBbLi4udGhpcy5ncm91cGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5ncm91cEFycmF5LCBuZXdJZF07CiAgICAgICAgdGhpcy51cGRhdGVHcm91cCh7CiAgICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgICBncm91cEFycmF5OiBncm91cEFycmF5CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHJlY0NvcHlDb250cm9sID0gZGFUYXJnZXQgPT4gewogICAgICAgIGNvbnN0IGRhVGFyZ2V0Q29udHJvbHMgPSB1c2VyRm9ybURhdGFbZGFUYXJnZXRdLmNvbnRyb2xzOwoKICAgICAgICBpZiAoZGFUYXJnZXRDb250cm9scy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGltaXQgPSBkYVRhcmdldENvbnRyb2xzLmxlbmd0aDsgaSA8IGxpbWl0OyBpKyspIHsKICAgICAgICAgICAgY29uc3Qga2V5ID0gZGFUYXJnZXRDb250cm9sc1tpXTsKICAgICAgICAgICAgY29uc3QgTmFtZSA9IHRoaXMubmV3UGFzdGVDb250cm9sSWQoa2V5LCBkYVRhcmdldCk7CiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xJRCA9IGBJRF8ke05hbWV9YDsKICAgICAgICAgICAgY29uc3QgY29udHJvbE9iaiA9IHsgLi4udGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1ba2V5XQogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgZ3JvdXBJZEluZGV4ID0gLTE7CiAgICAgICAgICAgIGdyb3VwSWRJbmRleCA9IHByZXNlbnRHcm91cElkLmZpbmRJbmRleCh2YWwgPT4gdmFsID09PSBjb250cm9sT2JqLnByb3BlcnRpZXMuR3JvdXBJRCk7CiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB7IC4uLmNvbnRyb2xPYmosCiAgICAgICAgICAgICAgcHJvcGVydGllczogeyAuLi5jb250cm9sT2JqLnByb3BlcnRpZXMsCiAgICAgICAgICAgICAgICBJRDogY29udHJvbElELAogICAgICAgICAgICAgICAgR3JvdXBJRDogZ3JvdXBJZEluZGV4ICE9PSAtMSA/IG5ld0dyb3VwSWRbZ3JvdXBJZEluZGV4XSA6ICcnLAogICAgICAgICAgICAgICAgTmFtZTogTmFtZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGlsZENvbnRyb2woZGFUYXJnZXQsIGtleSk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlTmV3Q29udHJvbChkYVRhcmdldCwgY29udHJvbElELCBpdGVtLCBmYWxzZSk7CiAgICAgICAgICAgIHJlY0NvcHlDb250cm9sKGNvbnRyb2xJRCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2VsU2VsZWN0ZWQpIHsKICAgICAgICBpZiAoIWtleS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgICBvbGRDb250cm9sSWQucHVzaChrZXkpOwogICAgICAgICAgY29uc3QgTmFtZSA9IHRoaXMubmV3UGFzdGVDb250cm9sSWQoa2V5LCAnJyk7CiAgICAgICAgICBjb25zdCBjb250cm9sSUQgPSBgSURfJHtOYW1lfWA7CiAgICAgICAgICBjb25zdCBjb250cm9sT2JqID0geyAuLi50aGlzLmNvcGllZENvbnRyb2xbdGhpcy51c2VyRm9ybUlkXVtrZXldCiAgICAgICAgICB9OwogICAgICAgICAgbmV3Q29udHJvbElkLnB1c2goY29udHJvbElEKTsKICAgICAgICAgIGxldCBncm91cElkSW5kZXggPSAtMTsKICAgICAgICAgIGdyb3VwSWRJbmRleCA9IHByZXNlbnRHcm91cElkLmZpbmRJbmRleCh2YWwgPT4gY29udHJvbE9iai5wcm9wZXJ0aWVzLkdyb3VwSUQgPT09IHZhbCk7CgogICAgICAgICAgaWYgKHNlbFNlbGVjdGVkLmxlbmd0aCA9PT0gMSAmJiB0aGlzLmNvcGllZENvbnRyb2xbdGhpcy51c2VyRm9ybUlkXVtzZWxTZWxlY3RlZFswXV0ucHJvcGVydGllcy5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBncm91cElkSW5kZXggPSAtMTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBpdGVtID0geyAuLi5jb250cm9sT2JqLAogICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IC4uLmNvbnRyb2xPYmoucHJvcGVydGllcywKICAgICAgICAgICAgICBJRDogY29udHJvbElELAogICAgICAgICAgICAgIExlZnQ6IGNvbnRyb2xPYmoucHJvcGVydGllcy5MZWZ0ICsgMTAsCiAgICAgICAgICAgICAgVG9wOiBjb250cm9sT2JqLnByb3BlcnRpZXMuVG9wICsgMTAsCiAgICAgICAgICAgICAgR3JvdXBJRDogZ3JvdXBJZEluZGV4ICE9PSAtMSA/IG5ld0dyb3VwSWRbZ3JvdXBJZEluZGV4XSA6ICcnLAogICAgICAgICAgICAgIE5hbWU6IE5hbWUKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMudXBkYXRlTmV3Q29udHJvbCh0aGlzLmNvbnRhaW5lcklkLCBjb250cm9sSUQsIGl0ZW0sIHRydWUpOwogICAgICAgICAgcmVjQ29weUNvbnRyb2woY29udHJvbElEKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9yIChsZXQgY3RybElkIGluIHRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1bY3RybElkXS5wcm9wZXJ0aWVzLkdyb3VwSUQ7CgogICAgICAgICAgICBpZiAoY29udHJvbFByb3ApIHsKICAgICAgICAgICAgICBpZiAoY29udHJvbFByb3AgPT09IGtleSkgewogICAgICAgICAgICAgICAgY29uc3QgTmFtZSA9IHRoaXMubmV3UGFzdGVDb250cm9sSWQoY3RybElkLCAnJyk7CiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sSUQgPSBgSURfJHtOYW1lfWA7CiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sT2JqID0gdGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1bY3RybElkXTsKICAgICAgICAgICAgICAgIGxldCBncm91cElkSW5kZXggPSAtMTsKICAgICAgICAgICAgICAgIGdyb3VwSWRJbmRleCA9IHByZXNlbnRHcm91cElkLmZpbmRJbmRleCh2YWwgPT4gY29udHJvbE9iai5wcm9wZXJ0aWVzLkdyb3VwSUQgPT09IHZhbCk7CiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0geyAuLi5jb250cm9sT2JqLAogICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IC4uLmNvbnRyb2xPYmoucHJvcGVydGllcywKICAgICAgICAgICAgICAgICAgICBJRDogY29udHJvbElELAogICAgICAgICAgICAgICAgICAgIExlZnQ6IGNvbnRyb2xPYmoucHJvcGVydGllcy5MZWZ0ICsgMTAsCiAgICAgICAgICAgICAgICAgICAgVG9wOiBjb250cm9sT2JqLnByb3BlcnRpZXMuVG9wICsgMTAsCiAgICAgICAgICAgICAgICAgICAgR3JvdXBJRDogZ3JvdXBJZEluZGV4ICE9PSAtMSA/IG5ld0dyb3VwSWRbZ3JvdXBJZEluZGV4XSA6ICcnLAogICAgICAgICAgICAgICAgICAgIE5hbWU6IE5hbWUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTmV3Q29udHJvbCh0aGlzLmNvbnRhaW5lcklkLCBjb250cm9sSUQsIGl0ZW0sIHRydWUpOwogICAgICAgICAgICAgICAgcmVjQ29weUNvbnRyb2woY29udHJvbElEKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGogb2YgbmV3R3JvdXBJZCkgewogICAgICAgIHRoaXMuY3JlYXRlR3JvdXAoaik7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5ld1NlbGVjdGVkID0gW107CgogICAgICBmb3IgKGNvbnN0IGNvbnRyb2wgb2Ygc2VsU2VsZWN0ZWQpIHsKICAgICAgICBpZiAoY29udHJvbC5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgICBjb25zdCBpbmRleCA9IHByZXNlbnRHcm91cElkLmZpbmRJbmRleCh2YWwgPT4gdmFsID09PSBjb250cm9sKTsKICAgICAgICAgIG5ld1NlbGVjdGVkLnB1c2gobmV3R3JvdXBJZFtpbmRleF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbmRleCA9IG9sZENvbnRyb2xJZC5maW5kSW5kZXgodmFsID0+IHZhbCA9PT0gY29udHJvbCk7CiAgICAgICAgICBuZXdTZWxlY3RlZC5wdXNoKG5ld0NvbnRyb2xJZFtpbmRleF0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zZWxlY3RDb250cm9sKHsKICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgICAgc2VsZWN0OiB7CiAgICAgICAgICBjb250YWluZXI6IHRoaXMuZ2V0Q29udGFpbmVyTGlzdChuZXdTZWxlY3RlZFswXSksCiAgICAgICAgICBzZWxlY3RlZDogbmV3U2VsZWN0ZWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIGlmICh0aGlzLmNvcHlDb250cm9sTGlzdC50eXBlID09PSAnY3V0JykgewogICAgICBjb25zdCBzZWxDb250YWluZXIgPSB0aGlzLmNvcHlDb250cm9sTGlzdC5wYXJlbnRJZDsKICAgICAgY29uc3Qgc2VsU2VsZWN0ZWQgPSB0aGlzLmNvcHlDb250cm9sTGlzdC50YXJnZXRJZDsKICAgICAgY29uc3QgdXNlckZvcm1EYXRhID0gdGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF07CgogICAgICBjb25zdCByZWNDb3B5Q29udHJvbCA9IGRhVGFyZ2V0ID0+IHsKICAgICAgICBjb25zdCBkYVRhcmdldENvbnRyb2xzID0gdXNlckZvcm1EYXRhW2RhVGFyZ2V0XS5jb250cm9sczsKCiAgICAgICAgaWYgKGRhVGFyZ2V0Q29udHJvbHMubGVuZ3RoID4gMCkgewogICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxpbWl0ID0gZGFUYXJnZXRDb250cm9scy5sZW5ndGg7IGkgPCBsaW1pdDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IGtleSA9IGRhVGFyZ2V0Q29udHJvbHNbaV07CiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xPYmogPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdW2tleV0pKTsKICAgICAgICAgICAgY29uc3QgaXRlbSA9IHsgLi4uY29udHJvbE9iagogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnJlbW92ZUNoaWxkQ29udHJvbChkYVRhcmdldCwga2V5KTsKICAgICAgICAgICAgdGhpcy51cGRhdGVOZXdDb250cm9sKGRhVGFyZ2V0LCBrZXksIGl0ZW0sIGZhbHNlKTsKICAgICAgICAgICAgcmVjQ29weUNvbnRyb2woa2V5KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICBmb3IgKGNvbnN0IGtleSBvZiBzZWxTZWxlY3RlZCkgewogICAgICAgIGlmICgha2V5LnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICAgIGNvbnN0IGNvbnRyb2xPYmogPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdW2tleV0pKTsKCiAgICAgICAgICBpZiAoc2VsU2VsZWN0ZWQubGVuZ3RoID09PSAxICYmIHVzZXJGb3JtRGF0YVtzZWxTZWxlY3RlZFswXV0ucHJvcGVydGllcy5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBjb250cm9sT2JqLnByb3BlcnRpZXMuR3JvdXBJRCA9ICcnOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IGl0ZW0gPSB7IC4uLmNvbnRyb2xPYmoKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLnVwZGF0ZU5ld0NvbnRyb2wodGhpcy5jb250YWluZXJJZCwga2V5LCBpdGVtLCB0cnVlKTsKICAgICAgICAgIHJlY0NvcHlDb250cm9sKGtleSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZvciAobGV0IGN0cmxJZCBpbiB1c2VyRm9ybURhdGEpIHsKICAgICAgICAgICAgY29uc3QgY29udHJvbFByb3AgPSB1c2VyRm9ybURhdGFbY3RybElkXS5wcm9wZXJ0aWVzLkdyb3VwSUQ7CgogICAgICAgICAgICBpZiAoY29udHJvbFByb3ApIHsKICAgICAgICAgICAgICBpZiAoY29udHJvbFByb3AgPT09IGtleSkgewogICAgICAgICAgICAgICAgY29uc3QgY29udHJvbE9iaiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1bY3RybElkXSkpOwogICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHsgLi4uY29udHJvbE9iagogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTmV3Q29udHJvbCh0aGlzLmNvbnRhaW5lcklkLCBjdHJsSWQsIGl0ZW0sIHRydWUpOwogICAgICAgICAgICAgICAgcmVjQ29weUNvbnRyb2woY3RybElkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc2VsZWN0Q29udHJvbCh7CiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLAogICAgICAgIHNlbGVjdDogewogICAgICAgICAgY29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lckxpc3Qoc2VsU2VsZWN0ZWRbMF0pLAogICAgICAgICAgc2VsZWN0ZWQ6IHNlbFNlbGVjdGVkCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy51cGRhdGVDb3B5Q29udHJvbExpc3QoewogICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgICBwYXJlbnRJZDogdGhpcy5jb250YWluZXJJZCwKICAgICAgICB0YXJnZXRJZDogc2VsU2VsZWN0ZWQsCiAgICAgICAgdHlwZTogJ2NvcHknCiAgICAgIH0pOwogICAgfQogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gVG8gZGVsZXRlIGNvbnRyb2xzIGluIHJlc3BlY3RpdmUgY29udGFpbmVyIHByZXNlbnQgaW4gcmVzcGVjdGl2ZSB1c2VyZm9ybQogICAqIEBmdW5jdGlvbiBjbGlja0RlbGV0ZQogICAqLwoKCiAgY2xpY2tEZWxldGUoKSB7CiAgICBjb25zdCBzZWxDb250cm9sID0gW107CiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF07CiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkOwogICAgY29uc3Qgc2VsQ29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyOwogICAgY29uc3QgZmlsdGVyQ29udHJvbHMgPSBbXTsKICAgIGNvbnN0IGNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF1dLmNvbnRyb2xzOwoKICAgIGZvciAoY29uc3QgY29udHJvbCBvZiBzZWxlY3RlZCkgewogICAgICBpZiAoIWNvbnRyb2wuc3RhcnRzV2l0aCgnSURfVVNFUkZPUk0nKSkgewogICAgICAgIGlmIChjb250cm9sLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHVzZXJEYXRhKSB7CiAgICAgICAgICAgIGlmICh1c2VyRGF0YVtrZXldLnByb3BlcnRpZXMuR3JvdXBJRCA9PT0gY29udHJvbCkgewogICAgICAgICAgICAgIHNlbENvbnRyb2wucHVzaChrZXkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbENvbnRyb2wucHVzaChjb250cm9sKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID09PSAxICYmICFzZWxlY3RlZFswXS5zdGFydHNXaXRoKCdncm91cCcpICYmIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bc2VsZWN0ZWRbMF1dLnByb3BlcnRpZXMuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb250cm9scy5sZW5ndGg7IGorKykgewogICAgICAgIGlmICh1c2VyRGF0YVtjb250cm9sc1tqXV0ucHJvcGVydGllcy5Hcm91cElEID09PSB1c2VyRGF0YVtzZWxlY3RlZFswXV0ucHJvcGVydGllcy5Hcm91cElEKSB7CiAgICAgICAgICBmaWx0ZXJDb250cm9scy5wdXNoKGNvbnRyb2xzW2pdKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChmaWx0ZXJDb250cm9scy5sZW5ndGggPT09IDIpIHsKICAgICAgICBjb25zdCBjdXJTZWxlY3QgPSBmaWx0ZXJDb250cm9sc1swXSA9PT0gc2VsZWN0ZWRbMF0gPyBmaWx0ZXJDb250cm9sc1sxXSA6IGZpbHRlckNvbnRyb2xzWzBdOwogICAgICAgIGNvbnN0IHNlbEdyb3VwSWQgPSB1c2VyRGF0YVtzZWxlY3RlZFswXV0ucHJvcGVydGllcy5Hcm91cElEOwogICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdHcm91cElEJywgJycsIGN1clNlbGVjdCk7CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbENvbnRyb2wubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgY29udHJvbElkID0gdXNlckRhdGFbc2VsQ29udHJvbFtpXV0udHlwZSA9PT0gJ1BhZ2UnID8gc2VsQ29udGFpbmVyWzBdIDogc2VsQ29udHJvbFtpXTsKICAgICAgdGhpcy5kZWxldGVaSW5kZXgoY29udHJvbElkKTsKICAgICAgdGhpcy5kZWxldGVUYWJJbmRleChjb250cm9sSWQpOwogICAgICB0aGlzLmRlbGV0ZUNvbnRyb2woewogICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwKICAgICAgICBwYXJlbnRJZDogdGhpcy5nZXRDb250YWluZXJMaXN0KGNvbnRyb2xJZClbMF0sCiAgICAgICAgdGFyZ2V0SWQ6IGNvbnRyb2xJZAogICAgICB9KTsKICAgIH0KCiAgICB0aGlzLnNlbGVjdENvbnRyb2woewogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgIHNlbGVjdDogewogICAgICAgIGNvbnRhaW5lcjogdXNlckRhdGFbc2VsQ29udGFpbmVyWzBdXS50eXBlID09PSAnTXVsdGlQYWdlJyA/IHRoaXMuZ2V0Q29udGFpbmVyTGlzdChzZWxDb250YWluZXJbMF0pIDogc2VsQ29udGFpbmVyLAogICAgICAgIHNlbGVjdGVkOiB1c2VyRGF0YVtzZWxDb250YWluZXJbMF1dLnR5cGUgPT09ICdNdWx0aVBhZ2UnID8gW3RoaXMuZ2V0Q29udGFpbmVyTGlzdChzZWxDb250YWluZXJbMF0pWzBdXSA6IFtzZWxDb250YWluZXJbMF1dCiAgICAgIH0KICAgIH0pOwogICAgRXZlbnRCdXMuJGVtaXQoJ2ZvY3VzVXNlckZvcm0nKTsKICB9CgogIHVwZGF0ZUFjdGlvbihldmVudCkgewogICAgbGV0IGNvbnRyb2xBY3Rpb25OYW1lID0gJyc7CgogICAgaWYgKGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQuY29kZSA9PT0gJ0tleUEnKSB7CiAgICAgIGNvbnRyb2xBY3Rpb25OYW1lID0gJ0lEX1NFTEVDVEFMTCc7CiAgICB9IGVsc2UgaWYgKGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQuY29kZSA9PT0gJ0tleUMnKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXSAhPT0gdGhpcy51c2VyRm9ybUlkKSB7CiAgICAgICAgY29udHJvbEFjdGlvbk5hbWUgPSAnSURfQ09QWSc7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNDYpIHsKICAgICAgY29udHJvbEFjdGlvbk5hbWUgPSAnSURfREVMRVRFJzsKICAgIH0gZWxzZSBpZiAoZXZlbnQuY3RybEtleSAmJiBldmVudC5jb2RlID09PSAnS2V5VicpIHsKICAgICAgY29udHJvbEFjdGlvbk5hbWUgPSAnSURfUEFTVEUnOwogICAgfSBlbHNlIGlmIChldmVudC5rZXlDb2RlICYmIGV2ZW50LmNvZGUgPT09ICdLZXlYJykgewogICAgICBjb250cm9sQWN0aW9uTmFtZSA9ICdJRF9DVVQnOwogICAgfQoKICAgIHRoaXMuY29udHJvbEFjdGlvbihjb250cm9sQWN0aW9uTmFtZSwgJycpOwogIH0KCiAgdXBkYXRlUHJvcFZhbChwcm9wTmFtZSwgcHJvcFZhbHVlKSB7CiAgICBjb25zdCBjdHJsU2VsID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQ7CiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKCiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgY29uc3QgY3VyUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXM7CgogICAgICAgIGlmIChwcm9wTmFtZSA9PT0gJ3NlbFJpZ2h0JykgewogICAgICAgICAgY29uc3QgY3VyUmlnaHQgPSBjdXJQcm9wLldpZHRoICsgY3VyUHJvcC5MZWZ0OwogICAgICAgICAgY29uc3QgdmFsdWUgPSBjdXJQcm9wLkxlZnQgKyAocHJvcFZhbHVlIC0gY3VyUmlnaHQpOwogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0xlZnQnLCB2YWx1ZSwgY3RybFNlbFtpbmRleF0pOwogICAgICAgIH0gZWxzZSBpZiAocHJvcE5hbWUgPT09ICdzZWxCb3R0b20nKSB7CiAgICAgICAgICBjb25zdCBjdXJCb3R0b20gPSBjdXJQcm9wLkhlaWdodCArIGN1clByb3AuVG9wOwogICAgICAgICAgY29uc3QgdmFsdWUgPSBjdXJQcm9wLlRvcCArIChwcm9wVmFsdWUgLSBjdXJCb3R0b20pOwogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgfQoKICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxDZW50ZXInKSB7CiAgICAgICAgICBjb25zdCBjdXJDZW50ZXIgPSBjdXJQcm9wLldpZHRoIC8gMjsKICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcFZhbHVlIC0gY3VyQ2VudGVyOwogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0xlZnQnLCB2YWx1ZSwgY3RybFNlbFtpbmRleF0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKHByb3BOYW1lID09PSAnc2VsTWlkZGxlJykgewogICAgICAgICAgY29uc3QgY3VyTWlkZGxlID0gY3VyUHJvcC5IZWlnaHQgLyAyOwogICAgICAgICAgY29uc3QgdmFsdWUgPSBwcm9wVmFsdWUgLSBjdXJNaWRkbGU7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVG9wJywgdmFsdWUsIGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgcHJvcGVydHluYW1lID0gcHJvcE5hbWU7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eShwcm9wZXJ0eW5hbWUsIHByb3BWYWx1ZSwgY3RybFNlbFtpbmRleF0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBncm91cEluZGV4ID0gdGhpcy5ncm91cFN0eWxlQXJyYXkuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgY29uc3QgY3VyUHJvcCA9IHRoaXMuZ3JvdXBTdHlsZUFycmF5W2dyb3VwSW5kZXhdOwogICAgICAgIGNvbnN0IGxlZnQgPSBwYXJzZUludChjdXJQcm9wLmxlZnQpOwogICAgICAgIGNvbnN0IHRvcCA9IHBhcnNlSW50KGN1clByb3AudG9wKTsKICAgICAgICBjb25zdCB3aWR0aCA9IHBhcnNlSW50KGN1clByb3Aud2lkdGgpOwogICAgICAgIGNvbnN0IGhlaWdodCA9IHBhcnNlSW50KGN1clByb3AuaGVpZ2h0KTsKICAgICAgICBsZXQgdmFsdWUgPSAtMTsKCiAgICAgICAgaWYgKHByb3BOYW1lID09PSAnc2VsUmlnaHQnKSB7CiAgICAgICAgICB2YWx1ZSA9IGxlZnQgKyAocHJvcFZhbHVlIC0gKHdpZHRoICsgbGVmdCkpOwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCAnTGVmdCcsIHZhbHVlLCBncm91cEluZGV4KTsKICAgICAgICB9IGVsc2UgaWYgKHByb3BOYW1lID09PSAnc2VsQm90dG9tJykgewogICAgICAgICAgdmFsdWUgPSB0b3AgKyAocHJvcFZhbHVlIC0gKGhlaWdodCArIHRvcCkpOwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCAnVG9wJywgdmFsdWUsIGdyb3VwSW5kZXgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHByb3BOYW1lID09PSAnc2VsQ2VudGVyJykgewogICAgICAgICAgdmFsdWUgPSBwcm9wVmFsdWUgLSB3aWR0aCAvIDI7CiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsICdMZWZ0JywgdmFsdWUsIGdyb3VwSW5kZXgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHByb3BOYW1lID09PSAnc2VsTWlkZGxlJykgewogICAgICAgICAgdmFsdWUgPSBwcm9wVmFsdWUgLSBoZWlnaHQgLyAyOwogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCAnVG9wJywgdmFsdWUsIGdyb3VwSW5kZXgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBwcm9wZXJ0eW5hbWUgPSBwcm9wTmFtZTsKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgcHJvcGVydHluYW1lLCBwcm9wVmFsdWUsIGdyb3VwSW5kZXgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgY29udHJvbEFsaWduTWVudChzdWJWYWwpIHsKICAgIGNvbnN0IG1haW5TZWwgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXTsKICAgIGNvbnN0IGlzR3JvdXAgPSBtYWluU2VsLnN0YXJ0c1dpdGgoJ2dyb3VwJyk7CiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKICAgIGNvbnN0IGN0cmxQcm9wID0gIWlzR3JvdXAgJiYgdXNyRnJtRGF0YVttYWluU2VsXS5wcm9wZXJ0aWVzOwogICAgY29uc3QgZ3JvdXBJbmRleCA9IHRoaXMuZ3JvdXBTdHlsZUFycmF5LmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gbWFpblNlbCk7CiAgICBjb25zdCBuZXdPYmplY3QgPSB7CiAgICAgIExlZnQ6IGlzR3JvdXAgJiYgZ3JvdXBJbmRleCAhPT0gLTEgPyBwYXJzZUludCh0aGlzLmdyb3VwU3R5bGVBcnJheVtncm91cEluZGV4XS5sZWZ0KSA6IGN0cmxQcm9wID8gY3RybFByb3AuTGVmdCA6IDAsCiAgICAgIFRvcDogaXNHcm91cCAmJiBncm91cEluZGV4ICE9PSAtMSA/IHBhcnNlSW50KHRoaXMuZ3JvdXBTdHlsZUFycmF5W2dyb3VwSW5kZXhdLnRvcCkgOiBjdHJsUHJvcCA/IGN0cmxQcm9wLlRvcCA6IDAsCiAgICAgIFdpZHRoOiBpc0dyb3VwICYmIGdyb3VwSW5kZXggIT09IC0xID8gcGFyc2VJbnQodGhpcy5ncm91cFN0eWxlQXJyYXlbZ3JvdXBJbmRleF0ud2lkdGgpIDogY3RybFByb3AgPyBjdHJsUHJvcC5XaWR0aCA6IDAsCiAgICAgIEhlaWdodDogaXNHcm91cCAmJiBncm91cEluZGV4ICE9PSAtMSA/IHBhcnNlSW50KHRoaXMuZ3JvdXBTdHlsZUFycmF5W2dyb3VwSW5kZXhdLmhlaWdodCkgOiBjdHJsUHJvcCA/IGN0cmxQcm9wLkhlaWdodCA6IDAKICAgIH07CgogICAgaWYgKHN1YlZhbCA9PT0gJ0lEX0FMSUdOTEVGVCcpIHsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdMZWZ0JywgbmV3T2JqZWN0LkxlZnQpOwogICAgfSBlbHNlIGlmIChzdWJWYWwgPT09ICdJRF9BTElHTlRPUCcpIHsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdUb3AnLCBuZXdPYmplY3QuVG9wKTsKICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfQUxJR05SSUdIVCcpIHsKICAgICAgY29uc3Qgc2VsUmlnaHQgPSBuZXdPYmplY3QuV2lkdGggKyBuZXdPYmplY3QuTGVmdDsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdzZWxSaWdodCcsIHNlbFJpZ2h0KTsKICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfQUxJR05CT1RUT00nKSB7CiAgICAgIGNvbnN0IHNlbEJvdHRvbSA9IG5ld09iamVjdC5IZWlnaHQgKyBuZXdPYmplY3QuVG9wOwogICAgICB0aGlzLnVwZGF0ZVByb3BWYWwoJ3NlbEJvdHRvbScsIHNlbEJvdHRvbSk7CiAgICB9IGVsc2UgaWYgKHN1YlZhbCA9PT0gJ0lEX0FMSUdOQ0VOVEVSJykgewogICAgICBjb25zdCBzZWxDZW50ZXIgPSBuZXdPYmplY3QuTGVmdCArIG5ld09iamVjdC5XaWR0aCAvIDI7CiAgICAgIHRoaXMudXBkYXRlUHJvcFZhbCgnc2VsQ2VudGVyJywgc2VsQ2VudGVyKTsKICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfQUxJR05NSURETEUnKSB7CiAgICAgIGNvbnN0IHNlbE1pZGRsZSA9IG5ld09iamVjdC5Ub3AgKyBuZXdPYmplY3QuSGVpZ2h0IC8gMjsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdzZWxNaWRkbGUnLCBzZWxNaWRkbGUpOwogICAgfSBlbHNlIGlmIChzdWJWYWwgPT09ICdJRF9XSURUSCcpIHsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdXaWR0aCcsIG5ld09iamVjdC5XaWR0aCk7CiAgICB9IGVsc2UgaWYgKHN1YlZhbCA9PT0gJ0lEX0hFSUdIVCcpIHsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdIZWlnaHQnLCBuZXdPYmplY3QuSGVpZ2h0KTsKICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfQk9USCcpIHsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdIZWlnaHQnLCBuZXdPYmplY3QuSGVpZ2h0KTsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdXaWR0aCcsIG5ld09iamVjdC5XaWR0aCk7CiAgICB9CiAgfQoKICBjb250cm9sRGlzYWJsZShldmVudCkgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogIH0KCn07CgpfX2RlY29yYXRlKFtQcm9wKCldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJ2YWx1ZXMiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAidXNlckZvcm1JZCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJjb250YWluZXJJZCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJrZXlFdmVudE5hbWUiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAiY29udHJvbElkIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3AoKV0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgInNlbGVjdGVkVGFiIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3AoKV0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgImRhdGEiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAiZ3JvdXBTdHlsZUFycmF5Iiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1N0YXRlKHN0YXRlID0+IHN0YXRlLmZkLnNlbGVjdGVkQ29udHJvbHMpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAic2VsZWN0ZWRDb250cm9scyIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtTdGF0ZShzdGF0ZSA9PiBzdGF0ZS5mZC5jb3B5Q29udHJvbExpc3QpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAiY29weUNvbnRyb2xMaXN0Iiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1N0YXRlKHN0YXRlID0+IHN0YXRlLmZkLnVzZXJmb3JtRGF0YSldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJ1c2VyZm9ybURhdGEiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbU3RhdGUoc3RhdGUgPT4gc3RhdGUuZmQuY29waWVkQ29udHJvbCldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJjb3BpZWRDb250cm9sIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1N0YXRlKHN0YXRlID0+IHN0YXRlLmZkLmdyb3VwZWRDb250cm9scyldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJncm91cGVkQ29udHJvbHMiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbQWN0aW9uKCdmZC9kZWxldGVDb250cm9sJyldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJkZWxldGVDb250cm9sIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW0FjdGlvbignZmQvZGVsZXRlQ29waWVkQ29udHJvbCcpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAiZGVsZXRlQ29waWVkQ29udHJvbCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtBY3Rpb24oJ2ZkL3VwZGF0ZUNvcHlDb250cm9sTGlzdCcpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAidXBkYXRlQ29weUNvbnRyb2xMaXN0Iiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW0FjdGlvbignZmQvYWRkQ29udHJvbCcpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAiYWRkQ29udHJvbCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtBY3Rpb24oJ2ZkL2FkZENvcGllZENvbnRyb2wnKV0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgImFkZENvcGllZENvbnRyb2wiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbQWN0aW9uKCdmZC9zZWxlY3RDb250cm9sJyldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJzZWxlY3RDb250cm9sIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW0FjdGlvbignZmQvdXBkYXRlR3JvdXAnKV0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgInVwZGF0ZUdyb3VwIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW0FjdGlvbignZmQvdXBkYXRlQ29udHJvbEV4dHJhRGF0YScpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAidXBkYXRlQ29udHJvbEV4dHJhRGF0YSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtBY3Rpb24oJ2ZkL3VwZGF0ZUNvbnRyb2wnKV0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgInVwZGF0ZUNvbnRyb2wiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbQWN0aW9uKCdmZC9zZXRDaGlsZENvbnRyb2xzJyldLCBDb250ZXh0TWVudS5wcm90b3R5cGUsICJzZXRDaGlsZENvbnRyb2xzIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW0FjdGlvbignZmQvYWRkQ2hpbGRDb250cm9scycpXSwgQ29udGV4dE1lbnUucHJvdG90eXBlLCAiYWRkQ2hpbGRDb250cm9scyIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtFbWl0KCdjbG9zZU1lbnUnKV0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgImNsb3NlTWVudSIsIG51bGwpOwoKX19kZWNvcmF0ZShbRW1pdCgnY3JlYXRlR3JvdXAnKV0sIENvbnRleHRNZW51LnByb3RvdHlwZSwgImNyZWF0ZUdyb3VwIiwgbnVsbCk7CgpDb250ZXh0TWVudSA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgbmFtZTogJ0NvbnRleHRNZW51JywKICBjb21wb25lbnRzOiB7CiAgICBGRFNWR0ltYWdlCiAgfQp9KV0sIENvbnRleHRNZW51KTsKZXhwb3J0IGRlZmF1bHQgQ29udGV4dE1lbnU7"},{"version":3,"sources":["/home/mobiotics/Projects/formcontrols/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mobiotics/Projects/formcontrols/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/formcontrols/src/FormDesigner/components/atoms/FDContextMenu/index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Emit } from 'vue-property-decorator'\nimport FDSVGImage from '@/FormDesigner/components/atoms/FDSVGImage/index.vue'\nimport { ControlPropertyData } from '@/FormDesigner/models/ControlsTableProperties/ControlPropertyData.ts'\n\nimport { Action, State } from 'vuex-class'\nimport {\n  IaddChildControls,\n  IaddControl,\n  IdeleteControl,\n  IselectControl,\n  IsetChildControls,\n  IupdateControl,\n  IupdateControlExtraData,\n  IupdateCopyControlList,\n  IupdateGroup\n} from '@/storeModules/fd/actions'\nimport { EventBus } from '@/FormDesigner/event-bus'\nimport FDCommonMethod from '@/api/abstract/FormDesigner/FDCommonMethod'\n\n@Component({\n  name: 'ContextMenu',\n  components: {\n    FDSVGImage\n  }\n})\nexport default class ContextMenu extends FDCommonMethod {\n  @Prop() values: Array<IControlContextMenu>;\n  @Prop() userFormId: string;\n  @Prop() containerId: string;\n  @Prop() keyEventName: string;\n  @Prop() controlId: string;\n  @Prop() selectedTab: number;\n  @Prop() data: controlData;\n  @Prop() groupStyleArray: Array<IGroupStyle>\n\n  @State((state) => state.fd.selectedControls)\n  selectedControls!: fdState['selectedControls'];\n  @State((state: rootState) => state.fd.copyControlList)\n  copyControlList!: fdState['copyControlList'];\n  @State((state) => state.fd.userformData) userformData!: userformData;\n  @State((state) => state.fd.copiedControl) copiedControl!: userformData;\n  @State((state) => state.fd.groupedControls)\n  groupedControls!: fdState['groupedControls'];\n\n  @Action('fd/deleteControl') deleteControl!: (payload: IdeleteControl) => void;\n  @Action('fd/deleteCopiedControl') deleteCopiedControl!: (payload: IdeleteControl) => void;\n  @Action('fd/updateCopyControlList') updateCopyControlList!: (\n    payload: IupdateCopyControlList\n  ) => void;\n  @Action('fd/addControl') addControl!: (payload: IaddControl) => void;\n  @Action('fd/addCopiedControl') addCopiedControl!: (\n    payload: IaddControl\n  ) => void;\n  @Action('fd/selectControl') selectControl!: (payload: IselectControl) => void;\n  @Action('fd/updateGroup') updateGroup!: (payload: IupdateGroup) => void;\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (\n    payload: IupdateControlExtraData\n  ) => void;\n  @Action('fd/updateControl') updateControl!: (payload: IupdateControl) => void;\n  @Action('fd/setChildControls') setChildControls!: (\n    payload: IsetChildControls\n  ) => void;\n  @Action('fd/addChildControls') addChildControls!: (\n    payload: IaddChildControls\n  ) => void;\n  controlAction (controlActionName: string, subVal: string) {\n    if (controlActionName === 'ID_COPY') {\n      this.copyControl('copy')\n    } else if (controlActionName === 'ID_DELETE') {\n      this.clickDelete()\n    } else if (controlActionName === 'ID_PASTE') {\n      this.pasteControl()\n    } else if (controlActionName === 'ID_CUT') {\n      this.cutControl()\n    } else if (controlActionName === 'ID_SELECTALL') {\n      this.selectAll()\n    } else if (controlActionName === 'ID_GROUP') {\n      this.groupControl()\n    } else if (controlActionName === 'ID_UNGROUP') {\n      this.unGroupControl()\n    } else if (controlActionName === 'ID_NEWPAGE') {\n      this.addNewPage()\n    } else if (controlActionName === 'ID_DELETEPAGE') {\n      this.deleteCurrentPage()\n    } else if (controlActionName === 'ID_CONTROLFORWARD') {\n      this.bringForward()\n    } else if (controlActionName === 'ID_CONTROLBACKWARD') {\n      this.bringBackward()\n    } else if (controlActionName === 'ID_OBJECTPROP') {\n      this.displayProp()\n    } else if (controlActionName === 'ID_RENAME') {\n      const selectedPageID = this.selectedControls[this.userFormId].selected[0]\n      EventBus.$emit(\n        'renamePage',\n        this.userFormId,\n        selectedPageID,\n        this.selectedTab,\n        this.userformData[this.userFormId][selectedPageID].type\n      )\n    } else if (controlActionName === 'ID_MOVE') {\n      const type = this.userformData[this.userFormId][this.controlId].type\n      if (type === 'MultiPage') {\n        EventBus.$emit('userFormTabOrder', this.userFormId, this.controlId, type)\n      } else {\n        EventBus.$emit('tabStripTabOrder', this.userFormId, this.controlId, type)\n      }\n    } else if (controlActionName === 'ID_TABORDER') {\n      EventBus.$emit('userFormTabOrder', this.userFormId, this.containerId, '')\n    } else if (\n      controlActionName === 'ID_ALIGN' ||\n      controlActionName === 'ID_MAKESAMESIZE'\n    ) {\n      this.controlAlignMent(subVal)\n    }\n    this.closeMenu()\n  }\n  created () {\n    EventBus.$on('groupControl', (value: string) => {\n      if (this.selectedControls[this.userFormId].container[0] === this.containerId) {\n        if (value === 'group') {\n          this.groupControl()\n        } else if (value === 'ungroup') {\n          this.unGroupControl()\n        }\n      }\n    })\n  }\n  destroyed () {\n    EventBus.$off('groupControl')\n  }\n  @Emit('closeMenu')\n  closeMenu () {\n    return 0\n  }\n\n  displayProp () {\n    EventBus.$emit('dispProp', false)\n  }\n\n  addNewPage () {\n    const type = this.userformData[this.userFormId][this.controlId].type\n    if (type === 'TabStrip') {\n      const tabControlData = JSON.parse(\n        JSON.stringify(this.userformData[this.userFormId][this.controlId])\n      ).extraDatas.Tabs\n      let prevTabId = -1\n      const initialTabData: tabsItems = {\n        Name: '',\n        Caption: '',\n        ToolTip: '',\n        Accelerator: ''\n      }\n      if (tabControlData.length > 0) {\n        for (let i = 0; i < tabControlData.length; i++) {\n          const id = tabControlData[i].Name.split('Tab').pop() || '-1'\n          const parseId = parseInt(id, 10)\n          if (!isNaN(parseId) && prevTabId < parseId) {\n            prevTabId = parseId\n          }\n        }\n        prevTabId += 1\n        initialTabData.Name = `Tab${prevTabId}`\n        initialTabData.Caption = `Tab${prevTabId}`\n      } else {\n        initialTabData.Name = `Tab${1}`\n        initialTabData.Caption = `Tab${1}`\n      }\n      tabControlData.push(initialTabData)\n      this.updateControlExtraData({\n        userFormId: this.userFormId,\n        controlId: this.controlId,\n        propertyName: 'Tabs',\n        value: tabControlData\n      })\n      this.updateControl({\n        userFormId: this.userFormId,\n        controlId: this.controlId,\n        propertyName: 'Value',\n        value: prevTabId - 1\n      })\n    } else if (type === 'MultiPage') {\n      const parentId = this.controlId.split('MultiPage').pop()\n      const controlName = `Page${parentId}_`\n\n      let lastControlId = 0\n      const userformControlIds = Object.keys(this.userformData[this.userFormId])\n      for (let i = 0; i < userformControlIds.length; i++) {\n        if (userformControlIds[i].indexOf(controlName) !== -1) {\n          const IdNum =\n          userformControlIds[i].split(controlName).pop() || '-1'\n          const pasreId = parseInt(IdNum, 10)\n          if (!isNaN(pasreId) && lastControlId < pasreId) {\n            lastControlId = pasreId\n          }\n        }\n      }\n      const controlPropData = new ControlPropertyData()\n      let controlObj = controlPropData.data['Page']\n      const item = JSON.parse(JSON.stringify(controlObj!))\n      lastControlId += 1\n      item.properties.ID = `ID_${controlName}${lastControlId}`\n      item.properties.Caption = `Page${lastControlId}`\n      item.properties.Name = `Page${lastControlId}`\n      item.properties.Index = this.userformData[this.userFormId][this.controlId].controls.length\n      this.addControl({\n        userFormId: this.userFormId,\n        controlId: this.controlId,\n        addId: item.properties.ID,\n        item: item\n      })\n      this.updateControl({\n        userFormId: this.userFormId,\n        controlId: this.controlId,\n        propertyName: 'Value',\n        value: item.properties.Index\n      })\n      this.selectControl({\n        userFormId: this.userFormId,\n        select: {\n          container: this.getContainerList(item.properties.ID),\n          selected: [item.properties.ID]\n        }\n      })\n      EventBus.$emit('updateMultiPageValue')\n    }\n  }\n  bringForward () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl = []\n    const lowProrControl = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    let nextSelctedSeries: string[] = []\n    let nextHighControlSeries: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl!) {\n      const type = userData[selControl].type\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex + 1)\n      })\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\n      const nextControlType = userData[nextSelectedControl].type\n      if (nextSelectedControl !== '' && !highProrControl.includes(nextSelectedControl)) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextSelctedSeries.includes(selControl)) {\n            nextSelctedSeries.push(selControl)\n          }\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\n            nextSelctedSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextSelctedSeries).length !== 0) {\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', swapTabIndex - (nextSelctedSeries!.length - 1))\n            }\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! + 1\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\n            }\n            nextSelctedSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      } else {\n        if (getSelControl!.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\n          if (!nextHighControlSeries.includes(selControl)) {\n            nextHighControlSeries.push(selControl)\n          }\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\n            nextHighControlSeries.push(nextSelectedControl)\n          }\n        } else if (type === 'Frame' || type === 'MultiPage' || type === 'ListBox') {\n          if (Object.keys(nextHighControlSeries).length !== 0) {\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', swapTabIndex - (nextHighControlSeries!.length - 1))\n            }\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! + 1\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\n            }\n            nextHighControlSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      }\n    }\n  }\n  bringBackward () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl = []\n    const lowProrControl = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    let nextSelctedSeries: string[] = []\n    let nextHighControlSeries: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl) {\n      const type = userData[selControl].type\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex - 1)\n      })\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\n      const nextControlType = userData[nextSelectedControl].type\n      if (nextSelectedControl !== '' && !highProrControl.includes(selControl)) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextSelctedSeries.includes(selControl)) {\n            nextSelctedSeries.push(selControl)\n          }\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\n            nextSelctedSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextSelctedSeries).length !== 0) {\n            console.log('nextSelctedSeries', nextSelctedSeries)\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', (nextSelctedSeries!.length + 1) - swapTabIndex)\n            }\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! - 1\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\n            }\n            nextSelctedSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      } else if (!lowProrControl.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextHighControlSeries.includes(selControl)) {\n            nextHighControlSeries.push(selControl)\n          }\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\n            nextHighControlSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextHighControlSeries).length !== 0) {\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', (nextHighControlSeries!.length + 1) - swapTabIndex)\n            }\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! - 1\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\n            }\n            nextHighControlSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      }\n    }\n  }\n  deletePageIndex (id: string) {\n    const userData = this.userformData[this.userFormId]\n    const container = this.selectedControls[this.userFormId].container[0]\n    const tempIndex = userData[id].properties!.Index!\n    for (const key in userData[container].controls) {\n      const controlZIndex = userData[userData[container].controls[key]].properties!.Index!\n      if (controlZIndex > tempIndex) {\n        this.updateControl({\n          userFormId: this.userFormId,\n          controlId: userData[container].controls[key],\n          propertyName: 'Index',\n          value: controlZIndex - 1\n        })\n      }\n    }\n  }\n  deleteCurrentPage () {\n    const type = this.userformData[this.userFormId][this.controlId].type\n    if (type === 'TabStrip') {\n      const tabControlData = JSON.parse(\n        JSON.stringify(this.userformData[this.userFormId][this.controlId])\n      ).extraDatas.Tabs\n      if (tabControlData && tabControlData.length > 0) {\n        tabControlData.splice(this.selectedTab, 1)\n        this.updateControlExtraData({\n          userFormId: this.userFormId,\n          controlId: this.controlId,\n          propertyName: 'Tabs',\n          value: tabControlData\n        })\n        this.updateTabStripValue(this.selectedTab! - 1)\n      }\n    } else if (type === 'MultiPage') {\n      const controls = this.userformData[this.userFormId][this.controlId].controls\n      if (controls.length > 0) {\n        this.deletePageIndex(this.selectedControls[this.userFormId].selected[0])\n        const index = this.userformData[this.userFormId][this.selectedControls[this.userFormId].selected[0]].properties.Index\n        this.deleteControl({\n          userFormId: this.userFormId,\n          parentId: this.selectedControls[this.userFormId].container[0],\n          targetId: this.selectedControls[this.userFormId].selected[0]\n        })\n        this.updateIndex(index! - 1)\n      }\n      EventBus.$emit('updateMultiPageValue')\n    }\n  }\n  updateTabStripValue (index: number) {\n    const userData = this.userformData[this.userFormId]\n    const tabs = userData[this.controlId].extraDatas!.Tabs!\n    const tabIndex = tabs.findIndex((val, key) => key === index + 1)\n    if (tabIndex !== -1) {\n      const value = index + 1\n      this.updateControlProperty('Value', value, this.controlId)\n    } else if (tabIndex === -1 && index !== -1) {\n      const value = index\n      this.updateControlProperty('Value', value, this.controlId)\n    } else {\n      this.updateControlProperty('Value', -1, this.controlId)\n    }\n  }\n  changeSelect (control: string) {\n    this.selectControl({\n      userFormId: this.userFormId,\n      select: {\n        container: this.getContainerList(control),\n        selected: [control]\n      }\n    })\n  }\n  updateIndex (index: number) {\n    const userData = this.userformData[this.userFormId]\n    const controls = userData[this.controlId].controls\n    const pageIndex = controls.findIndex(val => userData[val].properties.Index === index + 1)\n    if (pageIndex !== -1) {\n      const value = userData[controls[pageIndex]].properties.Index!\n      this.updateControlProperty('Value', value, this.controlId)\n      this.changeSelect(controls[pageIndex])\n    } else if (pageIndex === -1 && index !== -1) {\n      const updateIndex = controls.findIndex(val => userData[val].properties.Index === index)\n      const value = userData[controls[updateIndex]].properties.Index!\n      this.updateControlProperty('Value', value, this.controlId)\n      this.changeSelect(controls[updateIndex])\n    } else {\n      this.updateControlProperty('Value', -1, this.controlId)\n      this.changeSelect(this.controlId)\n    }\n  }\n  updateControlProperty (\n    propertyName: keyof controlProperties,\n    propertyValue: number | string,\n    controlId: string\n  ) {\n    this.updateControl({\n      userFormId: this.userFormId,\n      controlId: controlId,\n      propertyName: propertyName,\n      value: propertyValue\n    })\n  }\n\n  unGroupControl () {\n    const isGroup = this.selectedControls[this.userFormId].selected[0].startsWith('group')\n    const selControl = this.selectedControls[this.userFormId].selected[0]\n    const selected = isGroup\n      ? selControl\n      : this.userformData[this.userFormId][selControl].properties.GroupID!\n\n    const controlList = []\n    for (const key in this.userformData[this.userFormId]) {\n      const type = this.userformData[this.userFormId][key].type\n      if (\n        type !== 'Userform' &&\n        this.userformData[this.userFormId][key].properties.GroupID === selected\n      ) {\n        controlList.push(key)\n      }\n    }\n    const groupArray = [...this.groupedControls[this.userFormId]!.groupArray!]\n    this.updateControlGroupID(selected, '')\n    const index = this.groupedControls[this.userFormId]!.groupArray!.findIndex(\n      (val) => val === selected\n    )\n    groupArray.splice(index, 1)\n    this.updateGroup({ userFormId: this.userFormId, groupArray: groupArray })\n    this.selectControl({\n      userFormId: this.userFormId,\n      select: {\n        container: isGroup\n          ? this.getContainerList(controlList[0])\n          : this.getContainerList(selControl[0]),\n        selected: isGroup ? controlList : [selControl]\n      }\n    })\n  }\n\n  /**\n   * @description To generate new GroupID\n   * @function createGroupId\n   */\n  createGroupId () {\n    let lastControlId = 0\n    for (let i of this.groupedControls[this.userFormId]!.groupArray!) {\n      if (i.indexOf('group') !== -1) {\n        const IdNum = i.split('group').pop() || '-1'\n        const pasreId = parseInt(IdNum, 10)\n        if (!isNaN(pasreId) && lastControlId < pasreId) {\n          lastControlId = pasreId\n        }\n      }\n    }\n    return `group${lastControlId + 1}`\n  }\n\n  @Emit('createGroup')\n  createGroup (groupId: string) {\n    return groupId\n  }\n\n  updateControlGroupID (groupName: string, updateGroupId: string) {\n    for (const val in this.userformData[this.userFormId]) {\n      if (!val.startsWith('ID_USERFORM')) {\n        const controlGrpId = this.userformData[this.userFormId][val].properties\n          .GroupID\n        if (controlGrpId === groupName) {\n          this.updateControlProperty('GroupID', updateGroupId, val)\n        }\n      }\n    }\n  }\n  /**\n   * @description To update the group Information in main data\n   * @function groupControl\n   */\n  groupControl () {\n    let updateGroupId: string = ''\n    const selected = this.selectedControls[this.userFormId].selected\n\n    const selectedGroupArray = selected.filter(\n      (val: string) => val.startsWith('group') && val\n    )\n    updateGroupId = selectedGroupArray[0]\n    if (selectedGroupArray.length >= 2) {\n      const groupArray = [\n        ...this.groupedControls[this.userFormId]!.groupArray!\n      ]\n      for (let i = 0; i < groupArray.length; i++) {\n        for (let j = 0; j < selectedGroupArray.length; j++) {\n          if (selectedGroupArray[j] === groupArray[i]) {\n            this.updateControlGroupID(groupArray[i], selectedGroupArray[0])\n            groupArray.splice(i, 1)\n          }\n        }\n      }\n      this.updateGroup({\n        userFormId: this.userFormId,\n        groupArray: [...groupArray, selectedGroupArray[0]]\n      })\n      updateGroupId = selectedGroupArray[0]!\n    } else if (selectedGroupArray.length === 0) {\n      updateGroupId = this.createGroupId()\n      const groupArray = [\n        ...this.groupedControls[this.userFormId]!.groupArray!,\n        updateGroupId\n      ]\n      this.updateGroup({ userFormId: this.userFormId, groupArray: groupArray })\n    }\n\n    for (let val of selected) {\n      if (!val.startsWith('group')) {\n        this.updateControlProperty('GroupID', updateGroupId, val)\n      }\n    }\n    this.createGroup(updateGroupId)\n    this.selectControl({\n      userFormId: this.userFormId,\n      select: {\n        container: this.getContainerList(updateGroupId),\n        selected: [updateGroupId]\n      }\n    })\n  }\n\n  /**\n   * @description To select all the controls in respective container present in respective userform\n   * @function selectAll\n   */\n  selectAll () {\n    const controlObjectList = [\n      ...this.userformData[this.userFormId][this.containerId].controls\n    ]\n    const selecedGroup: string[] = []\n    for (const val of controlObjectList) {\n      const controlGroupId: string = this.userformData[this.userFormId][val]\n        .properties.GroupID!\n      if (controlGroupId && controlGroupId !== '') {\n        !selecedGroup.includes(controlGroupId)! &&\n          selecedGroup.push(controlGroupId)\n      } else {\n        selecedGroup.push(val)\n      }\n    }\n\n    if (controlObjectList.length !== 0) {\n      this.selectControl({\n        userFormId: this.userFormId,\n        select: {\n          container: this.getContainerList(selecedGroup[0]),\n          selected: [...selecedGroup]\n        }\n      })\n    }\n  }\n\n  /**\n   * @description To update the cutted controls in respective container present in respective userform\n   * @function cutControl\n   */\n  cutControl () {\n    this.copyControl('cut')\n    this.clickDelete()\n  }\n\n  /**\n   * @description To update the copied controls in respective container present in respective userform\n   * @function copyControl\n   */\n  copyControl (type: string) {\n    for (let i = 0; i < this.copiedControl[this.userFormId][this.userFormId].controls.length; i++) {\n      this.deleteCopiedControl({\n        userFormId: this.userFormId,\n        parentId: this.userFormId,\n        targetId: this.copiedControl[this.userFormId][this.userFormId].controls[i]\n      })\n    }\n    const userFormData = this.userformData[this.userFormId]\n    const selContainer = this.selectedControls[this.userFormId].container[0]\n    const selSelected = this.selectedControls[this.userFormId].selected\n    const updateSelected = []\n    for (let control of selSelected) {\n      if (!control.startsWith('group') && userFormData[control].type === 'Page') {\n        control = this.getContainerList(control)[0]\n      }\n      updateSelected.push(control)\n    }\n    this.updateCopyControlList({\n      userFormId: this.userFormId,\n      parentId: selContainer,\n      targetId: updateSelected,\n      type: type\n    })\n\n    const recCopyControl = (daTarget: string) => {\n      const daTargetControls = userFormData[daTarget].controls\n      if (daTargetControls.length > 0) {\n        for (let i in daTargetControls) {\n          const controlObject = JSON.parse(JSON.stringify(userFormData[daTargetControls[i]]))\n          const controlArray = []\n          const ctrlObj = { ...controlObject, controls: [] }\n          this.addCopiedControl({\n            userFormId: this.userFormId,\n            controlId: daTarget,\n            addId: daTargetControls[i],\n            item: ctrlObj\n          })\n          recCopyControl(daTargetControls[i])\n        }\n      }\n    }\n\n    for (let key of selSelected) {\n      if (!key.startsWith('group')) {\n        if (userFormData[key].type === 'Page') {\n          key = this.getContainerList(key)[0]\n        }\n        const controlObject = JSON.parse(JSON.stringify(userFormData[key]))\n        const ctrlObj = { ...controlObject, controls: [] }\n        this.addCopiedControl({\n          userFormId: this.userFormId,\n          controlId: this.userFormId,\n          addId: key,\n          item: ctrlObj\n        })\n        recCopyControl(key)\n      } else {\n        for (let ctrlId in userFormData) {\n          const controlProp = userFormData[ctrlId].properties.GroupID\n          if (controlProp) {\n            if (controlProp === key) {\n              const controlObject = JSON.parse(\n                JSON.stringify(userFormData[ctrlId])\n              )\n              const ctrlObj = { ...controlObject, controls: [] }\n              this.addCopiedControl({\n                userFormId: this.userFormId,\n                controlId: this.userFormId,\n                addId: ctrlId,\n                item: ctrlObj\n              })\n              recCopyControl(ctrlId)\n            }\n          }\n        }\n      }\n    }\n  }\n  updateNewControl (parentId: string, ctrlId: string, ctrlObj: controlData, isParent: boolean) {\n    this.addControl({\n      userFormId: this.userFormId,\n      controlId: parentId,\n      addId: ctrlId,\n      item: ctrlObj\n    })\n    if (isParent) {\n      const newTabIndex = this.userformData[this.userFormId][parentId].controls.length\n      this.updateTabIndexValue(ctrlId)\n      this.updateZIndexValue(ctrlId)\n    }\n  }\n\n  newPasteControlId (key: string, parentId: string) {\n    const userFormData = this.userformData[this.userFormId]\n    let lastControlId = 0\n    const type = key in userFormData ? userFormData[key].type : ''\n    const parentName = parentId !== '' ? parentId.split('MultiPage').pop() : -1\n    const selectedControlName: string | undefined =\n    type === 'Page'\n      ? `Page${parentName}_`\n      : key.replace(/[0-9]/g, '').split('_').pop()\n    const userformControlIds = Object.keys(userFormData)\n    for (let i = 0; i < userformControlIds.length; i++) {\n      if (userformControlIds[i].indexOf(selectedControlName!) !== -1) {\n        const IdNum = userformControlIds[i].split(selectedControlName!).pop() || '-1'\n        const pasreId = parseInt(IdNum, 10)\n        if (!isNaN(pasreId) && lastControlId < pasreId) {\n          lastControlId = pasreId\n        }\n      }\n    }\n    lastControlId += 1\n    const Name = `${selectedControlName}${lastControlId}`\n    return Name\n  }\n  removeChildControl (daTarget: string, deleteControl: string) {\n    const removeControl = [...this.userformData[this.userFormId][daTarget].controls]\n    const removeIndex = removeControl.findIndex((val) => val === deleteControl)\n    removeControl.splice(removeIndex, 1)\n    this.setChildControls({\n      userFormId: this.userFormId,\n      containerId: daTarget,\n      targetControls: removeControl\n    })\n  }\n  /**\n   * @description To paste controls in respective container present in respective userform\n   * @function pasteControl\n   */\n  pasteControl () {\n    if (this.copyControlList.type === 'copy') {\n      const selContainer = this.copyControlList.parentId\n      const selSelected = this.copyControlList.targetId\n      const userFormData = this.userformData[this.userFormId]\n      const presentGroupId: string[] = []\n      const newGroupId: string[] = []\n      const oldControlId: string[] = []\n      const newControlId: string[] = []\n\n      for (const key in this.copiedControl[this.userFormId]) {\n        const controlProp = this.copiedControl[this.userFormId][key].properties.GroupID\n        if (controlProp && !presentGroupId.includes(controlProp)) {\n          presentGroupId.push(controlProp)\n        }\n      }\n      for (let j in presentGroupId) {\n        const newId = this.createGroupId()\n        newGroupId.push(newId)\n        let groupArray: string[] = [\n          ...this.groupedControls[this.userFormId]!.groupArray!,\n          newId\n        ]\n        this.updateGroup({\n          userFormId: this.userFormId,\n          groupArray: groupArray!\n        })\n      }\n\n      const recCopyControl = (daTarget: string) => {\n        const daTargetControls = userFormData[daTarget].controls\n        if (daTargetControls.length > 0) {\n          for (let i = 0, limit = daTargetControls.length; i < limit; i++) {\n            const key = daTargetControls[i]\n            const Name = this.newPasteControlId(key, daTarget)\n            const controlID:| string| undefined = `ID_${Name}`\n            const controlObj = { ...this.copiedControl[this.userFormId][key] }\n            let groupIdIndex = -1\n            groupIdIndex = presentGroupId.findIndex((val) => val === controlObj.properties.GroupID)\n            const item: controlData = {\n              ...controlObj,\n              properties: {\n                ...controlObj.properties,\n                ID: controlID!,\n                GroupID: groupIdIndex !== -1 ? newGroupId[groupIdIndex] : '',\n                Name: Name\n              }\n            }\n            this.removeChildControl(daTarget, key)\n            this.updateNewControl(daTarget, controlID, item, false)\n            recCopyControl(controlID)\n          }\n        }\n      }\n\n      for (const key of selSelected) {\n        if (!key.startsWith('group')) {\n          oldControlId.push(key)\n          const Name = this.newPasteControlId(key, '')\n          const controlID:| string| undefined = `ID_${Name}`\n          const controlObj = { ...this.copiedControl[this.userFormId][key] }\n          newControlId.push(controlID)\n          let groupIdIndex = -1\n          groupIdIndex = presentGroupId.findIndex(\n            (val) => controlObj.properties.GroupID === val\n          )\n          if (selSelected.length === 1 && this.copiedControl[this.userFormId][selSelected[0]].properties.GroupID !== '') {\n            groupIdIndex = -1\n          }\n          const item: controlData = {\n            ...controlObj,\n            properties: {\n              ...controlObj.properties,\n              ID: controlID!,\n              Left: controlObj.properties.Left! + 10,\n              Top: controlObj.properties.Top! + 10,\n              GroupID: groupIdIndex !== -1 ? newGroupId[groupIdIndex] : '',\n              Name: Name\n            }\n          }\n          this.updateNewControl(this.containerId, controlID, item, true)\n          recCopyControl(controlID)\n        } else {\n          for (let ctrlId in this.copiedControl[this.userFormId]) {\n            const controlProp = this.copiedControl[this.userFormId][ctrlId]\n              .properties.GroupID\n            if (controlProp) {\n              if (controlProp === key) {\n                const Name = this.newPasteControlId(ctrlId, '')\n                const controlID:| string| undefined = `ID_${Name}`\n                const controlObj = this.copiedControl[this.userFormId][ctrlId]\n\n                let groupIdIndex = -1\n                groupIdIndex = presentGroupId.findIndex(\n                  (val) => controlObj.properties.GroupID === val\n                )\n                const item: controlData = {\n                  ...controlObj,\n                  properties: {\n                    ...controlObj.properties,\n                    ID: controlID!,\n                    Left: controlObj.properties.Left! + 10,\n                    Top: controlObj.properties.Top! + 10,\n                    GroupID: groupIdIndex !== -1 ? newGroupId[groupIdIndex] : '',\n                    Name: Name\n                  }\n                }\n                this.updateNewControl(this.containerId, controlID, item, true)\n                recCopyControl(controlID)\n              }\n            }\n          }\n        }\n      }\n      for (let j of newGroupId) {\n        this.createGroup(j)\n      }\n      const newSelected: string[] = []\n      for (const control of selSelected) {\n        if (control.startsWith('group')) {\n          const index = presentGroupId.findIndex((val) => val === control)\n          newSelected.push(newGroupId[index])\n        } else {\n          const index = oldControlId.findIndex((val) => val === control)\n          newSelected.push(newControlId[index])\n        }\n      }\n      this.selectControl({\n        userFormId: this.userFormId,\n        select: {\n          container: this.getContainerList(newSelected[0]),\n          selected: newSelected\n        }\n      })\n    } else if (this.copyControlList.type === 'cut') {\n      const selContainer = this.copyControlList.parentId\n      const selSelected = this.copyControlList.targetId\n      const userFormData = this.copiedControl[this.userFormId]\n      const recCopyControl = (daTarget: string) => {\n        const daTargetControls = userFormData[daTarget].controls\n        if (daTargetControls.length > 0) {\n          for (let i = 0, limit = daTargetControls.length; i < limit; i++) {\n            const key = daTargetControls[i]\n            const controlObj = JSON.parse(JSON.stringify(this.copiedControl[this.userFormId][key]))\n            const item: controlData = {\n              ...controlObj\n            }\n            this.removeChildControl(daTarget, key)\n            this.updateNewControl(daTarget, key, item, false)\n            recCopyControl(key)\n          }\n        }\n      }\n      for (const key of selSelected) {\n        if (!key.startsWith('group')) {\n          const controlObj = JSON.parse(\n            JSON.stringify(this.copiedControl[this.userFormId][key])\n          )\n          if (selSelected.length === 1 && userFormData[selSelected[0]].properties.GroupID! !== '') {\n            controlObj.properties.GroupID = ''\n          }\n          const item: controlData = {\n            ...controlObj\n          }\n          this.updateNewControl(this.containerId, key, item, true)\n          recCopyControl(key)\n        } else {\n          for (let ctrlId in userFormData) {\n            const controlProp = userFormData[ctrlId].properties.GroupID\n            if (controlProp) {\n              if (controlProp === key) {\n                const controlObj = JSON.parse(\n                  JSON.stringify(this.copiedControl[this.userFormId][ctrlId])\n                )\n                const item: controlData = {\n                  ...controlObj\n                }\n                this.updateNewControl(this.containerId, ctrlId, item, true)\n                recCopyControl(ctrlId)\n              }\n            }\n          }\n        }\n      }\n      this.selectControl({\n        userFormId: this.userFormId,\n        select: {\n          container: this.getContainerList(selSelected[0]),\n          selected: selSelected\n        }\n      })\n      this.updateCopyControlList({\n        userFormId: this.userFormId,\n        parentId: this.containerId,\n        targetId: selSelected,\n        type: 'copy'\n      })\n    }\n  }\n\n  /**\n   * @description To delete controls in respective container present in respective userform\n   * @function clickDelete\n   */\n  clickDelete () {\n    const selControl = []\n    const userData = this.userformData[this.userFormId]\n    const selected = this.selectedControls[this.userFormId].selected\n    const selContainer = this.selectedControls[this.userFormId].container\n    const filterControls = []\n    const controls = this.userformData[this.userFormId][this.selectedControls[this.userFormId].container[0]].controls\n    for (const control of selected) {\n      if (!control.startsWith('ID_USERFORM')) {\n        if (control.startsWith('group')) {\n          for (const key in userData) {\n            if (\n              userData[key].properties.GroupID === control\n            ) {\n              selControl.push(key)\n            }\n          }\n        } else {\n          selControl.push(control)\n        }\n      }\n    }\n    if (selected.length === 1 && !selected[0].startsWith('group') && this.userformData[this.userFormId][selected[0]].properties.GroupID !== '') {\n      for (let j = 0; j < controls.length; j++) {\n        if (userData[controls[j]].properties.GroupID === userData[selected[0]].properties.GroupID) {\n          filterControls.push(controls[j])\n        }\n      }\n      if (filterControls.length === 2) {\n        const curSelect = filterControls[0] === selected[0] ? filterControls[1] : filterControls[0]\n        const selGroupId = userData[selected[0]].properties.GroupID\n        this.updateControlProperty('GroupID', '', curSelect)\n      }\n    }\n    for (let i = 0; i < selControl.length; i++) {\n      const controlId = userData[selControl[i]].type === 'Page' ? selContainer[0] : selControl[i]\n      this.deleteZIndex(controlId)\n      this.deleteTabIndex(controlId)\n      this.deleteControl({\n        userFormId: this.userFormId,\n        parentId: this.getContainerList(controlId)[0],\n        targetId: controlId\n      })\n    }\n\n    this.selectControl({\n      userFormId: this.userFormId,\n      select: {\n        container: userData[selContainer[0]].type === 'MultiPage' ? this.getContainerList(selContainer[0]) : selContainer,\n        selected: userData[selContainer[0]].type === 'MultiPage' ? [this.getContainerList(selContainer[0])[0]] : [selContainer[0]]\n      }\n    })\n    EventBus.$emit('focusUserForm')\n  }\n  updateAction (event: KeyboardEvent) {\n    let controlActionName = ''\n    if (event.ctrlKey && event.code === 'KeyA') {\n      controlActionName = 'ID_SELECTALL'\n    } else if (event.ctrlKey && event.code === 'KeyC') {\n      if (\n        this.selectedControls[this.userFormId].selected[0] !== this.userFormId\n      ) {\n        controlActionName = 'ID_COPY'\n      }\n    } else if (event.keyCode === 46) {\n      controlActionName = 'ID_DELETE'\n    } else if (event.ctrlKey && event.code === 'KeyV') {\n      controlActionName = 'ID_PASTE'\n    } else if (event.keyCode && event.code === 'KeyX') {\n      controlActionName = 'ID_CUT'\n    }\n    this.controlAction(controlActionName, '')\n  }\n  updatePropVal (propName: string, propValue: number) {\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const usrFrmData = this.userformData[this.userFormId]\n    for (let index = 1; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const curProp = usrFrmData[ctrlSel[index]].properties\n        if (propName === 'selRight') {\n          const curRight = curProp.Width! + curProp.Left!\n          const value = curProp.Left! + (propValue - curRight)\n          this.updateControlProperty('Left', value, ctrlSel[index])\n        } else if (propName === 'selBottom') {\n          const curBottom = curProp.Height! + curProp.Top!\n          const value = curProp.Top! + (propValue - curBottom)\n          this.updateControlProperty('Top', value, ctrlSel[index])\n        }\n        if (propName === 'selCenter') {\n          const curCenter = curProp.Width! / 2\n          const value = propValue - curCenter\n          this.updateControlProperty('Left', value, ctrlSel[index])\n        }\n        if (propName === 'selMiddle') {\n          const curMiddle = curProp.Height! / 2\n          const value = propValue - curMiddle\n          this.updateControlProperty('Top', value, ctrlSel[index])\n        } else {\n          const propertyname: keyof controlProperties = propName as keyof controlProperties\n          this.updateControlProperty(propertyname, propValue, ctrlSel[index])\n        }\n      } else {\n        const groupIndex: number = this.groupStyleArray.findIndex(val => val.groupName === ctrlSel[index])\n        const curProp = this.groupStyleArray[groupIndex]\n        const left = parseInt(curProp.left!)\n        const top = parseInt(curProp.top!)\n        const width = parseInt(curProp.width!)\n        const height = parseInt(curProp.height!)\n        let value = -1\n        if (propName === 'selRight') {\n          value = left! + (propValue - (width! + left!))\n          EventBus.$emit('updasteGroupSize', 'Left', value, groupIndex)\n        } else if (propName === 'selBottom') {\n          value = top! + (propValue - (height + top))\n          EventBus.$emit('updasteGroupSize', 'Top', value, groupIndex)\n        }\n        if (propName === 'selCenter') {\n          value = propValue - (width! / 2)\n          EventBus.$emit('updasteGroupSize', 'Left', value, groupIndex)\n        }\n        if (propName === 'selMiddle') {\n          value = propValue - height! / 2\n          EventBus.$emit('updasteGroupSize', 'Top', value, groupIndex)\n        } else {\n          const propertyname: keyof controlProperties = propName as keyof controlProperties\n          EventBus.$emit('updasteGroupSize', propertyname, propValue, groupIndex)\n        }\n      }\n    }\n  }\n  controlAlignMent (subVal: string) {\n    const mainSel = this.selectedControls[this.userFormId].selected[0]\n    const isGroup = mainSel.startsWith('group')\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlProp = !isGroup && usrFrmData[mainSel].properties\n    const groupIndex: number = this.groupStyleArray.findIndex(val => val.groupName === mainSel)\n    const newObject = {\n      Left: isGroup && groupIndex !== -1 ? parseInt(this.groupStyleArray[groupIndex].left!) : ctrlProp ? ctrlProp.Left! : 0,\n      Top: isGroup && groupIndex !== -1 ? parseInt(this.groupStyleArray[groupIndex].top!) : ctrlProp ? ctrlProp.Top! : 0,\n      Width: isGroup && groupIndex !== -1 ? parseInt(this.groupStyleArray[groupIndex].width!) : ctrlProp ? ctrlProp.Width! : 0,\n      Height: isGroup && groupIndex !== -1 ? parseInt(this.groupStyleArray[groupIndex].height!) : ctrlProp ? ctrlProp.Height! : 0\n    }\n    if (subVal === 'ID_ALIGNLEFT') {\n      this.updatePropVal('Left', newObject.Left!)\n    } else if (subVal === 'ID_ALIGNTOP') {\n      this.updatePropVal('Top', newObject.Top!)\n    } else if (subVal === 'ID_ALIGNRIGHT') {\n      const selRight = newObject.Width! + newObject.Left!\n      this.updatePropVal('selRight', selRight)\n    } else if (subVal === 'ID_ALIGNBOTTOM') {\n      const selBottom = newObject.Height! + newObject.Top!\n      this.updatePropVal('selBottom', selBottom)\n    } else if (subVal === 'ID_ALIGNCENTER') {\n      const selCenter = newObject.Left! + newObject.Width! / 2\n      this.updatePropVal('selCenter', selCenter)\n    } else if (subVal === 'ID_ALIGNMIDDLE') {\n      const selMiddle = newObject.Top! + newObject.Height! / 2\n      this.updatePropVal('selMiddle', selMiddle)\n    } else if (subVal === 'ID_WIDTH') {\n      this.updatePropVal('Width', newObject.Width!)\n    } else if (subVal === 'ID_HEIGHT') {\n      this.updatePropVal('Height', newObject.Height!)\n    } else if (subVal === 'ID_BOTH') {\n      this.updatePropVal('Height', newObject.Height!)\n      this.updatePropVal('Width', newObject.Width!)\n    }\n  }\n\n  controlDisable (event: MouseEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n  }\n}\n"],"sourceRoot":""}]}