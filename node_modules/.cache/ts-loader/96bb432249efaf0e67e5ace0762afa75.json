{"remainingRequest":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/babel-loader/lib/index.js!/home/mobiotics/Projects/hancom/formcontrols/node_modules/ts-loader/index.js??ref--14-2!/home/mobiotics/Projects/hancom/formcontrols/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mobiotics/Projects/hancom/formcontrols/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/formcontrols/src/FormDesigner/components/organisms/FDHeader/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/hancom/formcontrols/src/FormDesigner/components/organisms/FDHeader/index.vue","mtime":1610544258558},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/formcontrols/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IFN0YXRlLCBBY3Rpb24gfSBmcm9tICd2dWV4LWNsYXNzJzsKaW1wb3J0IHsgQ29udHJvbFByb3BlcnR5RGF0YSB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL21vZGVscy9Db250cm9sc1RhYmxlUHJvcGVydGllcy9Db250cm9sUHJvcGVydHlEYXRhJzsKaW1wb3J0IEN1dExvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL2N1dC5zdmcnOwppbXBvcnQgRmlsZVNhdmVMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9maWxlLXNhdmUuc3ZnJzsKaW1wb3J0IENvcHlMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9jb3B5LnN2Zyc7CmltcG9ydCBQYXN0ZUxvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL3Bhc3RlLnN2Zyc7CmltcG9ydCBGaW5kTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvZmluZC5zdmcnOwppbXBvcnQgVW5kb0xvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL3VuZG8uc3ZnJzsKaW1wb3J0IFJlZG9Mb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9yZWRvLnN2Zyc7CmltcG9ydCBEZXNpZ25Nb2RlTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvZGVzaWduLW1vZGUuc3ZnJzsKaW1wb3J0IFBqRXhwbG9yZXJMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9wai1leHBsb3Jlci5zdmcnOwppbXBvcnQgUGpQcm9wZXJ0eUxvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL3BqLXByb3BlcnR5LnN2Zyc7CmltcG9ydCBPYmpCcm93c2VyTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvb2JqLWJyb3dzZXIuc3ZnJzsKaW1wb3J0IFRvb2xCb3hMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy90b29sLWJveC5zdmcnOwppbXBvcnQgVXNlckZvcm1Mb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy91c2VyLWZyb20uc3ZnJzsKaW1wb3J0IEhlbHBMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9oZWxwLnN2Zyc7CmltcG9ydCBDb2RlTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvdmlldy1jb2RlLnN2Zyc7CmltcG9ydCBPYmplY3RMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy92aWV3LW9iamVjdC5zdmcnOwppbXBvcnQgRkRTVkdJbWFnZSBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL2F0b21zL0ZEU1ZHSW1hZ2UvaW5kZXgudnVlJzsKaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICdAL0Zvcm1EZXNpZ25lci9ldmVudC1idXMnOwppbXBvcnQgRkRDb21tb25NZXRob2QgZnJvbSAnQC9hcGkvYWJzdHJhY3QvRm9ybURlc2lnbmVyL0ZEQ29tbW9uTWV0aG9kJzsKbGV0IEhlYWRlciA9IGNsYXNzIEhlYWRlciBleHRlbmRzIEZEQ29tbW9uTWV0aG9kIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICB0aGlzLmRpc3BsYXlTdWJNZW51ID0gZmFsc2U7CiAgICB0aGlzLnByb3BDb250cm9sRGF0YSA9IHt9OwogICAgdGhpcy51c2VyRm9ybUlkID0gJ0lEX1VTRVJGT1JNMSc7CiAgfQoKICBpbnNlcnRVc2VyRm9ybSgpIHsKICAgIHRoaXMucHJvcENvbnRyb2xEYXRhID0gdGhpcy51c2VyZm9ybURhdGE7CiAgICBjb25zdCB1c2VyZm9ybSA9IG5ldyBDb250cm9sUHJvcGVydHlEYXRhKCk7CiAgICBjb25zdCB1c2VyRm9ybUlkID0gYElEX1VTRVJGT1JNJHtPYmplY3Qua2V5cyh0aGlzLnVzZXJmb3JtRGF0YSkubGVuZ3RoICsgMX1gOwogICAgY29uc3QgTmFtZSA9IGBVc2VyRm9ybSR7T2JqZWN0LmtleXModGhpcy51c2VyZm9ybURhdGEpLmxlbmd0aCArIDF9YDsKICAgIGNvbnN0IENhcHRpb24gPSBgVXNlckZvcm0ke09iamVjdC5rZXlzKHRoaXMudXNlcmZvcm1EYXRhKS5sZW5ndGggKyAxfWA7CiAgICBjb25zdCBJRCA9IE9iamVjdC5rZXlzKHRoaXMudXNlcmZvcm1EYXRhKS5sZW5ndGggKyAxOwogICAgdGhpcy5hZGRDb250cm9sKHsKICAgICAgdGFyZ2V0OiB0aGlzLAogICAgICBrZXk6IHVzZXJGb3JtSWQsCiAgICAgIHZhbHVlOiB7CiAgICAgICAgcHJvcGVydGllczogeyAuLi51c2VyZm9ybS5kYXRhLlVzZXJGb3JtLAogICAgICAgICAgTmFtZTogTmFtZSwKICAgICAgICAgIElEOiBJRCwKICAgICAgICAgIENhcHRpb246IENhcHRpb24KICAgICAgICB9LAogICAgICAgIGNvbnRyb2xzOiBbXSwKICAgICAgICBleHRyYURhdGFzOiB7CiAgICAgICAgICBkaXNwbGF5OiAnbm9uZScKICAgICAgICB9LAogICAgICAgIHR5cGU6ICdVc2VyZm9ybScKICAgICAgfQogICAgfSk7CiAgfQoKICBzdWJNZW51RGlzcGxheSgpIHsKICAgIHRoaXMuZGlzcGxheVN1Yk1lbnUgPSAhdGhpcy5kaXNwbGF5U3ViTWVudTsKICB9CgogIGNsaWNrQ2hhbmdlTW9kZSgpIHsKICAgIHRoaXMuY2hhbmdlUnVuTW9kZSghdGhpcy5pc1J1bk1vZGUpOwogIH0KCiAgbWFrZUVxdWFsKHR5cGUpIHsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkOwogICAgY29uc3QgY3RybENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXTsKICAgIGNvbnN0IGNvbnRyb2xzID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9sczsKICAgIGxldCBkaXZzdHlsZSA9IFtdOwogICAgbGV0IGdldEdyb3VwSW5kZXggPSAtMTsKICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCBkaXZzdGF5bGVBcnJheSA9PiB7CiAgICAgIGRpdnN0eWxlID0gZGl2c3RheWxlQXJyYXk7CiAgICB9KTsKCiAgICBpZiAoY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgIGdldEdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0pOwogICAgfQoKICAgIGxldCBwcm9wVmFsdWUgPSAwOwogICAgY29uc3QgbGVmdEFycmF5ID0gW107CiAgICBjb25zdCByaWdodEFycmF5ID0gW107CgogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGN0cmxTZWwubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGNvbnN0IHNlbExlZnQgPSBjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykgPyBwYXJzZUludChkaXZzdHlsZVtnZXRHcm91cEluZGV4XS5sZWZ0KSA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5MZWZ0OwogICAgICBjb25zdCBzZWxUb3AgPSBjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykgPyBwYXJzZUludChkaXZzdHlsZVtnZXRHcm91cEluZGV4XS50b3ApIDogdXNyRnJtRGF0YVtjdHJsU2VsWzBdXS5wcm9wZXJ0aWVzLlRvcDsKCiAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllczsKCiAgICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgICAgaWYgKGN0cmxQcm9wLkxlZnQgPD0gc2VsTGVmdCkgewogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5Ub3AgPD0gc2VsVG9wKSB7CiAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCBkaXZzdGF5bGVBcnJheSA9PiB7CiAgICAgICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5OwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IGdldEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgY29uc3QgZ3JvdXBMZWZ0ID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLmxlZnQpOwogICAgICAgIGNvbnN0IGdyb3VwVG9wID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLnRvcCk7CiAgICAgICAgY29uc3QgZ3JvdXBDb25yb2wgPSB0aGlzLmdldEdyb3VwQ29udHJvbChjdHJsU2VsW2luZGV4XSk7CgogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICAgIGlmIChncm91cExlZnQgPD0gc2VsTGVmdCkgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5MZWZ0KSA9PT0gZ3JvdXBMZWZ0KSB7CiAgICAgICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsKICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzOwoKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLkxlZnQpID09PSBncm91cExlZnQpIHsKICAgICAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgICBpZiAoZ3JvdXBUb3AgPD0gc2VsVG9wKSB7CiAgICAgICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsKICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzOwoKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCkgPT09IGdyb3VwVG9wKSB7CiAgICAgICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsKICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzOwoKICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCkgPT09IGdyb3VwVG9wKSB7CiAgICAgICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFswXSk7CiAgICAgIGNvbnN0IGdyb3VwTGVmdCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS5sZWZ0KTsKICAgICAgY29uc3QgZ3JvdXBUb3AgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0udG9wKTsKICAgICAgY29uc3QgZ3JvdXBDb25yb2wgPSB0aGlzLmdldEdyb3VwQ29udHJvbChjdHJsU2VsWzBdKTsKCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzOwoKICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCkgPT09IGdyb3VwTGVmdCkgewogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsKICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXM7CgogICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3ApID09PSBncm91cFRvcCkgewogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbGVmdEFycmF5LnVuc2hpZnQoY3RybFNlbFswXSk7CiAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsU2VsWzBdKTsKICAgIH0KCiAgICBjb25zb2xlLmxvZyhsZWZ0QXJyYXksICcnLCByaWdodEFycmF5KTsKCiAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0IC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLkxlZnQ7CiAgICAgIH0pOwogICAgICByaWdodEFycmF5LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLkxlZnQgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdDsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5Ub3AgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wOwogICAgICB9KTsKICAgICAgcmlnaHRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5Ub3AgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wOwogICAgICB9KTsKICAgIH0KCiAgICBsZXQgbGVmdENvbnRyb2wgPSB7IC4uLnVzckZybURhdGFbbGVmdEFycmF5WzBdXS5wcm9wZXJ0aWVzCiAgICB9OwoKICAgIGlmIChsZWZ0Q29udHJvbC5Hcm91cElEICE9PSAnJykgewogICAgICBjb25zdCBncm91cEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBsZWZ0Q29udHJvbC5Hcm91cElEKTsKICAgICAgY29uc3QgZ3JvdXBTaXplID0gZGl2c3R5bGVbZ3JvdXBJbmRleF07CiAgICAgIGxlZnRDb250cm9sID0geyAuLi5sZWZ0Q29udHJvbCwKICAgICAgICBXaWR0aDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0ud2lkdGgpLAogICAgICAgIEhlaWdodDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0uaGVpZ2h0KSwKICAgICAgICBMZWZ0OiBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS5sZWZ0KSwKICAgICAgICBUb3A6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLnRvcCkKICAgICAgfTsKICAgIH0KCiAgICBsZXQgcmlnaHRDb250cm9sID0geyAuLi51c3JGcm1EYXRhW3JpZ2h0QXJyYXlbcmlnaHRBcnJheS5sZW5ndGggLSAxXV0ucHJvcGVydGllcwogICAgfTsKCiAgICBpZiAocmlnaHRDb250cm9sLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IHJpZ2h0Q29udHJvbC5Hcm91cElEKTsKICAgICAgY29uc3QgZ3JvdXBTaXplID0gZGl2c3R5bGVbZ3JvdXBJbmRleF07CiAgICAgIHJpZ2h0Q29udHJvbCA9IHsgLi4ubGVmdENvbnRyb2wsCiAgICAgICAgV2lkdGg6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLndpZHRoKSwKICAgICAgICBIZWlnaHQ6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLmhlaWdodCksCiAgICAgICAgTGVmdDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0ubGVmdCksCiAgICAgICAgVG9wOiBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS50b3ApCiAgICAgIH07CiAgICB9CgogICAgbGV0IHRvdGFsU2l6ZSA9IDA7CgogICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGN0cmxTZWwubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllczsKICAgICAgICAgIHRvdGFsU2l6ZSA9IHRvdGFsU2l6ZSArIGN0cmxQcm9wLldpZHRoOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBncm91cEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgICB0b3RhbFNpemUgPSB0b3RhbFNpemUgKyBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS53aWR0aCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXM7CiAgICAgICAgICB0b3RhbFNpemUgPSB0b3RhbFNpemUgKyBjdHJsUHJvcC5IZWlnaHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICAgIHRvdGFsU2l6ZSA9IHRvdGFsU2l6ZSArIHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLmhlaWdodCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbGV0IGRpZmZyZW5jZSA9IDA7CgogICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICBkaWZmcmVuY2UgPSAocmlnaHRDb250cm9sLkxlZnQgKyByaWdodENvbnRyb2wuV2lkdGggLSBsZWZ0Q29udHJvbC5MZWZ0IC0gdG90YWxTaXplKSAvIChjdHJsU2VsLmxlbmd0aCAtIDEpOwogICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICBkaWZmcmVuY2UgPSAocmlnaHRDb250cm9sLlRvcCArIHJpZ2h0Q29udHJvbC5IZWlnaHQgLSBsZWZ0Q29udHJvbC5Ub3AgLSB0b3RhbFNpemUpIC8gKGN0cmxTZWwubGVuZ3RoIC0gMSk7CiAgICB9CgogICAgY29uc3QgdW5pcXVlID0gKCkgPT4gewogICAgICB2YXIgYSA9IGxlZnRBcnJheS5jb25jYXQocmlnaHRBcnJheSk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHsKICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCBhLmxlbmd0aDsgKytqKSB7CiAgICAgICAgICBpZiAoYVtpXSA9PT0gYVtqXSkgewogICAgICAgICAgICBhLnNwbGljZShqLS0sIDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9OwoKICAgIGNvbnN0IGNvbWJpbmVBcnJheSA9IHVuaXF1ZSgpOwoKICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBjb21iaW5lQXJyYXkubGVuZ3RoIC0gMTsgaW5kZXgrKykgewogICAgICBjb25zdCBwcmV2Q3RybFByb3AgPSB1c3JGcm1EYXRhW2NvbWJpbmVBcnJheVtpbmRleCAtIDFdXS5wcm9wZXJ0aWVzOwogICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbY29tYmluZUFycmF5W2luZGV4XV0ucHJvcGVydGllczsKICAgICAgbGV0IHByZXZJbmRleCA9IC0xOwogICAgICBjb25zdCBjb250cm9sUHJvcEluZGV4ID0gLTE7CgogICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEID09PSAnJyAmJiBjdHJsUHJvcC5Hcm91cElEID09PSAnJykgewogICAgICAgICAgcHJvcFZhbHVlID0gcHJldkN0cmxQcm9wLkxlZnQgKyBwcmV2Q3RybFByb3AuV2lkdGggKyBkaWZmcmVuY2U7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGNvbWJpbmVBcnJheVtpbmRleF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQpOwogICAgICAgICAgICBwcm9wVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLmxlZnQpICsgcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS53aWR0aCkgKyBkaWZmcmVuY2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuTGVmdCArIHByZXZDdHJsUHJvcC5XaWR0aCArIGRpZmZyZW5jZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQpOwogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsIHR5cGUsIHByb3BWYWx1ZSwgZ2V0SW5kZXgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBjb21iaW5lQXJyYXlbaW5kZXhdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgPT09ICcnICYmIGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7CiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5Ub3AgKyBwcmV2Q3RybFByb3AuSGVpZ2h0ICsgZGlmZnJlbmNlOwogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGNvbWJpbmVBcnJheVtpbmRleF0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQpOwogICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0udG9wKSArIHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0uaGVpZ2h0KSArIGRpZmZyZW5jZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wICsgcHJldkN0cmxQcm9wLkhlaWdodCArIGRpZmZyZW5jZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQpOwogICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgdHlwZSwgcHJvcFZhbHVlLCBnZXRJbmRleCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBjb21iaW5lQXJyYXlbaW5kZXhdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgYnJpbmdGcm9udCgpIHsKICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKICAgIGNvbnN0IGhpZ2hQcm9yQ29udHJvbCA9IFtdOwogICAgY29uc3QgbG93UHJvckNvbnRyb2wgPSBbXTsKICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhc1swXSlbMF07CiAgICBjb25zdCBjb250YWluZXJDb250cm9scyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9sczsKCiAgICBmb3IgKGNvbnN0IGluZGV4IGluIGNvbnRhaW5lckNvbnRyb2xzKSB7CiAgICAgIGNvbnN0IGNudHJsRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyQ29udHJvbHNbaW5kZXhdXTsKCiAgICAgIGlmIChjbnRybERhdGEudHlwZSA9PT0gJ011bHRpUGFnZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdGcmFtZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdMaXN0Qm94JykgewogICAgICAgIGhpZ2hQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG93UHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pOwogICAgICB9CiAgICB9CgogICAgbG93UHJvckNvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcy56SW5kZXggLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzLnpJbmRleDsKICAgIH0pOwogICAgbGV0IGdldExvd1Byb3BIaWdoZXN0SW5kZXggPSBsb3dQcm9yQ29udHJvbFtsb3dQcm9yQ29udHJvbC5sZW5ndGggLSAxXTsKICAgIGhpZ2hQcm9yQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzLnpJbmRleCAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMuekluZGV4OwogICAgfSk7CiAgICBsZXQgZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXggPSBoaWdoUHJvckNvbnRyb2xbaGlnaFByb3JDb250cm9sLmxlbmd0aCAtIDFdOwogICAgY29uc3QgbG93U2VyaWVzQ29udHJvbCA9IFtdOwogICAgY29uc3QgaGlnaFNlcmllc0NvbnRyb2wgPSBbXTsKICAgIGNvbnN0IGdldFNlbENvbnRyb2wgPSBbLi4udGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNdOwogICAgZ2V0U2VsQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzLnpJbmRleCAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMuekluZGV4OwogICAgfSk7CgogICAgZm9yIChjb25zdCBzZWxDb250cm9sIG9mIGdldFNlbENvbnRyb2wpIHsKICAgICAgaWYgKGxvd1Byb3JDb250cm9sLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7CiAgICAgICAgbG93U2VyaWVzQ29udHJvbC5wdXNoKHNlbENvbnRyb2wpOwogICAgICB9IGVsc2UgewogICAgICAgIGhpZ2hTZXJpZXNDb250cm9sLnB1c2goc2VsQ29udHJvbCk7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBzZXRMb3dQcm9wSGlnaEluZGV4ID0gY29udHJvbCA9PiB7CiAgICAgIGlmIChsb3dTZXJpZXNDb250cm9sLmxlbmd0aCA+IDAgJiYgbG93U2VyaWVzQ29udHJvbC5pbmNsdWRlcyhjb250cm9sKSkgewogICAgICAgIGxvd1Nlcmllc0NvbnRyb2wucG9wKCk7CiAgICAgICAgY29uc3QgSW5kZXggPSBsb3dQcm9yQ29udHJvbC5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW2dldExvd1Byb3BIaWdoZXN0SW5kZXhdLmV4dHJhRGF0YXMuekluZGV4IC0gMSA9PT0gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzLnpJbmRleCk7CiAgICAgICAgZ2V0TG93UHJvcEhpZ2hlc3RJbmRleCA9IEluZGV4ICE9PSAtMSA/IGxvd1Byb3JDb250cm9sW0luZGV4XSA6ICcnOwoKICAgICAgICBpZiAoSW5kZXggIT09IC0xKSB7CiAgICAgICAgICBzZXRMb3dQcm9wSGlnaEluZGV4KGdldExvd1Byb3BIaWdoZXN0SW5kZXgpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBzZXRMb3dQcm9wSGlnaEluZGV4KGdldExvd1Byb3BIaWdoZXN0SW5kZXgpOwogICAgbG93U2VyaWVzQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7CiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzLnpJbmRleCAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMuekluZGV4OwogICAgfSk7CgogICAgaWYgKGxvd1Nlcmllc0NvbnRyb2wubGVuZ3RoID4gMCkgewogICAgICBjb25zdCBsb3dlc3RaSW5kZXggPSB1c2VyRGF0YVtsb3dTZXJpZXNDb250cm9sWzBdXS5leHRyYURhdGFzLnpJbmRleDsKICAgICAgbGV0IG5leHRTZXJpZXMgPSBbXTsKICAgICAgbGV0IGNvdW50ID0gbG93U2VyaWVzQ29udHJvbC5sZW5ndGggLSAxOwogICAgICBjb25zdCBkaWZmID0gdXNlckRhdGFbZ2V0TG93UHJvcEhpZ2hlc3RJbmRleF0uZXh0cmFEYXRhcy56SW5kZXggLSB1c2VyRGF0YVtsb3dTZXJpZXNDb250cm9sW2xvd1Nlcmllc0NvbnRyb2wubGVuZ3RoIC0gMV1dLmV4dHJhRGF0YXMuekluZGV4OwoKICAgICAgZm9yIChjb25zdCBjdHJsIG9mIGxvd1Nlcmllc0NvbnRyb2wpIHsKICAgICAgICBjb25zdCBuZXh0Q29udHJvbCA9IGxvd1Nlcmllc0NvbnRyb2wuZmluZEluZGV4KHZhbCA9PiAnekluZGV4JyBpbiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMgJiYgdXNlckRhdGFbY3RybF0uZXh0cmFEYXRhcy56SW5kZXggKyAxID09PSB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMuekluZGV4KTsKCiAgICAgICAgaWYgKG5leHRDb250cm9sICE9PSAtMSkgewogICAgICAgICAgbmV4dFNlcmllcy5wdXNoKGN0cmwpOwogICAgICAgICAgY291bnQgPSBjb3VudCAtIDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSB1c2VyRGF0YVtnZXRMb3dQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzLnpJbmRleCAtIGNvdW50OwogICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGN0cmwsICd6SW5kZXgnLCBkaWZmZXJlbmNlKTsKCiAgICAgICAgICBpZiAobmV4dFNlcmllcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dFNlcmllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB1c2VyRGF0YVtjdHJsXS5leHRyYURhdGFzLnpJbmRleCAtIChuZXh0U2VyaWVzLmxlbmd0aCAtIGkpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VyaWVzW2ldLCAnekluZGV4JywgZGlmZik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHRTZXJpZXMgPSBbXTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGxldCBjb3VudGVyID0gMDsKCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBsb3dQcm9yQ29udHJvbCkgewogICAgICAgIGlmICghdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMuaW5jbHVkZXMoY3RybCkpIHsKICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMTsKICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhjdHJsLCAnekluZGV4JywgY291bnRlcik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgY29uc3Qgc2V0SGlnaFByb3BIaWdoSW5kZXggPSBjb250cm9sID0+IHsKICAgICAgaWYgKGhpZ2hTZXJpZXNDb250cm9sLmxlbmd0aCA+IDAgJiYgaGlnaFNlcmllc0NvbnRyb2wuaW5jbHVkZXMoY29udHJvbCkpIHsKICAgICAgICBoaWdoU2VyaWVzQ29udHJvbC5wb3AoKTsKICAgICAgICBjb25zdCBJbmRleCA9IGhpZ2hQcm9yQ29udHJvbC5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW2dldEhpZ2hQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzLnpJbmRleCAtIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXgpOwogICAgICAgIGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4ID0gSW5kZXggIT09IC0xID8gaGlnaFByb3JDb250cm9sW0luZGV4XSA6ICcnOwoKICAgICAgICBpZiAoSW5kZXggIT09IC0xKSB7CiAgICAgICAgICBzZXRIaWdoUHJvcEhpZ2hJbmRleChnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHNldEhpZ2hQcm9wSGlnaEluZGV4KGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4KTsKICAgIGhpZ2hTZXJpZXNDb250cm9sLnNvcnQoKGEsIGIpID0+IHsKICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMuekluZGV4IC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcy56SW5kZXg7CiAgICB9KTsKCiAgICBpZiAoaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoID4gMCkgewogICAgICBjb25zdCBoaWdoZXN0WkluZGV4ID0gdXNlckRhdGFbaGlnaFNlcmllc0NvbnRyb2xbMF1dLmV4dHJhRGF0YXMuekluZGV4OwogICAgICBsZXQgbmV4dFNlcmllcyA9IFtdOwogICAgICBsZXQgY291bnQgPSBoaWdoU2VyaWVzQ29udHJvbC5sZW5ndGggLSAxOwogICAgICBjb25zdCBkaWZmID0gdXNlckRhdGFbZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXhdLmV4dHJhRGF0YXMuekluZGV4IC0gdXNlckRhdGFbaGlnaFNlcmllc0NvbnRyb2xbaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoIC0gMV1dLmV4dHJhRGF0YXMuekluZGV4OwoKICAgICAgZm9yIChjb25zdCBjdHJsIG9mIGhpZ2hTZXJpZXNDb250cm9sKSB7CiAgICAgICAgY29uc3QgbmV4dENvbnRyb2wgPSBoaWdoU2VyaWVzQ29udHJvbC5maW5kSW5kZXgodmFsID0+ICd6SW5kZXgnIGluIHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyAmJiB1c2VyRGF0YVtjdHJsXS5leHRyYURhdGFzLnpJbmRleCArIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXgpOwoKICAgICAgICBpZiAobmV4dENvbnRyb2wgIT09IC0xKSB7CiAgICAgICAgICBuZXh0U2VyaWVzLnB1c2goY3RybCk7CiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IHVzZXJEYXRhW2dldEhpZ2hQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzLnpJbmRleCAtIGNvdW50OwogICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGN0cmwsICd6SW5kZXgnLCBkaWZmZXJlbmNlKTsKCiAgICAgICAgICBpZiAobmV4dFNlcmllcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dFNlcmllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB1c2VyRGF0YVtjdHJsXS5leHRyYURhdGFzLnpJbmRleCAtIChuZXh0U2VyaWVzLmxlbmd0aCAtIGkpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VyaWVzW2ldLCAnekluZGV4JywgZGlmZik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHRTZXJpZXMgPSBbXTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGxldCBjb3VudGVyID0gMDsKCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBoaWdoUHJvckNvbnRyb2wpIHsKICAgICAgICBpZiAoIXRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzLmluY2x1ZGVzKGN0cmwpKSB7CiAgICAgICAgICBjb3VudGVyID0gY291bnRlciArIDE7CiAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoY3RybCwgJ3pJbmRleCcsIGNvdW50ZXIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgc2VuZEJhY2soKSB7CiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF07CiAgICBjb25zdCBoaWdoUHJvckNvbnRyb2wgPSBbXTsKICAgIGNvbnN0IGxvd1Byb3JDb250cm9sID0gW107CiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmdldENvbnRhaW5lckxpc3QodGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNbMF0pWzBdOwogICAgY29uc3QgY29udGFpbmVyQ29udHJvbHMgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lcl0uY29udHJvbHM7CgogICAgZm9yIChjb25zdCBpbmRleCBpbiBjb250YWluZXJDb250cm9scykgewogICAgICBjb25zdCBjbnRybERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lckNvbnRyb2xzW2luZGV4XV07CgogICAgICBpZiAoY250cmxEYXRhLnR5cGUgPT09ICdNdWx0aVBhZ2UnIHx8IGNudHJsRGF0YS50eXBlID09PSAnRnJhbWUnIHx8IGNudHJsRGF0YS50eXBlID09PSAnTGlzdEJveCcpIHsKICAgICAgICBoaWdoUHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pOwogICAgICB9IGVsc2UgewogICAgICAgIGxvd1Byb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKTsKICAgICAgfQogICAgfQoKICAgIGxvd1Byb3JDb250cm9sLnNvcnQoKGEsIGIpID0+IHsKICAgICAgcmV0dXJuIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMuekluZGV4IC0gdXNlckRhdGFbYV0uZXh0cmFEYXRhcy56SW5kZXg7CiAgICB9KTsKICAgIGxldCBnZXRMb3dQcm9wSGlnaGVzdEluZGV4ID0gbG93UHJvckNvbnRyb2xbbG93UHJvckNvbnRyb2wubGVuZ3RoIC0gMV07CiAgICBoaWdoUHJvckNvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICByZXR1cm4gdXNlckRhdGFbYl0uZXh0cmFEYXRhcy56SW5kZXggLSB1c2VyRGF0YVthXS5leHRyYURhdGFzLnpJbmRleDsKICAgIH0pOwogICAgbGV0IGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4ID0gaGlnaFByb3JDb250cm9sW2hpZ2hQcm9yQ29udHJvbC5sZW5ndGggLSAxXTsKICAgIGNvbnN0IGxvd1Nlcmllc0NvbnRyb2wgPSBbXTsKICAgIGNvbnN0IGhpZ2hTZXJpZXNDb250cm9sID0gW107CiAgICBjb25zdCBnZXRTZWxDb250cm9sID0gWy4uLnRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzXTsKICAgIGdldFNlbENvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcy56SW5kZXggLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzLnpJbmRleDsKICAgIH0pOwoKICAgIGZvciAoY29uc3Qgc2VsQ29udHJvbCBvZiBnZXRTZWxDb250cm9sKSB7CiAgICAgIGlmIChsb3dQcm9yQ29udHJvbC5pbmNsdWRlcyhzZWxDb250cm9sKSkgewogICAgICAgIGxvd1Nlcmllc0NvbnRyb2wucHVzaChzZWxDb250cm9sKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBoaWdoU2VyaWVzQ29udHJvbC5wdXNoKHNlbENvbnRyb2wpOwogICAgICB9CiAgICB9CgogICAgY29uc3Qgc2V0TG93UHJvcEhpZ2hJbmRleCA9IGNvbnRyb2wgPT4gewogICAgICBpZiAobG93U2VyaWVzQ29udHJvbC5sZW5ndGggPiAwICYmIGxvd1Nlcmllc0NvbnRyb2wuaW5jbHVkZXMoY29udHJvbCkpIHsKICAgICAgICBsb3dTZXJpZXNDb250cm9sLnBvcCgpOwogICAgICAgIGNvbnN0IEluZGV4ID0gbG93UHJvckNvbnRyb2wuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVtnZXRMb3dQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzLnpJbmRleCArIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXgpOwogICAgICAgIGdldExvd1Byb3BIaWdoZXN0SW5kZXggPSBJbmRleCAhPT0gLTEgPyBsb3dQcm9yQ29udHJvbFtJbmRleF0gOiAnJzsKCiAgICAgICAgaWYgKEluZGV4ICE9PSAtMSkgewogICAgICAgICAgc2V0TG93UHJvcEhpZ2hJbmRleChnZXRMb3dQcm9wSGlnaGVzdEluZGV4KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgc2V0TG93UHJvcEhpZ2hJbmRleChnZXRMb3dQcm9wSGlnaGVzdEluZGV4KTsKCiAgICBpZiAobG93U2VyaWVzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgIGxvd1Nlcmllc0NvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzLnpJbmRleCAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMuekluZGV4OwogICAgICB9KTsKICAgICAgbGV0IGNvdW50ID0gdXNlckRhdGFbZ2V0TG93UHJvcEhpZ2hlc3RJbmRleF0uZXh0cmFEYXRhcy56SW5kZXg7CgogICAgICBmb3IgKGNvbnN0IGN0cmwgb2YgbG93U2VyaWVzQ29udHJvbCkgewogICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhjdHJsLCAnekluZGV4JywgY291bnQpOwogICAgICAgIGNvdW50ID0gY291bnQgKyAxOwogICAgICB9CgogICAgICBsZXQgY291bnRlciA9IHVzZXJEYXRhW2xvd1Nlcmllc0NvbnRyb2xbbG93U2VyaWVzQ29udHJvbC5sZW5ndGggLSAxXV0uZXh0cmFEYXRhcy56SW5kZXg7CgogICAgICBmb3IgKGxldCBpID0gbG93UHJvckNvbnRyb2wubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICBpZiAoIXRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzLmluY2x1ZGVzKGxvd1Byb3JDb250cm9sW2ldKSkgewogICAgICAgICAgY291bnRlciA9IGNvdW50ZXIgKyAxOwogICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGxvd1Byb3JDb250cm9sW2ldLCAnekluZGV4JywgY291bnRlcik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgY29uc3Qgc2V0SGlnaFByb3BIaWdoSW5kZXggPSBjb250cm9sID0+IHsKICAgICAgaWYgKGhpZ2hTZXJpZXNDb250cm9sLmxlbmd0aCA+IDAgJiYgaGlnaFNlcmllc0NvbnRyb2wuaW5jbHVkZXMoY29udHJvbCkpIHsKICAgICAgICBoaWdoU2VyaWVzQ29udHJvbC5zaGlmdCgpOwogICAgICAgIGNvbnN0IEluZGV4ID0gaGlnaFByb3JDb250cm9sLmZpbmRJbmRleCh2YWwgPT4gdXNlckRhdGFbZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXhdLmV4dHJhRGF0YXMuekluZGV4ICsgMSA9PT0gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzLnpJbmRleCk7CiAgICAgICAgZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXggPSBJbmRleCAhPT0gLTEgPyBoaWdoUHJvckNvbnRyb2xbSW5kZXhdIDogJyc7CgogICAgICAgIGlmIChJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIHNldEhpZ2hQcm9wSGlnaEluZGV4KGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgc2V0SGlnaFByb3BIaWdoSW5kZXgoZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXgpOwoKICAgIGlmIChoaWdoU2VyaWVzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgIGhpZ2hTZXJpZXNDb250cm9sLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcy56SW5kZXggLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzLnpJbmRleDsKICAgICAgfSk7CiAgICAgIGxldCBjb3VudCA9IHVzZXJEYXRhW2dldEhpZ2hQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBoaWdoU2VyaWVzQ29udHJvbCkgewogICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhjdHJsLCAnekluZGV4JywgY291bnQpOwogICAgICAgIGNvdW50ID0gY291bnQgKyAxOwogICAgICB9CgogICAgICBsZXQgY291bnRlciA9IHVzZXJEYXRhW2hpZ2hTZXJpZXNDb250cm9sW2hpZ2hTZXJpZXNDb250cm9sLmxlbmd0aCAtIDFdXS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgIGZvciAobGV0IGkgPSBoaWdoUHJvckNvbnRyb2wubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICBpZiAoIXRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzLmluY2x1ZGVzKGhpZ2hQcm9yQ29udHJvbFtpXSkpIHsKICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMTsKICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhoaWdoUHJvckNvbnRyb2xbaV0sICd6SW5kZXgnLCBjb3VudGVyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGdyb3VwQ29udHJvbCgpIHsKICAgIEV2ZW50QnVzLiRlbWl0KCdncm91cENvbnRyb2wnLCAnZ3JvdXAnKTsKICB9CgogIHVuR3JvdXBDb250cm9sKCkgewogICAgRXZlbnRCdXMuJGVtaXQoJ2dyb3VwQ29udHJvbCcsICd1bmdyb3VwJyk7CiAgfQoKICBzaXplVG9GaXQoKSB7CiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKICAgIGNvbnN0IGN0cmxTZWwgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZDsKICAgIGNvbnN0IHNpemVUb0ZpdEFyciA9IFtdOwogICAgY29uc3Qgc2l6ZVRvRml0VmFsID0gW107CgogICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGN0cmxTZWwubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgIGNvbnN0IGNvbnRyb2xwcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllczsKCiAgICAgICAgaWYgKCdBdXRvU2l6ZScgaW4gY29udHJvbHByb3ApIHsKICAgICAgICAgIHNpemVUb0ZpdEFyci5wdXNoKGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICAgIHNpemVUb0ZpdFZhbC5wdXNoKGNvbnRyb2xwcm9wLkF1dG9TaXplKTsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdBdXRvU2l6ZScsIHRydWUsIGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNpemVUb0ZpdEFyci5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBpZiAoIXNpemVUb0ZpdEFycltpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgICAgY29uc3QgY29udHJvbHByb3AgPSB1c3JGcm1EYXRhW3NpemVUb0ZpdEFycltpbmRleF1dLnByb3BlcnRpZXM7CgogICAgICAgICAgaWYgKCdBdXRvU2l6ZScgaW4gY29udHJvbHByb3ApIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0F1dG9TaXplJywgc2l6ZVRvRml0VmFsW2luZGV4XSwgc2l6ZVRvRml0QXJyW2luZGV4XSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LCAxMDApOwogIH0KCiAgc2l6ZVRvR3JpZCgpIHsKICAgIGxldCBkaXZzdHlsZSA9IFtdOwogICAgY29uc3QgdXNyRnJtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF07CiAgICBjb25zdCBjdHJsU2VsID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQ7CiAgICBsZXQgY3RybENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXTsKCiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgY29uc3QgY29udHJvbHByb3AgPSB1c3JGcm1EYXRhW2N0cmxTZWxbaW5kZXhdXS5wcm9wZXJ0aWVzOwogICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdMZWZ0JywgTWF0aC50cnVuYyhjb250cm9scHJvcC5MZWZ0KSwgY3RybFNlbFtpbmRleF0pOwogICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCBNYXRoLnRydW5jKGNvbnRyb2xwcm9wLlRvcCksIGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnV2lkdGgnLCBNYXRoLnRydW5jKGNvbnRyb2xwcm9wLldpZHRoKSwgY3RybFNlbFtpbmRleF0pOwogICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdIZWlnaHQnLCBNYXRoLnRydW5jKGNvbnRyb2xwcm9wLkhlaWdodCksIGN0cmxTZWxbaW5kZXhdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgZGl2c3RheWxlQXJyYXkgPT4gewogICAgICAgICAgZGl2c3R5bGUgPSBkaXZzdGF5bGVBcnJheTsKICAgICAgICB9KTsKICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0pOwogICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgJ0dyb3VwSUQnLCAwLCBnZXRJbmRleCk7CiAgICAgIH0KICAgIH0KICB9CgogIGluY0RlY3NwYWNpbmcodHlwZSwgdmFsdWUpIHsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkOwogICAgY29uc3QgY3RybENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXTsKICAgIGNvbnN0IGNvbnRyb2xzID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9sczsKICAgIGxldCBkaXZzdHlsZSA9IFtdOwogICAgbGV0IGdldEdyb3VwSW5kZXggPSAtMTsKCiAgICBpZiAoY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCBkaXZzdGF5bGVBcnJheSA9PiB7CiAgICAgICAgZGl2c3R5bGUgPSBkaXZzdGF5bGVBcnJheTsKICAgICAgfSk7CiAgICAgIGdldEdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0pOwogICAgfQoKICAgIGNvbnN0IGxlZnRBcnJheSA9IFtdOwogICAgY29uc3QgcmlnaHRBcnJheSA9IFtdOwoKICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBzZWxMZWZ0ID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpID8gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0R3JvdXBJbmRleF0ubGVmdCkgOiB1c3JGcm1EYXRhW2N0cmxTZWxbMF1dLnByb3BlcnRpZXMuTGVmdDsKICAgICAgY29uc3Qgc2VsVG9wID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpID8gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0R3JvdXBJbmRleF0udG9wKSA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5Ub3A7CgogICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXM7CgogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5MZWZ0IDw9IHNlbExlZnQpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgICBpZiAoY3RybFByb3AuVG9wIDw9IHNlbFRvcCkgewogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgZGl2c3RheWxlQXJyYXkgPT4gewogICAgICAgICAgZGl2c3R5bGUgPSBkaXZzdGF5bGVBcnJheTsKICAgICAgICB9KTsKICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0pOwogICAgICAgIGNvbnN0IGdyb3VwTGVmdCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS5sZWZ0KTsKICAgICAgICBjb25zdCBncm91cFRvcCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS50b3ApOwogICAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFtpbmRleF0pOwoKICAgICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgICAgICBpZiAoZ3JvdXBMZWZ0IDw9IHNlbExlZnQpIHsKICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXM7CgogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCkgPT09IGdyb3VwTGVmdCkgewogICAgICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5MZWZ0KSA9PT0gZ3JvdXBMZWZ0KSB7CiAgICAgICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICAgICAgaWYgKGdyb3VwVG9wIDw9IHNlbFRvcCkgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3ApID09PSBncm91cFRvcCkgewogICAgICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3ApID09PSBncm91cFRvcCkgewogICAgICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmIChjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0pOwogICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCk7CiAgICAgIGNvbnN0IGdyb3VwVG9wID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLnRvcCk7CiAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFswXSk7CgogICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLkxlZnQpID09PSBncm91cExlZnQpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzOwoKICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuVG9wKSA9PT0gZ3JvdXBUb3ApIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGxlZnRBcnJheS51bnNoaWZ0KGN0cmxTZWxbMF0pOwogICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFswXSk7CiAgICB9CgogICAgY29uc29sZS5sb2cobGVmdEFycmF5LCAnJywgcmlnaHRBcnJheSk7CgogICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICBsZWZ0QXJyYXkuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdCAtIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0OwogICAgICB9KTsKICAgICAgcmlnaHRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0IC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLkxlZnQ7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICBsZWZ0QXJyYXkuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wIC0gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLlRvcDsKICAgICAgfSk7CiAgICAgIHJpZ2h0QXJyYXkuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcDsKICAgICAgfSk7CiAgICB9CgogICAgY29uc29sZS5sb2cobGVmdEFycmF5LCByaWdodEFycmF5KTsKICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0pOwogICAgY29uc3QgaXNHcm91cCA9IGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKTsKICAgIGNvbnN0IGN0cmxQcm9wID0gIWlzR3JvdXAgJiYgdXNyRnJtRGF0YVtjdHJsU2VsWzBdXS5wcm9wZXJ0aWVzOwogICAgY29uc3QgbmV3T2JqZWN0ID0gewogICAgICBMZWZ0OiBpc0dyb3VwICYmIGdyb3VwSW5kZXggIT09IC0xID8gcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0ubGVmdCkgOiBjdHJsUHJvcCA/IGN0cmxQcm9wLkxlZnQgOiAwLAogICAgICBUb3A6IGlzR3JvdXAgJiYgZ3JvdXBJbmRleCAhPT0gLTEgPyBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS50b3ApIDogY3RybFByb3AgPyBjdHJsUHJvcC5Ub3AgOiAwLAogICAgICBXaWR0aDogaXNHcm91cCAmJiBncm91cEluZGV4ICE9PSAtMSA/IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLndpZHRoKSA6IGN0cmxQcm9wID8gY3RybFByb3AuV2lkdGggOiAwLAogICAgICBIZWlnaHQ6IGlzR3JvdXAgJiYgZ3JvdXBJbmRleCAhPT0gLTEgPyBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS5oZWlnaHQpIDogY3RybFByb3AgPyBjdHJsUHJvcC5IZWlnaHQgOiAwCiAgICB9OwogICAgbGV0IGluY0RlY1ZhbHVlID0gMDsKICAgIGxldCBwcm9wVmFsdWUgPSAwOwoKICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBsZWZ0QXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtsZWZ0QXJyYXlbaW5kZXhdXS5wcm9wZXJ0aWVzOwogICAgICBsZXQgcHJldkluZGV4ID0gLTE7CiAgICAgIGxldCBjb250cm9sUHJvcEluZGV4ID0gLTE7CgogICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7CiAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZTsKICAgICAgICAgIGluY0RlY1ZhbHVlID0gY3RybFByb3AuTGVmdCAtIHByb3BWYWx1ZTsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KHR5cGUsIE1hdGgucm91bmQoaW5jRGVjVmFsdWUgLyAxMCkgKiAxMCwgbGVmdEFycmF5W2luZGV4XSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBjb250cm9sUHJvcEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEKTsKICAgICAgICAgICAgbGV0IGluY0RlY1ZhbHVlID0gMDsKICAgICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWU7CiAgICAgICAgICAgIGluY0RlY1ZhbHVlID0gcGFyc2VJbnQoZGl2c3R5bGVbY29udHJvbFByb3BJbmRleF0ubGVmdCkgLSBwcm9wVmFsdWU7CiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgdHlwZSwgTWF0aC5yb3VuZChpbmNEZWNWYWx1ZSAvIDEwKSAqIDEwLCBjb250cm9sUHJvcEluZGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IHByb3BWYWx1ZSArIHZhbHVlOwogICAgICAgICAgaW5jRGVjVmFsdWUgPSBjdHJsUHJvcC5Ub3AgLSBwcm9wVmFsdWU7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBNYXRoLnJvdW5kKGluY0RlY1ZhbHVlIC8gMTApICogMTAsIGxlZnRBcnJheVtpbmRleF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgY29udHJvbFByb3BJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFByb3AuR3JvdXBJRCk7CiAgICAgICAgICAgIGxldCBpbmNEZWNWYWx1ZSA9IDA7CiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByb3BWYWx1ZSArIHZhbHVlOwogICAgICAgICAgICBpbmNEZWNWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW2NvbnRyb2xQcm9wSW5kZXhdLnRvcCkgLSBwcm9wVmFsdWU7CiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgdHlwZSwgTWF0aC5yb3VuZChpbmNEZWNWYWx1ZSAvIDEwKSAqIDEwLCBjb250cm9sUHJvcEluZGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBwcm9wVmFsdWUgPSAwOwoKICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCByaWdodEFycmF5Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbcmlnaHRBcnJheVtpbmRleF1dLnByb3BlcnRpZXM7CiAgICAgIGxldCBwcmV2SW5kZXggPSAtMTsKICAgICAgbGV0IGNvbnRyb2xQcm9wSW5kZXggPSAtMTsKCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IHByb3BWYWx1ZSArIHZhbHVlOwogICAgICAgICAgaW5jRGVjVmFsdWUgPSBjdHJsUHJvcC5MZWZ0ICsgcHJvcFZhbHVlOwogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgTWF0aC5yb3VuZChpbmNEZWNWYWx1ZSAvIDEwKSAqIDEwLCByaWdodEFycmF5W2luZGV4XSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBjb250cm9sUHJvcEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEKTsKICAgICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWU7CiAgICAgICAgICAgIGluY0RlY1ZhbHVlID0gcGFyc2VJbnQoZGl2c3R5bGVbY29udHJvbFByb3BJbmRleF0ubGVmdCkgKyBwcm9wVmFsdWU7CiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgdHlwZSwgTWF0aC5yb3VuZChpbmNEZWNWYWx1ZSAvIDEwKSAqIDEwLCBjb250cm9sUHJvcEluZGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIGxldCBpbmNEZWNWYWx1ZSA9IDA7CiAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZTsKICAgICAgICAgIGluY0RlY1ZhbHVlID0gY3RybFByb3AuVG9wICsgcHJvcFZhbHVlOwogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgTWF0aC5yb3VuZChpbmNEZWNWYWx1ZSAvIDEwKSAqIDEwLCByaWdodEFycmF5W2luZGV4XSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBjb250cm9sUHJvcEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEKTsKICAgICAgICAgICAgbGV0IGluY0RlY1ZhbHVlID0gMDsKICAgICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWU7CiAgICAgICAgICAgIGluY0RlY1ZhbHVlID0gcGFyc2VJbnQoZGl2c3R5bGVbY29udHJvbFByb3BJbmRleF0udG9wKSArIHByb3BWYWx1ZTsKICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCB0eXBlLCBNYXRoLnJvdW5kKGluY0RlY1ZhbHVlIC8gMTApICogMTAsIGNvbnRyb2xQcm9wSW5kZXgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgZ2V0R3JvdXBDb250cm9sKGdyb3VwTmFtZSkgewogICAgY29uc3QgY3RybENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXTsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgY29uc3QgY29udHJvbHMgPSBbXTsKCiAgICBmb3IgKGNvbnN0IGNvbnRyb2wgb2YgdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9scykgewogICAgICBpZiAodXNyRnJtRGF0YVtjb250cm9sXS5wcm9wZXJ0aWVzLkdyb3VwSUQgPT09IGdyb3VwTmFtZSkgewogICAgICAgIGNvbnRyb2xzLnB1c2goY29udHJvbCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gY29udHJvbHM7CiAgfQoKICByZW1vdmVTcGFjZSh0eXBlKSB7CiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKICAgIGNvbnN0IGN0cmxTZWwgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZDsKICAgIGNvbnN0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF07CiAgICBjb25zdCBjb250cm9scyA9IHVzckZybURhdGFbY3RybENvbnRhaW5lcl0uY29udHJvbHM7CiAgICBsZXQgZGl2c3R5bGUgPSBbXTsKICAgIGxldCBnZXRHcm91cEluZGV4ID0gLTE7CgogICAgaWYgKGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgZGl2c3RheWxlQXJyYXkgPT4gewogICAgICAgIGRpdnN0eWxlID0gZGl2c3RheWxlQXJyYXk7CiAgICAgIH0pOwogICAgICBnZXRHcm91cEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsWzBdKTsKICAgIH0KCiAgICBsZXQgcHJvcFZhbHVlID0gMDsKICAgIGNvbnN0IGxlZnRBcnJheSA9IFtdOwogICAgY29uc3QgcmlnaHRBcnJheSA9IFtdOwoKICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBzZWxMZWZ0ID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpID8gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0R3JvdXBJbmRleF0ubGVmdCkgOiB1c3JGcm1EYXRhW2N0cmxTZWxbMF1dLnByb3BlcnRpZXMuTGVmdDsKICAgICAgY29uc3Qgc2VsVG9wID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpID8gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0R3JvdXBJbmRleF0udG9wKSA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5Ub3A7CgogICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXM7CgogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsKICAgICAgICAgIGlmIChjdHJsUHJvcC5MZWZ0IDw9IHNlbExlZnQpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7CiAgICAgICAgICBpZiAoY3RybFByb3AuVG9wIDw9IHNlbFRvcCkgewogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgZGl2c3RheWxlQXJyYXkgPT4gewogICAgICAgICAgZGl2c3R5bGUgPSBkaXZzdGF5bGVBcnJheTsKICAgICAgICB9KTsKICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0pOwogICAgICAgIGNvbnN0IGdyb3VwTGVmdCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS5sZWZ0KTsKICAgICAgICBjb25zdCBncm91cFRvcCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS50b3ApOwogICAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFtpbmRleF0pOwoKICAgICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgICAgICBpZiAoZ3JvdXBMZWZ0IDw9IHNlbExlZnQpIHsKICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXM7CgogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCkgPT09IGdyb3VwTGVmdCkgewogICAgICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5MZWZ0KSA9PT0gZ3JvdXBMZWZ0KSB7CiAgICAgICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICAgICAgaWYgKGdyb3VwVG9wIDw9IHNlbFRvcCkgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3ApID09PSBncm91cFRvcCkgewogICAgICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3ApID09PSBncm91cFRvcCkgewogICAgICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmIChjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0pOwogICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCk7CiAgICAgIGNvbnN0IGdyb3VwVG9wID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLnRvcCk7CiAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFswXSk7CgogICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7CiAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgewogICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllczsKCiAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLkxlZnQpID09PSBncm91cExlZnQpIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7CiAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzOwoKICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuVG9wKSA9PT0gZ3JvdXBUb3ApIHsKICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCk7CiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGxlZnRBcnJheS51bnNoaWZ0KGN0cmxTZWxbMF0pOwogICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFswXSk7CiAgICB9CgogICAgY29uc29sZS5sb2cobGVmdEFycmF5LCAnJywgcmlnaHRBcnJheSk7CgogICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICBsZWZ0QXJyYXkuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdCAtIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0OwogICAgICB9KTsKICAgICAgcmlnaHRBcnJheS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0IC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLkxlZnQ7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgewogICAgICBsZWZ0QXJyYXkuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wIC0gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLlRvcDsKICAgICAgfSk7CiAgICAgIHJpZ2h0QXJyYXkuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcDsKICAgICAgfSk7CiAgICB9CgogICAgY29uc29sZS5sb2cobGVmdEFycmF5LCByaWdodEFycmF5KTsKCiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgbGVmdEFycmF5Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBwcmV2Q3RybFByb3AgPSB1c3JGcm1EYXRhW2xlZnRBcnJheVtpbmRleCAtIDFdXS5wcm9wZXJ0aWVzOwogICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbbGVmdEFycmF5W2luZGV4XV0ucHJvcGVydGllczsKICAgICAgbGV0IHByZXZJbmRleCA9IC0xOwogICAgICBsZXQgY29udHJvbFByb3BJbmRleCA9IC0xOwoKICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycgJiYgY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0IC0gY3RybFByb3AuV2lkdGg7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGxlZnRBcnJheVtpbmRleF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEID09PSAnJykgewogICAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQpOwogICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0ubGVmdCkgLSBjdHJsUHJvcC5XaWR0aDsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGxlZnRBcnJheVtpbmRleF0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIGNvbnRyb2xQcm9wSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQpOwoKICAgICAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEID09PSAnJykgewogICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0IC0gcGFyc2VJbnQoZGl2c3R5bGVbY29udHJvbFByb3BJbmRleF0ud2lkdGgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQpOwogICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0ubGVmdCkgLSBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS53aWR0aCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgdHlwZSwgcHJvcFZhbHVlLCBjb250cm9sUHJvcEluZGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgPT09ICcnICYmIGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7CiAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wIC0gY3RybFByb3AuSGVpZ2h0OwogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBsZWZ0QXJyYXlbaW5kZXhdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgICAgICBwcmV2SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElEKTsKICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLnRvcCkgLSBjdHJsUHJvcC5IZWlnaHQ7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBsZWZ0QXJyYXlbaW5kZXhdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBjb250cm9sUHJvcEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEKTsKCiAgICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wIC0gcGFyc2VJbnQoZGl2c3R5bGVbY29udHJvbFByb3BJbmRleF0uaGVpZ2h0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwcmV2SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElEKTsKICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLnRvcCkgLSBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS5oZWlnaHQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsIHR5cGUsIHByb3BWYWx1ZSwgY29udHJvbFByb3BJbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IHJpZ2h0QXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIGNvbnN0IHByZXZDdHJsUHJvcCA9IHVzckZybURhdGFbcmlnaHRBcnJheVtpbmRleCAtIDFdXS5wcm9wZXJ0aWVzOwogICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbcmlnaHRBcnJheVtpbmRleF1dLnByb3BlcnRpZXM7CiAgICAgIGxldCBwcmV2SW5kZXggPSAtMTsKICAgICAgY29uc3QgY29udHJvbFByb3BJbmRleCA9IC0xOwoKICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0JykgewogICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycgJiYgY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsKICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ICsgcHJldkN0cmxQcm9wLldpZHRoOwogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCByaWdodEFycmF5W2luZGV4XSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgcHJldkluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBwcmV2Q3RybFByb3AuR3JvdXBJRCk7CiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0ubGVmdCkgKyBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLndpZHRoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ICsgcHJldkN0cmxQcm9wLldpZHRoOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgewogICAgICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFByb3AuR3JvdXBJRCk7CiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgdHlwZSwgcHJvcFZhbHVlLCBnZXRJbmRleCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIHJpZ2h0QXJyYXlbaW5kZXhdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsKICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgPT09ICcnICYmIGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7CiAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wICsgcHJldkN0cmxQcm9wLkhlaWdodDsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KHR5cGUsIHByb3BWYWx1ZSwgcmlnaHRBcnJheVtpbmRleF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7CiAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQpOwogICAgICAgICAgICBwcm9wVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLnRvcCkgKyBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLmhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wICsgcHJldkN0cmxQcm9wLkhlaWdodDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsKICAgICAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQpOwogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsIHR5cGUsIHByb3BWYWx1ZSwgZ2V0SW5kZXgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCByaWdodEFycmF5W2luZGV4XSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICB1cGRhdGVQcm9wVmFsKHByb3BOYW1lLCBwcm9wVmFsdWUpIHsKICAgIGNvbnN0IGN0cmxTZWwgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZDsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwoKICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsKICAgICAgICBjb25zdCBjdXJQcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllczsKCiAgICAgICAgaWYgKHByb3BOYW1lID09PSAnc2VsQ2VudGVyJykgewogICAgICAgICAgY29uc3QgY3VyQ2VudGVyID0gY3VyUHJvcC5XaWR0aCAvIDI7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHByb3BWYWx1ZSAtIGN1ckNlbnRlcjsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdMZWZ0JywgdmFsdWUsIGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICB9CgogICAgICAgIGlmIChwcm9wTmFtZSA9PT0gJ3NlbE1pZGRsZScpIHsKICAgICAgICAgIGNvbnN0IGN1ck1pZGRsZSA9IGN1clByb3AuSGVpZ2h0IC8gMjsKICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcFZhbHVlIC0gY3VyTWlkZGxlOwogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGxldCBkaXZzdHlsZSA9IFtdOwogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCBkaXZzdGF5bGVBcnJheSA9PiB7CiAgICAgICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5OwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgodmFsID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbaW5kZXhdKTsKICAgICAgICBjb25zdCBjdXJQcm9wID0gZGl2c3R5bGVbZ3JvdXBJbmRleF07CiAgICAgICAgY29uc3QgbGVmdCA9IHBhcnNlSW50KGN1clByb3AubGVmdCk7CiAgICAgICAgY29uc3QgdG9wID0gcGFyc2VJbnQoY3VyUHJvcC50b3ApOwogICAgICAgIGNvbnN0IHdpZHRoID0gcGFyc2VJbnQoY3VyUHJvcC53aWR0aCk7CiAgICAgICAgY29uc3QgaGVpZ2h0ID0gcGFyc2VJbnQoY3VyUHJvcC5oZWlnaHQpOwogICAgICAgIGxldCB2YWx1ZSA9IC0xOwoKICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxDZW50ZXInKSB7CiAgICAgICAgICB2YWx1ZSA9IHByb3BWYWx1ZSAtIHdpZHRoIC8gMjsKICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgJ0xlZnQnLCB2YWx1ZSwgZ3JvdXBJbmRleCk7CiAgICAgICAgfQoKICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxNaWRkbGUnKSB7CiAgICAgICAgICB2YWx1ZSA9IHByb3BWYWx1ZSAtIGhlaWdodCAvIDI7CiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsICdUb3AnLCB2YWx1ZSwgZ3JvdXBJbmRleCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBjZW50cmVJbkZvcm0odmFsdWUpIHsKICAgIGxldCBkaXZzdHlsZSA9IFtdOwogICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXTsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW21haW5Db250YWluZXJdLnByb3BlcnRpZXM7CgogICAgaWYgKHZhbHVlID09PSAnaG9yaXpvbnRhbCcpIHsKICAgICAgY29uc3Qgc2VsQ2VudGVyID0gY3RybFByb3AuTGVmdCArIGN0cmxQcm9wLldpZHRoIC8gMjsKICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdzZWxDZW50ZXInLCBzZWxDZW50ZXIpOwogICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ3ZlcnRpY2FsJykgewogICAgICBjb25zdCBzZWxNaWRkbGUgPSBjdHJsUHJvcC5Ub3AgKyBjdHJsUHJvcC5IZWlnaHQgLyAyOwogICAgICB0aGlzLnVwZGF0ZVByb3BWYWwoJ3NlbE1pZGRsZScsIHNlbE1pZGRsZSk7CiAgICB9CiAgfQoKICBhcnJhbmdlQnV0dG9uKHR5cGUpIHsKICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdOwogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkOwogICAgbGV0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF07CiAgICBjdHJsQ29udGFpbmVyID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS50eXBlID09PSAnUGFnZScgPyB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMV0gOiBjdHJsQ29udGFpbmVyOwogICAgY29uc3QgYnV0dG9uQXJyYXkgPSBbXTsKCiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7CiAgICAgICAgY29uc3QgY29udHJvbHByb3AgPSB1c3JGcm1EYXRhW2N0cmxTZWxbaW5kZXhdXTsKCiAgICAgICAgaWYgKGNvbnRyb2xwcm9wLnR5cGUgPT09ICdDb21tYW5kQnV0dG9uJykgewogICAgICAgICAgYnV0dG9uQXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKHR5cGUgPT09ICdib3R0b20nKSB7CiAgICAgIGJ1dHRvbkFycmF5LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLkxlZnQgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdDsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyaWdodCcpIHsKICAgICAgYnV0dG9uQXJyYXkuc29ydCgoYSwgYikgPT4gewogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcDsKICAgICAgfSk7CiAgICB9CgogICAgY29uc29sZS5sb2coYnV0dG9uQXJyYXkpOwogICAgY29uc3QgY29udGFpbmVyUHJvcCA9IHVzckZybURhdGFbY3RybENvbnRhaW5lcl0ucHJvcGVydGllczsKICAgIGxldCB2YWx1ZSA9IDA7CiAgICBjb25zdCBjb250YWluZXJIZWlnaHQgPSB1c3JGcm1EYXRhW2N0cmxDb250YWluZXJdLnR5cGUgPT09ICdVc2VyZm9ybScgPyA0NyA6IHVzckZybURhdGFbY3RybENvbnRhaW5lcl0udHlwZSA9PT0gJ0ZyYW1lJyA/IDI3IDogdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS50eXBlID09PSAnTXVsdGlQYWdlJyA/IDQwIDogMDsKICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gMjA7CgogICAgaWYgKHR5cGUgPT09ICdib3R0b20nKSB7CiAgICAgIHZhbHVlID0gY29udGFpbmVyUHJvcC5IZWlnaHQgLSBjb250YWluZXJIZWlnaHQgLSB1c3JGcm1EYXRhW2J1dHRvbkFycmF5WzBdXS5wcm9wZXJ0aWVzLkhlaWdodDsKICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHZhbHVlLCBidXR0b25BcnJheVswXSk7CiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdMZWZ0JywgMzAsIGJ1dHRvbkFycmF5WzBdKTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3JpZ2h0JykgewogICAgICB2YWx1ZSA9IGNvbnRhaW5lclByb3AuV2lkdGggLSBjb250YWluZXJXaWR0aCAtIHVzckZybURhdGFbYnV0dG9uQXJyYXlbMF1dLnByb3BlcnRpZXMuV2lkdGg7CiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdMZWZ0JywgdmFsdWUsIGJ1dHRvbkFycmF5WzBdKTsKICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIDIwLCBidXR0b25BcnJheVswXSk7CiAgICB9CgogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGJ1dHRvbkFycmF5Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBwcmV2Q3RybFByb3AgPSB1c3JGcm1EYXRhW2J1dHRvbkFycmF5W2luZGV4IC0gMV1dLnByb3BlcnRpZXM7CiAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtidXR0b25BcnJheVtpbmRleF1dLnByb3BlcnRpZXM7CgogICAgICBpZiAodHlwZSA9PT0gJ2JvdHRvbScpIHsKICAgICAgICBsZXQgcHJvcFZhbHVlID0gcHJldkN0cmxQcm9wLkxlZnQgKyBwcmV2Q3RybFByb3AuV2lkdGggKyAxMDsKICAgICAgICB2YWx1ZSA9IGNvbnRhaW5lclByb3AuSGVpZ2h0IC0gY29udGFpbmVySGVpZ2h0IC0gdXNyRnJtRGF0YVtidXR0b25BcnJheVtpbmRleF1dLnByb3BlcnRpZXMuSGVpZ2h0OwoKICAgICAgICBpZiAocHJvcFZhbHVlICsgY3RybFByb3AuV2lkdGggPD0gY29udGFpbmVyUHJvcC5XaWR0aCAtIGNvbnRhaW5lcldpZHRoKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHByb3BWYWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKTsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCB2YWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcHJvcFZhbHVlID0gY29udGFpbmVyUHJvcC5XaWR0aCAtIGNvbnRhaW5lcldpZHRoIC0gY3RybFByb3AuV2lkdGg7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHByb3BWYWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKTsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCB2YWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3JpZ2h0JykgewogICAgICAgIGxldCBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wICsgcHJldkN0cmxQcm9wLkhlaWdodCArIDEwOwogICAgICAgIHZhbHVlID0gY29udGFpbmVyUHJvcC5XaWR0aCAtIGNvbnRhaW5lcldpZHRoIC0gdXNyRnJtRGF0YVtidXR0b25BcnJheVtpbmRleF1dLnByb3BlcnRpZXMuV2lkdGg7CgogICAgICAgIGlmIChwcm9wVmFsdWUgKyBjdHJsUHJvcC5IZWlnaHQgPD0gY29udGFpbmVyUHJvcC5IZWlnaHQgLSBjb250YWluZXJIZWlnaHQpIHsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCBwcm9wVmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSk7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHZhbHVlLCBidXR0b25BcnJheVtpbmRleF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcm9wVmFsdWUgPSBjb250YWluZXJQcm9wLkhlaWdodCAtIGNvbnRhaW5lckhlaWdodCAtIGN0cmxQcm9wLkhlaWdodDsKICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCBwcm9wVmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSk7CiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHZhbHVlLCBidXR0b25BcnJheVtpbmRleF0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgdXBkYXRlQ29udHJvbFByb3BlcnR5KHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSwgY29udHJvbElkKSB7CiAgICB0aGlzLnVwZGF0ZUNvbnRyb2woewogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsCiAgICAgIGNvbnRyb2xJZDogY29udHJvbElkLAogICAgICBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSwKICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUKICAgIH0pOwogIH0KCiAgZ2V0ZGlzYWJsZVN0eWxlKGlkKSB7CiAgICBsZXQgZGlzYWJsZWQgPSB0cnVlOwogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZDsKICAgIGNvbnN0IHNlbENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lcjsKICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKCiAgICBpZiAoaWQgPT09ICd1bkdyb3VwJykgewogICAgICBsZXQgZ3JvdXBJZCA9IGZhbHNlOwogICAgICBjb25zdCBzZWxlY3RlZEdyb3VwQXJyYXkgPSBzZWxlY3RlZC5maWx0ZXIodmFsID0+IHZhbC5zdGFydHNXaXRoKCdncm91cCcpICYmIHZhbCk7CgogICAgICBpZiAoc2VsZWN0ZWRHcm91cEFycmF5Lmxlbmd0aCA9PT0gMSAmJiBzZWxlY3RlZC5sZW5ndGggPT09IDEpIHsKICAgICAgICBkaXNhYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CgogICAgaWYgKGlkID09PSAnZ3JvdXAnKSB7CiAgICAgIGRpc2FibGVkID0gc2VsZWN0ZWQubGVuZ3RoIDw9IDE7CiAgICB9CgogICAgaWYgKGlkID09PSAnc2l6ZVRvR3JpZCcgfHwgaWQgPT09ICdjZW50cmVJbkZvcm0nKSB7CiAgICAgIGRpc2FibGVkID0gIShzZWxlY3RlZC5sZW5ndGggPj0gMSAmJiBzZWxlY3RlZFswXSAhPT0gc2VsQ29udGFpbmVyWzBdKTsKICAgIH0KCiAgICBpZiAoaWQgPT09ICdzaXplVG9GaXQnKSB7CiAgICAgIGNvbnN0IHNlbFNlbGVjdGVkID0gW107CgogICAgICBmb3IgKGNvbnN0IGNvbnRyb2wgb2YgdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQpIHsKICAgICAgICBpZiAoIWNvbnRyb2wuc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udHJvbF0udHlwZTsKCiAgICAgICAgICBpZiAodHlwZSAhPT0gJ011bHRpUGFnZScgJiYgdHlwZSAhPT0gJ0ZyYW1lJyAmJiB0eXBlICE9PSAnTGlzdEJveCcgJiYgdHlwZSAhPT0gJ1BhZ2UnICYmIHR5cGUgIT09ICdUYWJTdHJpcCcgJiYgdHlwZSAhPT0gJ1VzZXJmb3JtJykgewogICAgICAgICAgICBzZWxTZWxlY3RlZC5wdXNoKGNvbnRyb2wpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZGlzYWJsZWQgPSAhKHNlbFNlbGVjdGVkLmxlbmd0aCA+PSAxKTsKICAgIH0KCiAgICBpZiAoaWQgPT09ICdvcmRlcicpIHsKICAgICAgZGlzYWJsZWQgPSAhKHNlbGVjdGVkLmxlbmd0aCA+PSAxICYmIHVzZXJEYXRhW3NlbENvbnRhaW5lclswXV0uY29udHJvbHMubGVuZ3RoID49IDIpOwogICAgfQoKICAgIGlmIChpZCA9PT0gJ21ha2VFcXVhbCcpIHsKICAgICAgZGlzYWJsZWQgPSAhKHNlbGVjdGVkLmxlbmd0aCA+PSAzKTsKICAgIH0KCiAgICBpZiAoaWQgPT09ICdpbmNEZWNzcGFjaW5nJyB8fCBpZCA9PT0gJ3JlbW92ZVNwYWNlJykgewogICAgICBkaXNhYmxlZCA9ICEoc2VsZWN0ZWQubGVuZ3RoID49IDIpOwogICAgfQoKICAgIGlmIChpZCA9PT0gJ2FycmFuZ2VCdXR0b24nKSB7CiAgICAgIGNvbnN0IGJ1dHRvbkFycmF5ID0gW107CgogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2VsZWN0ZWQubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKCFzZWxlY3RlZFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgewogICAgICAgICAgY29uc3QgY29udHJvbHByb3AgPSB1c2VyRGF0YVtzZWxlY3RlZFtpbmRleF1dOwoKICAgICAgICAgIGlmIChjb250cm9scHJvcC50eXBlID09PSAnQ29tbWFuZEJ1dHRvbicpIHsKICAgICAgICAgICAgYnV0dG9uQXJyYXkucHVzaChzZWxlY3RlZFtpbmRleF0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZGlzYWJsZWQgPSAhKGJ1dHRvbkFycmF5Lmxlbmd0aCA+PSAxKTsKICAgIH0KCiAgICByZXR1cm4gZGlzYWJsZWQ7CiAgfQoKICBicmluZ0ZvcndhcmQoKSB7CiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF07CiAgICBjb25zdCBoaWdoUHJvckNvbnRyb2wgPSBbXTsKICAgIGNvbnN0IGxvd1Byb3JDb250cm9sID0gW107CiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmdldENvbnRhaW5lckxpc3QodGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNbMF0pWzBdOwogICAgY29uc3QgY29udGFpbmVyQ29udHJvbHMgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lcl0uY29udHJvbHM7CgogICAgZm9yIChjb25zdCBpbmRleCBpbiBjb250YWluZXJDb250cm9scykgewogICAgICBjb25zdCBjbnRybERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lckNvbnRyb2xzW2luZGV4XV07CgogICAgICBpZiAoY250cmxEYXRhLnR5cGUgPT09ICdNdWx0aVBhZ2UnIHx8IGNudHJsRGF0YS50eXBlID09PSAnRnJhbWUnIHx8IGNudHJsRGF0YS50eXBlID09PSAnTGlzdEJveCcpIHsKICAgICAgICBoaWdoUHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pOwogICAgICB9IGVsc2UgewogICAgICAgIGxvd1Byb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKTsKICAgICAgfQogICAgfQoKICAgIGxldCBuZXh0U2VsY3RlZFNlcmllcyA9IFtdOwogICAgbGV0IG5leHRIaWdoQ29udHJvbFNlcmllcyA9IFtdOwogICAgY29uc3QgZ2V0U2VsQ29udHJvbCA9IFsuLi50aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhc107CiAgICBnZXRTZWxDb250cm9sLnNvcnQoKGEsIGIpID0+IHsKICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMuekluZGV4IC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcy56SW5kZXg7CiAgICB9KTsKCiAgICBmb3IgKGNvbnN0IHNlbENvbnRyb2wgb2YgZ2V0U2VsQ29udHJvbCkgewogICAgICBjb25zdCB0eXBlID0gdXNlckRhdGFbc2VsQ29udHJvbF0udHlwZTsKICAgICAgY29uc3QgdGVtcFpJbmRleCA9IHVzZXJEYXRhW3NlbENvbnRyb2xdLmV4dHJhRGF0YXMuekluZGV4OwogICAgICBjb25zdCBjb250cm9sSW5kZXggPSBPYmplY3Qua2V5cyh1c2VyRGF0YSkuZmluZEluZGV4KCh2YWwsIGluZGV4KSA9PiB7CiAgICAgICAgcmV0dXJuICd6SW5kZXgnIGluIHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyAmJiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMuekluZGV4ID09PSB0ZW1wWkluZGV4ICsgMTsKICAgICAgfSk7CiAgICAgIGNvbnN0IG5leHRTZWxlY3RlZENvbnRyb2wgPSBjb250cm9sSW5kZXggIT09IC0xID8gT2JqZWN0LmtleXModXNlckRhdGEpW2NvbnRyb2xJbmRleF0gOiAnJzsKICAgICAgY29uc3QgbmV4dENvbnRyb2xUeXBlID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0udHlwZTsKCiAgICAgIGlmIChuZXh0U2VsZWN0ZWRDb250cm9sICE9PSAnJyAmJiAhaGlnaFByb3JDb250cm9sLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgaWYgKGdldFNlbENvbnRyb2wuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsKICAgICAgICAgIGlmICghbmV4dFNlbGN0ZWRTZXJpZXMuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsKICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMucHVzaChzZWxDb250cm9sKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIW5leHRTZWxjdGVkU2VyaWVzLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzLnB1c2gobmV4dFNlbGVjdGVkQ29udHJvbCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXh0U2VsY3RlZFNlcmllcykubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgIGNvbnN0IHRlbXBFeGNoYWdlSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsY3RlZFNlcmllc1swXV0uZXh0cmFEYXRhcy56SW5kZXg7CiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMuekluZGV4OwoKICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aAogICAgICAgICAgICAvKiAmJiBzd2FwVGFiSW5kZXggPiAwICovCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCh2YWwgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ3pJbmRleCcsIHRlbXBFeGNoYWdlSW5kZXgpOwogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxjdGVkU2VyaWVzWzBdLCAnekluZGV4Jywgc3dhcFRhYkluZGV4IC0gKG5leHRTZWxjdGVkU2VyaWVzLmxlbmd0aCAtIDEpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IG5leHRTZWxjdGVkU2VyaWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsY3RlZFNlcmllc1tqXV0uZXh0cmFEYXRhcy56SW5kZXggKyAxOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsY3RlZFNlcmllc1tqXSwgJ3pJbmRleCcsIHVwZGF0ZUluZGV4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMgPSBbXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMuekluZGV4OwoKICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aAogICAgICAgICAgICAvKiAmJiBzd2FwVGFiSW5kZXggPiAwICovCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCh2YWwgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhzZWxDb250cm9sLCAnekluZGV4Jywgc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZ2V0U2VsQ29udHJvbC5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSAmJiAodHlwZSA9PT0gJ0ZyYW1lJyB8fCB0eXBlID09PSAnTXVsdGlQYWdlJyB8fCB0eXBlID09PSAnTGlzdEJveCcpKSB7CiAgICAgICAgICBpZiAoIW5leHRIaWdoQ29udHJvbFNlcmllcy5pbmNsdWRlcyhzZWxDb250cm9sKSkgewogICAgICAgICAgICBuZXh0SGlnaENvbnRyb2xTZXJpZXMucHVzaChzZWxDb250cm9sKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIW5leHRIaWdoQ29udHJvbFNlcmllcy5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgICAgICBuZXh0SGlnaENvbnRyb2xTZXJpZXMucHVzaChuZXh0U2VsZWN0ZWRDb250cm9sKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdGcmFtZScgfHwgdHlwZSA9PT0gJ011bHRpUGFnZScgfHwgdHlwZSA9PT0gJ0xpc3RCb3gnKSB7CiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV4dEhpZ2hDb250cm9sU2VyaWVzKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgY29uc3QgdGVtcEV4Y2hhZ2VJbmRleCA9IHVzZXJEYXRhW25leHRIaWdoQ29udHJvbFNlcmllc1swXV0uZXh0cmFEYXRhcy56SW5kZXg7CiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMuekluZGV4OwoKICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNbaW5kZXhdLCAnekluZGV4JywgdGVtcEV4Y2hhZ2VJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1swXSwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCAtIChuZXh0SGlnaENvbnRyb2xTZXJpZXMubGVuZ3RoIC0gMSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IG5leHRIaWdoQ29udHJvbFNlcmllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzW2pdXS5leHRyYURhdGFzLnpJbmRleCArIDE7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1tqXSwgJ3pJbmRleCcsIHVwZGF0ZUluZGV4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzID0gW107CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGgKICAgICAgICAgICAgLyogJiYgc3dhcFRhYkluZGV4ID4gMCAqLwogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoc2VsQ29udHJvbCwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGVjdGVkQ29udHJvbCwgJ3pJbmRleCcsIHRlbXBaSW5kZXgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHNlbmRCYWNrd2FyZCgpIHsKICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXTsKICAgIGNvbnN0IGhpZ2hQcm9yQ29udHJvbCA9IFtdOwogICAgY29uc3QgbG93UHJvckNvbnRyb2wgPSBbXTsKICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhc1swXSlbMF07CiAgICBjb25zdCBjb250YWluZXJDb250cm9scyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9sczsKCiAgICBmb3IgKGNvbnN0IGluZGV4IGluIGNvbnRhaW5lckNvbnRyb2xzKSB7CiAgICAgIGNvbnN0IGNudHJsRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyQ29udHJvbHNbaW5kZXhdXTsKCiAgICAgIGlmIChjbnRybERhdGEudHlwZSA9PT0gJ011bHRpUGFnZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdGcmFtZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdMaXN0Qm94JykgewogICAgICAgIGhpZ2hQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG93UHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pOwogICAgICB9CiAgICB9CgogICAgbGV0IG5leHRTZWxjdGVkU2VyaWVzID0gW107CiAgICBsZXQgbmV4dEhpZ2hDb250cm9sU2VyaWVzID0gW107CiAgICBjb25zdCBnZXRTZWxDb250cm9sID0gWy4uLnRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzXTsKICAgIGdldFNlbENvbnRyb2wuc29ydCgoYSwgYikgPT4gewogICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcy56SW5kZXggLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzLnpJbmRleDsKICAgIH0pOwoKICAgIGZvciAoY29uc3Qgc2VsQ29udHJvbCBvZiBnZXRTZWxDb250cm9sKSB7CiAgICAgIGNvbnN0IHR5cGUgPSB1c2VyRGF0YVtzZWxDb250cm9sXS50eXBlOwogICAgICBjb25zdCB0ZW1wWkluZGV4ID0gdXNlckRhdGFbc2VsQ29udHJvbF0uZXh0cmFEYXRhcy56SW5kZXg7CiAgICAgIGNvbnN0IGNvbnRyb2xJbmRleCA9IE9iamVjdC5rZXlzKHVzZXJEYXRhKS5maW5kSW5kZXgoKHZhbCwgaW5kZXgpID0+IHsKICAgICAgICByZXR1cm4gJ3pJbmRleCcgaW4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzICYmIHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHRlbXBaSW5kZXggLSAxOwogICAgICB9KTsKICAgICAgY29uc3QgbmV4dFNlbGVjdGVkQ29udHJvbCA9IGNvbnRyb2xJbmRleCAhPT0gLTEgPyBPYmplY3Qua2V5cyh1c2VyRGF0YSlbY29udHJvbEluZGV4XSA6ICcnOwogICAgICBjb25zdCBuZXh0Q29udHJvbFR5cGUgPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS50eXBlOwoKICAgICAgaWYgKG5leHRTZWxlY3RlZENvbnRyb2wgIT09ICcnICYmICFoaWdoUHJvckNvbnRyb2wuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsKICAgICAgICBpZiAoZ2V0U2VsQ29udHJvbC5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgewogICAgICAgICAgaWYgKCFuZXh0U2VsY3RlZFNlcmllcy5pbmNsdWRlcyhzZWxDb250cm9sKSkgewogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcy5wdXNoKHNlbENvbnRyb2wpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghbmV4dFNlbGN0ZWRTZXJpZXMuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsKICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMucHVzaChuZXh0U2VsZWN0ZWRDb250cm9sKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5leHRTZWxjdGVkU2VyaWVzKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ25leHRTZWxjdGVkU2VyaWVzJywgbmV4dFNlbGN0ZWRTZXJpZXMpOwogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbMF1dLmV4dHJhRGF0YXMuekluZGV4OwogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzLnpJbmRleDsKCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggJiYgc3dhcFRhYkluZGV4ID4gMCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNbaW5kZXhdLCAnekluZGV4JywgdGVtcEV4Y2hhZ2VJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxjdGVkU2VyaWVzWzBdLCAnekluZGV4JywgbmV4dFNlbGN0ZWRTZXJpZXMubGVuZ3RoICsgMSAtIHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgbmV4dFNlbGN0ZWRTZXJpZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBjb25zdCB1cGRhdGVJbmRleCA9IHVzZXJEYXRhW25leHRTZWxjdGVkU2VyaWVzW2pdXS5leHRyYURhdGFzLnpJbmRleCAtIDE7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxjdGVkU2VyaWVzW2pdLCAnekluZGV4JywgdXBkYXRlSW5kZXgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcyA9IFtdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcy56SW5kZXg7CgogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoICYmIHN3YXBUYWJJbmRleCA+IDApIHsKICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMuekluZGV4ID09PSBzd2FwVGFiSW5kZXgpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhzZWxDb250cm9sLCAnekluZGV4Jywgc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGVjdGVkQ29udHJvbCwgJ3pJbmRleCcsIHRlbXBaSW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCFsb3dQcm9yQ29udHJvbC5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSAmJiAodHlwZSA9PT0gJ0ZyYW1lJyB8fCB0eXBlID09PSAnTXVsdGlQYWdlJyB8fCB0eXBlID09PSAnTGlzdEJveCcpKSB7CiAgICAgICAgaWYgKGdldFNlbENvbnRyb2wuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsKICAgICAgICAgIGlmICghbmV4dEhpZ2hDb250cm9sU2VyaWVzLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcy5wdXNoKHNlbENvbnRyb2wpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghbmV4dEhpZ2hDb250cm9sU2VyaWVzLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7CiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcy5wdXNoKG5leHRTZWxlY3RlZENvbnRyb2wpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV4dEhpZ2hDb250cm9sU2VyaWVzKS5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgY29uc3QgdGVtcEV4Y2hhZ2VJbmRleCA9IHVzZXJEYXRhW25leHRIaWdoQ29udHJvbFNlcmllc1swXV0uZXh0cmFEYXRhcy56SW5kZXg7CiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMuekluZGV4OwoKICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCkgewogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcy56SW5kZXggPT09IHN3YXBUYWJJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNbaW5kZXhdLCAnekluZGV4JywgdGVtcEV4Y2hhZ2VJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1swXSwgJ3pJbmRleCcsIG5leHRIaWdoQ29udHJvbFNlcmllcy5sZW5ndGggKyAxIC0gc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0SGlnaENvbnRyb2xTZXJpZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBjb25zdCB1cGRhdGVJbmRleCA9IHVzZXJEYXRhW25leHRIaWdoQ29udHJvbFNlcmllc1tqXV0uZXh0cmFEYXRhcy56SW5kZXggLSAxOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0SGlnaENvbnRyb2xTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcyA9IFtdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcy56SW5kZXg7CgogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoICYmIHN3YXBUYWJJbmRleCA+IDApIHsKICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMuekluZGV4ID09PSBzd2FwVGFiSW5kZXgpOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhzZWxDb250cm9sLCAnekluZGV4Jywgc3dhcFRhYkluZGV4KTsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGVjdGVkQ29udHJvbCwgJ3pJbmRleCcsIHRlbXBaSW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKfTsKCl9fZGVjb3JhdGUoW0FjdGlvbignZmQvYWRkVXNlcmZvcm0nKV0sIEhlYWRlci5wcm90b3R5cGUsICJhZGRDb250cm9sIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW0FjdGlvbignZmQvY2hhbmdlUnVuTW9kZScpXSwgSGVhZGVyLnByb3RvdHlwZSwgImNoYW5nZVJ1bk1vZGUiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbU3RhdGUoc3RhdGUgPT4gc3RhdGUuZmQuc2VsZWN0ZWRDb250cm9scyldLCBIZWFkZXIucHJvdG90eXBlLCAic2VsZWN0ZWRDb250cm9scyIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtTdGF0ZShzdGF0ZSA9PiBzdGF0ZS5mZC51c2VyZm9ybURhdGEpXSwgSGVhZGVyLnByb3RvdHlwZSwgInVzZXJmb3JtRGF0YSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtTdGF0ZShzdGF0ZSA9PiBzdGF0ZS5mZC5pc1J1bk1vZGUpXSwgSGVhZGVyLnByb3RvdHlwZSwgImlzUnVuTW9kZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtBY3Rpb24oJ2ZkL3VwZGF0ZUNvbnRyb2xFeHRyYURhdGEnKV0sIEhlYWRlci5wcm90b3R5cGUsICJ1cGRhdGVDb250cm9sRXh0cmFEYXRhIiwgdm9pZCAwKTsKCkhlYWRlciA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgbmFtZTogJ0hlYWRlcicsCiAgY29tcG9uZW50czogewogICAgRmlsZVNhdmVMb2dvLAogICAgQ3V0TG9nbywKICAgIENvcHlMb2dvLAogICAgUGFzdGVMb2dvLAogICAgRmluZExvZ28sCiAgICBVbmRvTG9nbywKICAgIFJlZG9Mb2dvLAogICAgRGVzaWduTW9kZUxvZ28sCiAgICBQakV4cGxvcmVyTG9nbywKICAgIFBqUHJvcGVydHlMb2dvLAogICAgT2JqQnJvd3NlckxvZ28sCiAgICBUb29sQm94TG9nbywKICAgIFVzZXJGb3JtTG9nbywKICAgIENvZGVMb2dvLAogICAgT2JqZWN0TG9nbywKICAgIEhlbHBMb2dvLAogICAgRkRTVkdJbWFnZQogIH0KfSldLCBIZWFkZXIpOwpleHBvcnQgZGVmYXVsdCBIZWFkZXI7"},{"version":3,"sources":["/home/mobiotics/Projects/hancom/formcontrols/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/mobiotics/Projects/hancom/formcontrols/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/formcontrols/src/FormDesigner/components/organisms/FDHeader/index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator'\nimport { State, Action } from 'vuex-class'\nimport {\n  IaddUserform,\n  IupdateControlExtraData\n} from '@/storeModules/fd/actions'\nimport { ControlPropertyData } from '@/FormDesigner/models/ControlsTableProperties/ControlPropertyData'\nimport CutLogo from '../../../../assets/cut.svg'\nimport FileSaveLogo from '../../../../assets/file-save.svg'\nimport CopyLogo from '../../../../assets/copy.svg'\nimport PasteLogo from '../../../../assets/paste.svg'\nimport FindLogo from '../../../../assets/find.svg'\nimport UndoLogo from '../../../../assets/undo.svg'\nimport RedoLogo from '../../../../assets/redo.svg'\nimport DesignModeLogo from '../../../../assets/design-mode.svg'\nimport PjExplorerLogo from '../../../../assets/pj-explorer.svg'\nimport PjPropertyLogo from '../../../../assets/pj-property.svg'\nimport ObjBrowserLogo from '../../../../assets/obj-browser.svg'\nimport ToolBoxLogo from '../../../../assets/tool-box.svg'\nimport UserFormLogo from '../../../../assets/user-from.svg'\nimport HelpLogo from '../../../../assets/help.svg'\nimport CodeLogo from '../../../../assets/view-code.svg'\nimport ObjectLogo from '../../../../assets/view-object.svg'\nimport FDSVGImage from '@/FormDesigner/components/atoms/FDSVGImage/index.vue'\nimport { EventBus } from '@/FormDesigner/event-bus'\nimport FDCommonMethod from '@/api/abstract/FormDesigner/FDCommonMethod'\n\n@Component({\n  name: 'Header',\n  components: {\n    FileSaveLogo,\n    CutLogo,\n    CopyLogo,\n    PasteLogo,\n    FindLogo,\n    UndoLogo,\n    RedoLogo,\n    DesignModeLogo,\n    PjExplorerLogo,\n    PjPropertyLogo,\n    ObjBrowserLogo,\n    ToolBoxLogo,\n    UserFormLogo,\n    CodeLogo,\n    ObjectLogo,\n    HelpLogo,\n    FDSVGImage\n  }\n})\nexport default class Header extends FDCommonMethod {\n  displaySubMenu: boolean = false;\n  @Action('fd/addUserform') addControl!: (payload: IaddUserform) => void;\n  @Action('fd/changeRunMode') changeRunMode!: (payload: boolean) => void;\n\n  @State((state) => state.fd.selectedControls)\n  selectedControls!: fdState['selectedControls'];\n  @State((state) => state.fd.userformData) userformData!: userformData;\n  @State((state) => state.fd.isRunMode) isRunMode!: boolean;\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (\n    payload: IupdateControlExtraData\n  ) => void;\n  propControlData = {};\n  userFormId = 'ID_USERFORM1';\n  insertUserForm () {\n    this.propControlData = this.userformData\n    const userform = new ControlPropertyData()\n    const userFormId = `ID_USERFORM${\n      Object.keys(this.userformData).length + 1\n    }`\n    const Name = `UserForm${Object.keys(this.userformData).length + 1}`\n    const Caption = `UserForm${Object.keys(this.userformData).length + 1}`\n    const ID = Object.keys(this.userformData).length + 1\n    this.addControl({\n      target: this,\n      key: userFormId,\n      value: {\n        properties: {\n          ...userform.data.UserForm,\n          Name: Name,\n          ID: ID,\n          Caption: Caption\n        },\n        controls: [],\n        extraDatas: { display: 'none' },\n        type: 'Userform'\n      }\n    })\n  }\n  subMenuDisplay () {\n    this.displaySubMenu = !this.displaySubMenu\n  }\n  clickChangeMode () {\n    this.changeRunMode(!this.isRunMode)\n  }\n  makeEqual (type: keyof controlProperties) {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    const controls = usrFrmData[ctrlContainer].controls\n    let divstyle: Array<IGroupStyle> = []\n    let getGroupIndex = -1\n    EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n      divstyle = divstayleArray\n    })\n    if (ctrlSel[0].startsWith('group')) {\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\n    }\n    let propValue = 0\n    const leftArray: string[] = []\n    const rightArray: string[] = []\n    for (let index = 1; index < ctrlSel.length; index++) {\n      const selLeft = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].left!)\n        : usrFrmData[ctrlSel[0]].properties.Left\n      const selTop = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].top!)\n        : usrFrmData[ctrlSel[0]].properties.Top\n      if (!ctrlSel[index].startsWith('group')) {\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\n        if (type === 'Left') {\n          if (ctrlProp.Left! <= selLeft!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        } else if (type === 'Top') {\n          if (ctrlProp.Top! <= selTop!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        }\n      } else {\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const getIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        const groupLeft = parseInt(divstyle[getIndex].left!)\n        const groupTop = parseInt(divstyle[getIndex].top!)\n        const groupConrol = this.getGroupControl(ctrlSel[index])\n        if (type === 'Left') {\n          if (groupLeft <= selLeft!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        } else if (type === 'Top') {\n          if (groupTop <= selTop!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        }\n      }\n    }\n    if (ctrlSel[0].startsWith('group')) {\n      const getIndex = divstyle.findIndex(\n        (val) => val.groupName === ctrlSel[0]\n      )\n      const groupLeft = parseInt(divstyle[getIndex].left!)\n      const groupTop = parseInt(divstyle[getIndex].top!)\n      const groupConrol = this.getGroupControl(ctrlSel[0])\n      if (type === 'Left') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Left!) === groupLeft) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      } else if (type === 'Top') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Top!) === groupTop) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      }\n    } else {\n      leftArray.unshift(ctrlSel[0])\n      rightArray.push(ctrlSel[0])\n    }\n    console.log(leftArray, '', rightArray)\n    if (type === 'Left') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n    } else if (type === 'Top') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n    }\n    let leftControl = { ...usrFrmData[leftArray[0]].properties }\n    if (leftControl.GroupID !== '') {\n      const groupIndex = divstyle.findIndex(\n        (val) => val.groupName === leftControl.GroupID\n      )\n      const groupSize = divstyle[groupIndex]\n      leftControl = {\n        ...leftControl,\n        Width: parseInt(divstyle[groupIndex].width!),\n        Height: parseInt(divstyle[groupIndex].height!),\n        Left: parseInt(divstyle[groupIndex].left!),\n        Top: parseInt(divstyle[groupIndex].top!)\n      }\n    }\n    let rightControl = {\n      ...usrFrmData[rightArray[rightArray.length - 1]].properties\n    }\n    if (rightControl.GroupID !== '') {\n      const groupIndex = divstyle.findIndex(\n        (val) => val.groupName === rightControl.GroupID\n      )\n      const groupSize = divstyle[groupIndex]\n      rightControl = {\n        ...leftControl,\n        Width: parseInt(divstyle[groupIndex].width!),\n        Height: parseInt(divstyle[groupIndex].height!),\n        Left: parseInt(divstyle[groupIndex].left!),\n        Top: parseInt(divstyle[groupIndex].top!)\n      }\n    }\n    let totalSize = 0\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (type === 'Left') {\n        if (!ctrlSel[index].startsWith('group')) {\n          const ctrlProp = usrFrmData[ctrlSel[index]].properties\n          totalSize = totalSize + ctrlProp.Width!\n        } else {\n          const groupIndex = divstyle.findIndex(\n            (val) => val.groupName === ctrlSel[index]\n          )\n          totalSize = totalSize + parseInt(divstyle[groupIndex].width!)\n        }\n      } else if (type === 'Top') {\n        if (!ctrlSel[index].startsWith('group')) {\n          const ctrlProp = usrFrmData[ctrlSel[index]].properties\n          totalSize = totalSize + ctrlProp.Height!\n        } else {\n          const groupIndex = divstyle.findIndex(\n            (val) => val.groupName === ctrlSel[index]\n          )\n          totalSize = totalSize + parseInt(divstyle[groupIndex].height!)\n        }\n      }\n    }\n    let diffrence = 0\n    if (type === 'Left') {\n      diffrence =\n        (rightControl.Left! +\n          rightControl.Width! -\n          leftControl.Left! -\n          totalSize) /\n        (ctrlSel.length - 1)\n    } else if (type === 'Top') {\n      diffrence =\n        (rightControl.Top! +\n          rightControl.Height! -\n          leftControl.Top! -\n          totalSize) /\n        (ctrlSel.length - 1)\n    }\n    const unique = () => {\n      var a = leftArray.concat(rightArray)\n      for (var i = 0; i < a.length; ++i) {\n        for (var j = i + 1; j < a.length; ++j) {\n          if (a[i] === a[j]) {\n            a.splice(j--, 1)\n          }\n        }\n      }\n      return a\n    }\n    const combineArray = unique()\n    for (let index = 1; index < combineArray.length - 1; index++) {\n      const prevCtrlProp = usrFrmData[combineArray[index - 1]].properties\n      const ctrlProp = usrFrmData[combineArray[index]].properties\n      let prevIndex = -1\n      const controlPropIndex = -1\n      if (type === 'Left') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + diffrence\n          this.updateControlProperty(type, propValue, combineArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            prevIndex = divstyle.findIndex(\n              (val) => val.groupName === prevCtrlProp.GroupID\n            )\n            propValue =\n              parseInt(divstyle[prevIndex].left!) +\n              parseInt(divstyle[prevIndex].width!) +\n              diffrence\n          } else {\n            propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + diffrence\n          }\n          if (ctrlProp.GroupID !== '') {\n            const getIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\n          } else {\n            this.updateControlProperty(type, propValue, combineArray[index])\n          }\n        }\n      } else {\n        if (type === 'Top') {\n          if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n            propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + diffrence\n            this.updateControlProperty(type, propValue, combineArray[index])\n          } else {\n            if (prevCtrlProp.GroupID !== '') {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue =\n                parseInt(divstyle[prevIndex].top!) +\n                parseInt(divstyle[prevIndex].height!) +\n                diffrence\n            } else {\n              propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + diffrence\n            }\n            if (ctrlProp.GroupID !== '') {\n              const getIndex = divstyle.findIndex(\n                (val) => val.groupName === ctrlProp.GroupID\n              )\n              EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\n            } else {\n              this.updateControlProperty(type, propValue, combineArray[index])\n            }\n          }\n        }\n      }\n    }\n  }\n  bringFront () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl: string[] = []\n    const lowProrControl: string[] = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    lowProrControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    let getLowPropHighestIndex: string = lowProrControl[lowProrControl.length - 1]\n    highProrControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    let getHighPropHighestIndex = highProrControl[highProrControl.length - 1]\n    const lowSeriesControl: string[] = []\n    const highSeriesControl: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl) {\n      if (lowProrControl.includes(selControl)) {\n        lowSeriesControl.push(selControl)\n      } else {\n        highSeriesControl.push(selControl)\n      }\n    }\n    const setLowPropHighIndex = (control: string) => {\n      if (lowSeriesControl.length > 0 && lowSeriesControl.includes(control)) {\n        lowSeriesControl.pop()\n        const Index = lowProrControl.findIndex(val => userData[getLowPropHighestIndex!].extraDatas!.zIndex! - 1 === userData[val].extraDatas!.zIndex)\n        getLowPropHighestIndex = Index !== -1 ? lowProrControl[Index] : ''\n        if (Index !== -1) {\n          setLowPropHighIndex(getLowPropHighestIndex)\n        }\n      }\n    }\n    setLowPropHighIndex(getLowPropHighestIndex)\n    lowSeriesControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    if (lowSeriesControl.length > 0) {\n      const lowestZIndex = userData[lowSeriesControl[0]].extraDatas!.zIndex!\n      let nextSeries: string[] = []\n      let count = lowSeriesControl.length - 1\n      const diff = userData[getLowPropHighestIndex].extraDatas!.zIndex! - userData[lowSeriesControl[lowSeriesControl.length - 1]].extraDatas!.zIndex!\n      for (const ctrl of lowSeriesControl) {\n        const nextControl = lowSeriesControl.findIndex(val => 'zIndex' in userData[val].extraDatas! && (userData[ctrl].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex!))\n        if (nextControl !== -1) {\n          nextSeries.push(ctrl)\n          count = count - 1\n        } else {\n          const difference = userData[getLowPropHighestIndex].extraDatas!.zIndex! - count\n          this.updateExtraDatas(ctrl, 'zIndex', difference)\n          if (nextSeries.length > 0) {\n            for (let i = 0; i < nextSeries.length; i++) {\n              const diff = userData[ctrl].extraDatas!.zIndex! - (nextSeries.length - i)\n              this.updateExtraDatas(nextSeries[i], 'zIndex', diff)\n            }\n            nextSeries = []\n          }\n          count = count - 1\n        }\n      }\n      let counter = 0\n      for (const ctrl of lowProrControl) {\n        if (!this.getSelectedControlsDatas!.includes(ctrl)) {\n          counter = counter + 1\n          this.updateExtraDatas(ctrl, 'zIndex', counter)\n        }\n      }\n    }\n\n    const setHighPropHighIndex = (control: string) => {\n      if (highSeriesControl.length > 0 && highSeriesControl.includes(control)) {\n        highSeriesControl.pop()\n        const Index = highProrControl.findIndex(val => userData[getHighPropHighestIndex!].extraDatas!.zIndex! - 1 === userData[val].extraDatas!.zIndex)\n        getHighPropHighestIndex = Index !== -1 ? highProrControl[Index] : ''\n        if (Index !== -1) {\n          setHighPropHighIndex(getHighPropHighestIndex)\n        }\n      }\n    }\n    setHighPropHighIndex(getHighPropHighestIndex)\n    highSeriesControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    if (highSeriesControl.length > 0) {\n      const highestZIndex = userData[highSeriesControl[0]].extraDatas!.zIndex!\n      let nextSeries: string[] = []\n      let count = highSeriesControl.length - 1\n      const diff = userData[getHighPropHighestIndex].extraDatas!.zIndex! - userData[highSeriesControl[highSeriesControl.length - 1]].extraDatas!.zIndex!\n      for (const ctrl of highSeriesControl) {\n        const nextControl = highSeriesControl.findIndex(val => 'zIndex' in userData[val].extraDatas! && (userData[ctrl].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex!))\n        if (nextControl !== -1) {\n          nextSeries.push(ctrl)\n          count = count - 1\n        } else {\n          const difference = userData[getHighPropHighestIndex].extraDatas!.zIndex! - count\n          this.updateExtraDatas(ctrl, 'zIndex', difference)\n          if (nextSeries.length > 0) {\n            for (let i = 0; i < nextSeries.length; i++) {\n              const diff = userData[ctrl].extraDatas!.zIndex! - (nextSeries.length - i)\n              this.updateExtraDatas(nextSeries[i], 'zIndex', diff)\n            }\n            nextSeries = []\n          }\n          count = count - 1\n        }\n      }\n      let counter = 0\n      for (const ctrl of highProrControl) {\n        if (!this.getSelectedControlsDatas!.includes(ctrl)) {\n          counter = counter + 1\n          this.updateExtraDatas(ctrl, 'zIndex', counter)\n        }\n      }\n    }\n  }\n  sendBack () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl: string[] = []\n    const lowProrControl: string[] = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    lowProrControl.sort((a, b) => {\n      return userData[b].extraDatas!.zIndex! - userData[a].extraDatas!.zIndex!\n    })\n    let getLowPropHighestIndex: string = lowProrControl[lowProrControl.length - 1]\n    highProrControl.sort((a, b) => {\n      return userData[b].extraDatas!.zIndex! - userData[a].extraDatas!.zIndex!\n    })\n    let getHighPropHighestIndex = highProrControl[highProrControl.length - 1]\n    const lowSeriesControl: string[] = []\n    const highSeriesControl: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl) {\n      if (lowProrControl.includes(selControl)) {\n        lowSeriesControl.push(selControl)\n      } else {\n        highSeriesControl.push(selControl)\n      }\n    }\n    const setLowPropHighIndex = (control: string) => {\n      if (lowSeriesControl.length > 0 && lowSeriesControl.includes(control)) {\n        lowSeriesControl.pop()\n        const Index = lowProrControl.findIndex(val => userData[getLowPropHighestIndex!].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex)\n        getLowPropHighestIndex = Index !== -1 ? lowProrControl[Index] : ''\n        if (Index !== -1) {\n          setLowPropHighIndex(getLowPropHighestIndex)\n        }\n      }\n    }\n    setLowPropHighIndex(getLowPropHighestIndex)\n    if (lowSeriesControl.length > 0) {\n      lowSeriesControl.sort((a, b) => {\n        return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n      })\n      let count = userData[getLowPropHighestIndex].extraDatas!.zIndex!\n      for (const ctrl of lowSeriesControl) {\n        this.updateExtraDatas(ctrl, 'zIndex', count)\n        count = count + 1\n      }\n      let counter = userData[lowSeriesControl[lowSeriesControl.length - 1]].extraDatas!.zIndex!\n      for (let i = lowProrControl.length - 1; i >= 0; i--) {\n        if (!this.getSelectedControlsDatas!.includes(lowProrControl[i])) {\n          counter = counter + 1\n          this.updateExtraDatas(lowProrControl[i], 'zIndex', counter)\n        }\n      }\n    }\n\n    const setHighPropHighIndex = (control: string) => {\n      if (highSeriesControl.length > 0 && highSeriesControl.includes(control)) {\n        highSeriesControl.shift()\n        const Index = highProrControl.findIndex(val => userData[getHighPropHighestIndex!].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex)\n        getHighPropHighestIndex = Index !== -1 ? highProrControl[Index] : ''\n        if (Index !== -1) {\n          setHighPropHighIndex(getHighPropHighestIndex)\n        }\n      }\n    }\n    setHighPropHighIndex(getHighPropHighestIndex)\n    if (highSeriesControl.length > 0) {\n      highSeriesControl.sort((a, b) => {\n        return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n      })\n      let count = userData[getHighPropHighestIndex].extraDatas!.zIndex!\n      for (const ctrl of highSeriesControl) {\n        this.updateExtraDatas(ctrl, 'zIndex', count)\n        count = count + 1\n      }\n      let counter = userData[highSeriesControl[highSeriesControl.length - 1]].extraDatas!.zIndex!\n      for (let i = highProrControl.length - 1; i >= 0; i--) {\n        if (!this.getSelectedControlsDatas!.includes(highProrControl[i])) {\n          counter = counter + 1\n          this.updateExtraDatas(highProrControl[i], 'zIndex', counter)\n        }\n      }\n    }\n  }\n  groupControl () {\n    EventBus.$emit('groupControl', 'group')\n  }\n  unGroupControl () {\n    EventBus.$emit('groupControl', 'ungroup')\n  }\n  sizeToFit () {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const sizeToFitArr: string[] = []\n    const sizeToFitVal: boolean[] = []\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const controlprop = usrFrmData[ctrlSel[index]].properties\n        if ('AutoSize' in controlprop) {\n          sizeToFitArr.push(ctrlSel[index])\n          sizeToFitVal.push(controlprop.AutoSize!)\n          this.updateControlProperty('AutoSize', true, ctrlSel[index])\n        }\n      }\n    }\n    setTimeout(() => {\n      for (let index = 0; index < sizeToFitArr.length; index++) {\n        if (!sizeToFitArr[index].startsWith('group')) {\n          const controlprop = usrFrmData[sizeToFitArr[index]].properties\n          if ('AutoSize' in controlprop) {\n            this.updateControlProperty(\n              'AutoSize',\n              sizeToFitVal[index],\n              sizeToFitArr[index]\n            )\n          }\n        }\n      }\n    }, 100)\n  }\n  sizeToGrid () {\n    let divstyle: Array<IGroupStyle> = []\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    let ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const controlprop = usrFrmData[ctrlSel[index]].properties\n        this.updateControlProperty(\n          'Left',\n          Math.trunc(controlprop.Left!),\n          ctrlSel[index]\n        )\n        this.updateControlProperty(\n          'Top',\n          Math.trunc(controlprop.Top!),\n          ctrlSel[index]\n        )\n        this.updateControlProperty(\n          'Width',\n          Math.trunc(controlprop.Width!),\n          ctrlSel[index]\n        )\n        this.updateControlProperty(\n          'Height',\n          Math.trunc(controlprop.Height!),\n          ctrlSel[index]\n        )\n      } else {\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const getIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        EventBus.$emit('updasteGroupSize', 'GroupID', 0, getIndex)\n      }\n    }\n  }\n  incDecspacing (type: keyof controlProperties, value: number) {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    const controls = usrFrmData[ctrlContainer].controls\n    let divstyle: Array<IGroupStyle> = []\n    let getGroupIndex = -1\n    if (ctrlSel[0].startsWith('group')) {\n      EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n        divstyle = divstayleArray\n      })\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\n    }\n    const leftArray: string[] = []\n    const rightArray: string[] = []\n    for (let index = 1; index < ctrlSel.length; index++) {\n      const selLeft = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].left!)\n        : usrFrmData[ctrlSel[0]].properties.Left\n      const selTop = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].top!)\n        : usrFrmData[ctrlSel[0]].properties.Top\n      if (!ctrlSel[index].startsWith('group')) {\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\n        if (type === 'Left') {\n          if (ctrlProp.Left! <= selLeft!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        } else if (type === 'Top') {\n          if (ctrlProp.Top! <= selTop!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        }\n      } else {\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const getIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        const groupLeft = parseInt(divstyle[getIndex].left!)\n        const groupTop = parseInt(divstyle[getIndex].top!)\n        const groupConrol = this.getGroupControl(ctrlSel[index])\n        if (type === 'Left') {\n          if (groupLeft <= selLeft!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        } else if (type === 'Top') {\n          if (groupTop <= selTop!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        }\n      }\n    }\n    if (ctrlSel[0].startsWith('group')) {\n      const getIndex = divstyle.findIndex(\n        (val) => val.groupName === ctrlSel[0]\n      )\n      const groupLeft = parseInt(divstyle[getIndex].left!)\n      const groupTop = parseInt(divstyle[getIndex].top!)\n      const groupConrol = this.getGroupControl(ctrlSel[0])\n      if (type === 'Left') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Left!) === groupLeft) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      } else if (type === 'Top') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Top!) === groupTop) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      }\n    } else {\n      leftArray.unshift(ctrlSel[0])\n      rightArray.push(ctrlSel[0])\n    }\n    console.log(leftArray, '', rightArray)\n    if (type === 'Left') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[b].properties.Left! - usrFrmData[a].properties.Left!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n    } else if (type === 'Top') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[b].properties.Top! - usrFrmData[a].properties.Top!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n    }\n    console.log(leftArray, rightArray)\n    const groupIndex: number = divstyle.findIndex(\n      (val) => val.groupName === ctrlSel[0]\n    )\n    const isGroup = ctrlSel[0].startsWith('group')\n    const ctrlProp = !isGroup && usrFrmData[ctrlSel[0]].properties\n    const newObject = {\n      Left:\n        isGroup && groupIndex !== -1\n          ? parseInt(divstyle[groupIndex].left!)\n          : ctrlProp\n            ? ctrlProp.Left!\n            : 0,\n      Top:\n        isGroup && groupIndex !== -1\n          ? parseInt(divstyle[groupIndex].top!)\n          : ctrlProp\n            ? ctrlProp.Top!\n            : 0,\n      Width:\n        isGroup && groupIndex !== -1\n          ? parseInt(divstyle[groupIndex].width!)\n          : ctrlProp\n            ? ctrlProp.Width!\n            : 0,\n      Height:\n        isGroup && groupIndex !== -1\n          ? parseInt(divstyle[groupIndex].height!)\n          : ctrlProp\n            ? ctrlProp.Height!\n            : 0\n    }\n    let incDecValue = 0\n    let propValue = 0\n    for (let index = 1; index < leftArray.length; index++) {\n      const ctrlProp = usrFrmData[leftArray[index]].properties\n      let prevIndex = -1\n      let controlPropIndex = -1\n      if (type === 'Left') {\n        if (ctrlProp.GroupID === '') {\n          propValue = propValue + value\n          incDecValue = ctrlProp.Left! - propValue\n          this.updateControlProperty(type, Math.round(incDecValue / 10) * 10, leftArray[index])\n        } else {\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\n            let incDecValue = 0\n            propValue = propValue + value\n            incDecValue = parseInt(divstyle[controlPropIndex].left!) - propValue\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              Math.round(incDecValue / 10) * 10,\n              controlPropIndex\n            )\n          }\n        }\n      } else if (type === 'Top') {\n        if (ctrlProp.GroupID === '') {\n          propValue = propValue + value\n          incDecValue = ctrlProp.Top! - propValue\n          this.updateControlProperty(type, Math.round(incDecValue / 10) * 10, leftArray[index])\n        } else {\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\n            let incDecValue = 0\n            propValue = propValue + value\n            incDecValue = parseInt(divstyle[controlPropIndex].top!) - propValue\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              Math.round(incDecValue / 10) * 10,\n              controlPropIndex\n            )\n          }\n        }\n      }\n    }\n    propValue = 0\n    for (let index = 1; index < rightArray.length; index++) {\n      const ctrlProp = usrFrmData[rightArray[index]].properties\n      let prevIndex = -1\n      let controlPropIndex = -1\n      if (type === 'Left') {\n        if (ctrlProp.GroupID === '') {\n          propValue = propValue + value\n          incDecValue = ctrlProp.Left! + propValue\n          this.updateControlProperty(type, Math.round(incDecValue / 10) * 10, rightArray[index])\n        } else {\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\n            propValue = propValue + value\n            incDecValue = parseInt(divstyle[controlPropIndex].left!) + propValue\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              Math.round(incDecValue / 10) * 10,\n              controlPropIndex\n            )\n          }\n        }\n      } else if (type === 'Top') {\n        if (ctrlProp.GroupID === '') {\n          let incDecValue = 0\n          propValue = propValue + value\n          incDecValue = ctrlProp.Top! + propValue\n          this.updateControlProperty(type, Math.round(incDecValue / 10) * 10, rightArray[index])\n        } else {\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\n            let incDecValue = 0\n            propValue = propValue + value\n            incDecValue = parseInt(divstyle[controlPropIndex].top!) + propValue\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              Math.round(incDecValue / 10) * 10,\n              controlPropIndex\n            )\n          }\n        }\n      }\n    }\n  }\n  getGroupControl (groupName: string) {\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    const usrFrmData = this.userformData[this.userFormId]\n    const controls = []\n    for (const control of usrFrmData[ctrlContainer].controls) {\n      if (usrFrmData[control].properties.GroupID === groupName) {\n        controls.push(control)\n      }\n    }\n    return controls\n  }\n  removeSpace (type: keyof controlProperties) {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    const controls = usrFrmData[ctrlContainer].controls\n    let divstyle: Array<IGroupStyle> = []\n    let getGroupIndex = -1\n    if (ctrlSel[0].startsWith('group')) {\n      EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n        divstyle = divstayleArray\n      })\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\n    }\n    let propValue = 0\n    const leftArray: string[] = []\n    const rightArray: string[] = []\n    for (let index = 1; index < ctrlSel.length; index++) {\n      const selLeft = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].left!)\n        : usrFrmData[ctrlSel[0]].properties.Left\n      const selTop = ctrlSel[0].startsWith('group')\n        ? parseInt(divstyle[getGroupIndex].top!)\n        : usrFrmData[ctrlSel[0]].properties.Top\n      if (!ctrlSel[index].startsWith('group')) {\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\n        if (type === 'Left') {\n          if (ctrlProp.Left! <= selLeft!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        } else if (type === 'Top') {\n          if (ctrlProp.Top! <= selTop!) {\n            leftArray.push(ctrlSel[index])\n          } else {\n            rightArray.push(ctrlSel[index])\n          }\n        }\n      } else {\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const getIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        const groupLeft = parseInt(divstyle[getIndex].left!)\n        const groupTop = parseInt(divstyle[getIndex].top!)\n        const groupConrol = this.getGroupControl(ctrlSel[index])\n        if (type === 'Left') {\n          if (groupLeft <= selLeft!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Left!) === groupLeft) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        } else if (type === 'Top') {\n          if (groupTop <= selTop!) {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                leftArray.push(ctrl)\n              }\n            }\n          } else {\n            for (let ctrl of groupConrol) {\n              const prop = this.userformData[this.userFormId][ctrl].properties\n              if (Math.floor(prop.Top!) === groupTop) {\n                rightArray.push(ctrl)\n              }\n            }\n          }\n        }\n      }\n    }\n    if (ctrlSel[0].startsWith('group')) {\n      const getIndex = divstyle.findIndex(\n        (val) => val.groupName === ctrlSel[0]\n      )\n      const groupLeft = parseInt(divstyle[getIndex].left!)\n      const groupTop = parseInt(divstyle[getIndex].top!)\n      const groupConrol = this.getGroupControl(ctrlSel[0])\n      if (type === 'Left') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Left!) === groupLeft) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      } else if (type === 'Top') {\n        for (let ctrl of groupConrol) {\n          const prop = this.userformData[this.userFormId][ctrl].properties\n          if (Math.floor(prop.Top!) === groupTop) {\n            leftArray.push(ctrl)\n            rightArray.push(ctrl)\n          }\n        }\n      }\n    } else {\n      leftArray.unshift(ctrlSel[0])\n      rightArray.push(ctrlSel[0])\n    }\n    console.log(leftArray, '', rightArray)\n    if (type === 'Left') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[b].properties.Left! - usrFrmData[a].properties.Left!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n    } else if (type === 'Top') {\n      leftArray.sort((a, b) => {\n        return usrFrmData[b].properties.Top! - usrFrmData[a].properties.Top!\n      })\n      rightArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n    }\n    console.log(leftArray, rightArray)\n    for (let index = 1; index < leftArray.length; index++) {\n      const prevCtrlProp = usrFrmData[leftArray[index - 1]].properties\n      const ctrlProp = usrFrmData[leftArray[index]].properties\n      let prevIndex = -1\n      let controlPropIndex = -1\n      if (type === 'Left') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Left! - ctrlProp.Width!\n          this.updateControlProperty(type, propValue, leftArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            if (ctrlProp.GroupID === '') {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue = parseInt(divstyle[prevIndex].left!) - ctrlProp.Width!\n              this.updateControlProperty(type, propValue, leftArray[index])\n            }\n          }\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            if (prevCtrlProp.GroupID === '') {\n              propValue =\n                prevCtrlProp.Left! -\n                parseInt(divstyle[controlPropIndex].width!)\n            } else {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue =\n                parseInt(divstyle[prevIndex].left!) -\n                parseInt(divstyle[controlPropIndex].width!)\n            }\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              propValue,\n              controlPropIndex\n            )\n          }\n        }\n      } else if (type === 'Top') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Top! - ctrlProp.Height!\n          this.updateControlProperty(type, propValue, leftArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            if (ctrlProp.GroupID === '') {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue = parseInt(divstyle[prevIndex].top!) - ctrlProp.Height!\n              this.updateControlProperty(type, propValue, leftArray[index])\n            }\n          }\n          if (ctrlProp.GroupID !== '') {\n            controlPropIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            if (prevCtrlProp.GroupID === '') {\n              propValue =\n                prevCtrlProp.Top! -\n                parseInt(divstyle[controlPropIndex].height!)\n            } else {\n              prevIndex = divstyle.findIndex(\n                (val) => val.groupName === prevCtrlProp.GroupID\n              )\n              propValue =\n                parseInt(divstyle[prevIndex].top!) -\n                parseInt(divstyle[controlPropIndex].height!)\n            }\n            EventBus.$emit(\n              'updasteGroupSize',\n              type,\n              propValue,\n              controlPropIndex\n            )\n          }\n        }\n      }\n    }\n    for (let index = 1; index < rightArray.length; index++) {\n      const prevCtrlProp = usrFrmData[rightArray[index - 1]].properties\n      const ctrlProp = usrFrmData[rightArray[index]].properties\n      let prevIndex = -1\n      const controlPropIndex = -1\n      if (type === 'Left') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Left! + prevCtrlProp.Width!\n          this.updateControlProperty(type, propValue, rightArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            prevIndex = divstyle.findIndex(\n              (val) => val.groupName === prevCtrlProp.GroupID\n            )\n            propValue =\n              parseInt(divstyle[prevIndex].left!) +\n              parseInt(divstyle[prevIndex].width!)\n          } else {\n            propValue = prevCtrlProp.Left! + prevCtrlProp.Width!\n          }\n          if (ctrlProp.GroupID !== '') {\n            const getIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\n          } else {\n            this.updateControlProperty(type, propValue, rightArray[index])\n          }\n        }\n      } else if (type === 'Top') {\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\n          propValue = prevCtrlProp.Top! + prevCtrlProp.Height!\n          this.updateControlProperty(type, propValue, rightArray[index])\n        } else {\n          if (prevCtrlProp.GroupID !== '') {\n            prevIndex = divstyle.findIndex(\n              (val) => val.groupName === prevCtrlProp.GroupID\n            )\n            propValue =\n              parseInt(divstyle[prevIndex].top!) +\n              parseInt(divstyle[prevIndex].height!)\n          } else {\n            propValue = prevCtrlProp.Top! + prevCtrlProp.Height!\n          }\n          if (ctrlProp.GroupID !== '') {\n            const getIndex = divstyle.findIndex(\n              (val) => val.groupName === ctrlProp.GroupID\n            )\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\n          } else {\n            this.updateControlProperty(type, propValue, rightArray[index])\n          }\n        }\n      }\n    }\n  }\n  updatePropVal (propName: string, propValue: number) {\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    const usrFrmData = this.userformData[this.userFormId]\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const curProp = usrFrmData[ctrlSel[index]].properties\n        if (propName === 'selCenter') {\n          const curCenter = curProp.Width! / 2\n          const value = propValue - curCenter\n          this.updateControlProperty('Left', value, ctrlSel[index])\n        }\n        if (propName === 'selMiddle') {\n          const curMiddle = curProp.Height! / 2\n          const value = propValue - curMiddle\n          this.updateControlProperty('Top', value, ctrlSel[index])\n        }\n      } else {\n        let divstyle: Array<IGroupStyle> = []\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\n          divstyle = divstayleArray\n        })\n        const groupIndex = divstyle.findIndex(\n          (val) => val.groupName === ctrlSel[index]\n        )\n        const curProp = divstyle[groupIndex]\n        const left = parseInt(curProp.left!)\n        const top = parseInt(curProp.top!)\n        const width = parseInt(curProp.width!)\n        const height = parseInt(curProp.height!)\n        let value = -1\n        if (propName === 'selCenter') {\n          value = propValue - width! / 2\n          EventBus.$emit('updasteGroupSize', 'Left', value, groupIndex)\n        }\n        if (propName === 'selMiddle') {\n          value = propValue - height! / 2\n          EventBus.$emit('updasteGroupSize', 'Top', value, groupIndex)\n        }\n      }\n    }\n  }\n  centreInForm (value: string) {\n    let divstyle: Array<IGroupStyle> = []\n    const mainContainer = this.selectedControls[this.userFormId].container[0]\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlProp = usrFrmData[mainContainer].properties\n    if (value === 'horizontal') {\n      const selCenter = ctrlProp.Left! + ctrlProp.Width! / 2\n      this.updatePropVal('selCenter', selCenter)\n    } else if (value === 'vertical') {\n      const selMiddle = ctrlProp.Top! + ctrlProp.Height! / 2\n      this.updatePropVal('selMiddle', selMiddle)\n    }\n  }\n  arrangeButton (type: string) {\n    const usrFrmData = this.userformData[this.userFormId]\n    const ctrlSel = this.selectedControls[this.userFormId].selected\n    let ctrlContainer = this.selectedControls[this.userFormId].container[0]\n    ctrlContainer =\n      usrFrmData[ctrlContainer].type === 'Page'\n        ? this.selectedControls[this.userFormId].container[1]\n        : ctrlContainer\n    const buttonArray = []\n    for (let index = 0; index < ctrlSel.length; index++) {\n      if (!ctrlSel[index].startsWith('group')) {\n        const controlprop = usrFrmData[ctrlSel[index]]\n        if (controlprop.type === 'CommandButton') {\n          buttonArray.push(ctrlSel[index])\n        }\n      }\n    }\n    if (type === 'bottom') {\n      buttonArray.sort((a, b) => {\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\n      })\n    } else if (type === 'right') {\n      buttonArray.sort((a, b) => {\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\n      })\n    }\n    console.log(buttonArray)\n    const containerProp = usrFrmData[ctrlContainer].properties\n    let value: number = 0\n    const containerHeight = (usrFrmData[ctrlContainer].type === 'Userform')\n      ? 47 : usrFrmData[ctrlContainer].type === 'Frame' ? 27\n        : usrFrmData[ctrlContainer].type === 'MultiPage' ? 40 : 0\n    const containerWidth = 20\n    if (type === 'bottom') {\n      value = (containerProp.Height! - containerHeight) - usrFrmData[buttonArray[0]].properties.Height!\n      this.updateControlProperty('Top', value, buttonArray[0])\n      this.updateControlProperty('Left', 30, buttonArray[0])\n    } else if (type === 'right') {\n      value = (containerProp.Width! - containerWidth) - usrFrmData[buttonArray[0]].properties.Width!\n      this.updateControlProperty('Left', value, buttonArray[0])\n      this.updateControlProperty('Top', 20, buttonArray[0])\n    }\n\n    for (let index = 1; index < buttonArray.length; index++) {\n      const prevCtrlProp = usrFrmData[buttonArray[index - 1]].properties\n      const ctrlProp = usrFrmData[buttonArray[index]].properties\n      if (type === 'bottom') {\n        let propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + 10\n        value =\n          (containerProp.Height! - containerHeight) -\n          usrFrmData[buttonArray[index]].properties.Height!\n        if (propValue + ctrlProp.Width! <= containerProp.Width! - containerWidth) {\n          this.updateControlProperty('Left', propValue, buttonArray[index])\n          this.updateControlProperty('Top', value, buttonArray[index])\n        } else {\n          propValue = containerProp.Width! - containerWidth - ctrlProp.Width!\n          this.updateControlProperty('Left', propValue, buttonArray[index])\n          this.updateControlProperty('Top', value, buttonArray[index])\n        }\n      } else if (type === 'right') {\n        let propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + 10\n        value =\n          (containerProp.Width! - containerWidth) -\n          usrFrmData[buttonArray[index]].properties.Width!\n        if (propValue + ctrlProp.Height! <= containerProp.Height! - (containerHeight)) {\n          this.updateControlProperty('Top', propValue, buttonArray[index])\n          this.updateControlProperty('Left', value, buttonArray[index])\n        } else {\n          propValue = containerProp.Height! - containerHeight - ctrlProp.Height!\n          this.updateControlProperty('Top', propValue, buttonArray[index])\n          this.updateControlProperty('Left', value, buttonArray[index])\n        }\n      }\n    }\n  }\n  updateControlProperty (\n    propertyName: keyof controlProperties,\n    propertyValue: any,\n    controlId: string\n  ) {\n    this.updateControl({\n      userFormId: this.userFormId,\n      controlId: controlId,\n      propertyName: propertyName,\n      value: propertyValue\n    })\n  }\n  getdisableStyle (id: string) {\n    let disabled: boolean = true\n    const selected = this.selectedControls[this.userFormId].selected\n    const selContainer = this.selectedControls[this.userFormId].container\n    const userData = this.userformData[this.userFormId]\n    if (id === 'unGroup') {\n      let groupId: boolean = false\n      const selectedGroupArray = selected.filter(\n        (val: string) => val.startsWith('group') && val\n      )\n      if (selectedGroupArray.length === 1 && selected.length === 1) {\n        disabled = false\n      }\n    }\n    if (id === 'group') {\n      disabled = selected.length <= 1\n    }\n    if (id === 'sizeToGrid' || id === 'centreInForm') {\n      disabled = !(selected.length >= 1 && selected[0] !== selContainer[0])\n    }\n    if (id === 'sizeToFit') {\n      const selSelected = []\n      for (const control of this.selectedControls[this.userFormId].selected) {\n        if (!control.startsWith('group')) {\n          const type = this.userformData[this.userFormId][control].type\n          if (type !== 'MultiPage' && type !== 'Frame' && type !== 'ListBox' && type !== 'Page' && type !== 'TabStrip' && type !== 'Userform') {\n            selSelected.push(control)\n          }\n        }\n      }\n      disabled = !(selSelected.length >= 1)\n    }\n    if (id === 'order') {\n      disabled = !(selected.length >= 1 && userData[selContainer[0]].controls.length >= 2)\n    }\n    if (id === 'makeEqual') {\n      disabled = !(selected.length >= 3)\n    }\n    if (id === 'incDecspacing' || id === 'removeSpace') {\n      disabled = !(selected.length >= 2)\n    }\n    if (id === 'arrangeButton') {\n      const buttonArray = []\n      for (let index = 0; index < selected.length; index++) {\n        if (!selected[index].startsWith('group')) {\n          const controlprop = userData[selected[index]]\n          if (controlprop.type === 'CommandButton') {\n            buttonArray.push(selected[index])\n          }\n        }\n      }\n      disabled = !(buttonArray.length >= 1)\n    }\n    return disabled\n  }\n  bringForward () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl = []\n    const lowProrControl = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    let nextSelctedSeries: string[] = []\n    let nextHighControlSeries: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl!) {\n      const type = userData[selControl].type\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex + 1)\n      })\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\n      const nextControlType = userData[nextSelectedControl].type\n      if (nextSelectedControl !== '' && !highProrControl.includes(nextSelectedControl)) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextSelctedSeries.includes(selControl)) {\n            nextSelctedSeries.push(selControl)\n          }\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\n            nextSelctedSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextSelctedSeries).length !== 0) {\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', swapTabIndex - (nextSelctedSeries!.length - 1))\n            }\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! + 1\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\n            }\n            nextSelctedSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      } else {\n        if (getSelControl!.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\n          if (!nextHighControlSeries.includes(selControl)) {\n            nextHighControlSeries.push(selControl)\n          }\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\n            nextHighControlSeries.push(nextSelectedControl)\n          }\n        } else if (type === 'Frame' || type === 'MultiPage' || type === 'ListBox') {\n          if (Object.keys(nextHighControlSeries).length !== 0) {\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', swapTabIndex - (nextHighControlSeries!.length - 1))\n            }\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! + 1\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\n            }\n            nextHighControlSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      }\n    }\n  }\n  sendBackward () {\n    const userData = this.userformData[this.userFormId]\n    const highProrControl = []\n    const lowProrControl = []\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\n    const containerControls = this.userformData[this.userFormId][container].controls\n    for (const index in containerControls) {\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\n        highProrControl.push(containerControls[index])\n      } else {\n        lowProrControl.push(containerControls[index])\n      }\n    }\n    let nextSelctedSeries: string[] = []\n    let nextHighControlSeries: string[] = []\n    const getSelControl = [...this.getSelectedControlsDatas!]\n    getSelControl.sort((a, b) => {\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\n    })\n    for (const selControl of getSelControl) {\n      const type = userData[selControl].type\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex - 1)\n      })\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\n      const nextControlType = userData[nextSelectedControl].type\n      if (nextSelectedControl !== '' && !highProrControl.includes(selControl)) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextSelctedSeries.includes(selControl)) {\n            nextSelctedSeries.push(selControl)\n          }\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\n            nextSelctedSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextSelctedSeries).length !== 0) {\n            console.log('nextSelctedSeries', nextSelctedSeries)\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', (nextSelctedSeries!.length + 1) - swapTabIndex)\n            }\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! - 1\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\n            }\n            nextSelctedSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      } else if (!lowProrControl.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\n        if (getSelControl!.includes(nextSelectedControl)) {\n          if (!nextHighControlSeries.includes(selControl)) {\n            nextHighControlSeries.push(selControl)\n          }\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\n            nextHighControlSeries.push(nextSelectedControl)\n          }\n        } else {\n          if (Object.keys(nextHighControlSeries).length !== 0) {\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', (nextHighControlSeries!.length + 1) - swapTabIndex)\n            }\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! - 1\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\n            }\n            nextHighControlSeries = []\n          } else {\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\n              const index = userData[container].controls.findIndex(\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\n              )\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"],"sourceRoot":""}]}